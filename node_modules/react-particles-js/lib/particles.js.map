{"version":3,"sources":["webpack://Particles/webpack/universalModuleDefinition","webpack://Particles/webpack/bootstrap","webpack://Particles/./src/Particles.tsx","webpack://Particles/./src/index.ts","webpack://Particles/./src/lib/IParams.ts","webpack://Particles/./src/lib/ImageManager.ts","webpack://Particles/./src/lib/Interactivity.ts","webpack://Particles/./src/lib/Modes.ts","webpack://Particles/./src/lib/Particle.ts","webpack://Particles/./src/lib/ParticleManager.ts","webpack://Particles/./src/lib/ParticlesLibrary.ts","webpack://Particles/./src/lib/PolygonMask.ts","webpack://Particles/./src/lib/Utils.ts","webpack://Particles/./src/lib/Vendors.ts","webpack://Particles/./src/lib/getDefaultParams.ts","webpack://Particles/./src/lib/index.ts","webpack://Particles/external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClFA;;AACA;;AAEA;;IAgBqB,S;;;;;AAWpB,qBAAY,KAAZ,EAAiC;AAAA;;AAAA;;AAChC,mFAAM,KAAN;AACA,UAAK,KAAL,GAAa;AACZ,YAAM,EAAE,SADI;AAEZ,aAAO,EAAE;AAFG,KAAb;AAIA,UAAK,UAAL,GAAkB,MAAK,UAAL,CAAgB,IAAhB,uDAAlB;AANgC;AAOhC;;;;0CAE6B,M,EAAiC;AAC9D,UAAG;AAAC,YAAI,MAAM,KAAK,SAAf,EAA0B,OAAO,IAAP;AAAc,OAA5C,CAA6C,WAAK;AAAE,eAAO,IAAP;AAAc;;AAClE,aAAO,IAAI,sBAAJ,CAAqB,MAArB,CAAP;AACA;;;4BAEe,K,EAA+B;AAAA;;AAC9C,UAAI,KAAK,KAAL,CAAW,MAAf,EAAuB;AACtB,aAAK,OAAL;AACA,aAAK,QAAL,CACC;AACC,iBAAO,EAAE,KAAK,qBAAL,CAA2B,KAAK,CAAC,MAAjC;AADV,SADD,EAIC,YAAK;AACJ,gBAAI,CAAC,UAAL,CAAgB,MAAI,CAAC,KAAL,CAAW,MAA3B;AACA,SANF;AAQA;AACD;;;8BAEM;AACN,WAAK,KAAL,CAAW,OAAX,CAAmB,OAAnB;AACA;;;+BAEU,M,EAAyB;AAAA;;AACnC,UAAI,MAAJ,EAAY;AACX,aAAK,QAAL,CACC;AACC,gBAAM,EAAN;AADD,SADD,EAIC,YAAK;AACJ,gBAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,UAAnB,CAA8B,MAAI,CAAC,KAAL,CAAW,MAAzC;;AACA,gBAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;AACA,SAPF;AASA;AACD;;;0CAEqB,S,EAAmC;AACxD,aAAO,SAAS,KAAK,KAAK,KAA1B;AACA;;;yCAEiB;AACjB,WAAK,OAAL,CAAa,KAAK,KAAlB;AACA;;;kCAEU;AACV,WAAK,OAAL,CAAa,KAAK,KAAlB;;AACA;AACA;;;wCAEgB;AAChB,WAAK,QAAL,CAAc;AACb,eAAO,EAAE,KAAK,qBAAL,CAA2B,KAAK,KAAL,CAAW,MAAtC;AADI,OAAd;AAGA;;;2CAEmB;AACnB,WAAK,OAAL;AACA,WAAK,QAAL,CAAc;AACb,eAAO,EAAE;AADI,OAAd;AAGA;;;6BAEK;AAAA,wBAC+C,KAAK,KADpD;AAAA,UACC,KADD,eACC,KADD;AAAA,UACQ,MADR,eACQ,MADR;AAAA,UACgB,SADhB,eACgB,SADhB;AAAA,UAC2B,eAD3B,eAC2B,eAD3B;AAEL,aACC;AAAK,iBAAS,EAAE;AAAhB,SACC;AACC,WAAG,EAAE,KAAK,UADX;AAEC,iBAAS,EAAE,eAFZ;AAGC,aAAK,oBACD,KAAK,KAAL,CAAW,KADV,EACe;AACnB,eAAK,EAAL,KADmB;AAEnB,gBAAM,EAAN;AAFmB,SADf;AAHN,QADD,CADD;AAaA;;;;EAlGqC,iB;;AAIxB,yBAA+B;AAC5C,OAAK,EAAE,MADqC;AAE5C,QAAM,EAAE,MAFoC;AAG5C,QAAM,EAAE,EAHoC;AAI5C,OAAK,EAAE;AAJqC,CAA/B;AAJf,4B;;;;;;;;;;;;;;ACnBA;;AAGS,oBAHF,mBAGE;AADT,kBAAe,mBAAf,C;;;;;;;;;;;;;ACMA,IAAY,SAAZ;;AAAA,WAAY,SAAZ,EAAqB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CARD,EAAY,SAAS,GAAT,0CAAS,EAAT,CAAZ;;AAUA,IAAY,aAAZ;;AAAA,WAAY,aAAZ,EAAyB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAVD,EAAY,aAAa,GAAb,kDAAa,EAAb,CAAZ;;AAYA,IAAY,WAAZ;;AAAA,WAAY,WAAZ,EAAuB;AACtB;AACA;AACA,CAHD,EAAY,WAAW,GAAX,8CAAW,EAAX,CAAZ;;AAKA,IAAY,iBAAZ;;AAAA,WAAY,iBAAZ,EAA6B;AAC5B;AACA;AACA;AACA;AACA;AACA,CAND,EAAY,iBAAiB,GAAjB,0DAAiB,EAAjB,CAAZ;;AA2BA,IAAY,WAAZ;;AAAA,WAAY,WAAZ,EAAuB;AACtB;AACA;AACA;AACA,CAJD,EAAY,WAAW,GAAX,8CAAW,EAAX,CAAZ;;AAMA,IAAY,4BAAZ;;AAAA,WAAY,4BAAZ,EAAwC;AACvC;AACA;AACA;AACA;AACA,CALD,EAAY,4BAA4B,GAA5B,gFAA4B,EAA5B,CAAZ;;AAOA,IAAY,eAAZ;;AAAA,WAAY,eAAZ,EAA2B;AAC1B;AACA;AACA,CAHD,EAAY,eAAe,GAAf,sDAAe,EAAf,CAAZ,E;;;;;;;;;;;;;;;;;;;;AC1EA;;AAKA;;AAeA,IAAY,SAAZ;;AAAA,WAAY,SAAZ,EAAqB;AACpB;AACA;AACA,CAHD,EAAY,SAAS,GAAT,0CAAS,EAAT,CAAZ;;IAKa,Y;;;AAAb;AAAA;;AACS,uBAAwC,IAAxC;AACA,0BAA6C,EAA7C;AACA,gBAAkB,SAAS,CAAC,MAA5B;AA8KR;;;;6BA5KS,K,EAAc;AACtB,UAAI,KAAK,KAAK,SAAd,EAAyB;AACxB,YAAI,KAAK,cAAL,CAAoB,MAApB,KAA+B,CAAnC,EACC,MAAM,IAAI,KAAJ,qEAAN;AAGD,eAAO,KAAK,cAAL,CAAoB,KAAK,GAAG,KAAK,cAAL,CAAoB,MAAhD,CAAP;AACA,OAND,MAMO;AACN,eAAO,KAAK,WAAZ;AACA;AACD;;;+BAGA,K,EAA+B;AAAA;;AAE/B,UAAI,gBAAQ,oBAAU,KAAlB,EAAyB,KAAK,CAAC,IAA/B,CAAJ,EAA0C;AACzC,aAAK,IAAL,GAAY,SAAS,CAAC,MAAtB;AACA,eAAO,KAAK,gBAAL,CAAsB,KAAK,CAAC,KAA5B,EAAmC,IAAnC,CAAwC,qBAAW,EAAG;AAC5D,eAAI,CAAC,WAAL,GAAmB,WAAnB;AACA,mCACI,KADJ,EACS;AACR,iBAAK,EAAE;AADC,WADT;AAIA,SANM,CAAP;AAOA,OATD,MASO,IAAI,gBAAQ,oBAAU,MAAlB,EAA0B,KAAK,CAAC,IAAhC,CAAJ,EAA2C;AAEjD,aAAK,IAAL,GAAY,SAAS,CAAC,QAAtB;AACA,YAAM,QAAQ,GAAG,KAAK,CAAC,MAAN,CAAa,GAAb,CAAiB,oBAAU;AAAA,iBAC3C,KAAI,CAAC,gBAAL,CAAsB,UAAtB,CAD2C;AAAA,SAA3B,CAAjB;AAGA,eAAO,OAAO,CAAC,GAAR,CAAY,QAAZ,EAAsB,IAAtB,CAA2B,sBAAY,EAAG;AAChD,eAAI,CAAC,cAAL,GAAsB,YAAtB;AACA,mCACI,KADJ,EACS;AACR,kBAAM,EAAE;AADA,WADT;AAIA,SANM,CAAP;AAOA,OAbM,MAaA;AACN,eAAO,OAAO,CAAC,OAAR,CAAgB,KAAhB,CAAP;AACA;AACD;;;qCAGA,K,EAA+B;AAE/B,UAAM,WAAW,GAAG,KAAK,gBAAL,CAAsB;AACzC,cAAM,EAAE,KAAK,CAAC,MAD2B;AAEzC,aAAK,EAAE,KAAK,CAAC,KAF4B;AAGzC,WAAG,EAAE,KAAK,CAAC;AAH8B,OAAtB,CAApB;AAMA,UAAI,KAAK,GAAG,KAAK,CAAC,KAAN,GAAc,KAAK,CAAC,MAAhC;AACA,UAAI,KAAK,KAAK,QAAV,IAAsB,KAAK,KAAK,CAApC,EAAuC,KAAK,GAAG,CAAR;AACvC,iBAAW,CAAC,KAAZ,GAAoB,KAApB;AAEA,UAAI,KAAJ;;AACA,UACE,KAAK,GAAG,8CAA8C,IAA9C,CAAmD,KAAK,CAAC,GAAzD,CADV,EAEE;AACD,mBAAW,CAAC,IAAZ,GAAmB,KAAK,CAAC,CAAD,CAAxB;AACA,mBAAW,CAAC,OAAZ,GAAsB,IAAI,CAAC,KAAK,CAAC,CAAD,CAAN,CAA1B;AACA,OALD,MAKO,IAAK,KAAK,GAAG,cAAc,IAAd,CAAmB,KAAK,CAAC,GAAzB,CAAb,EAA6C;AACnD,mBAAW,CAAC,IAAZ,GAAmB,KAAK,CAAC,CAAD,CAAxB;AACA;;AACD,aAAO,KAAK,SAAL,CAAe,WAAf,CAAP;AACA;;;8BAGA,K,EAA+B;AAE/B,WAAK,qBAAQ,KAAR,CAAL;;AACA,UAAI,KAAK,CAAC,GAAN,IAAa,EAAjB,EAAqB;AACpB,YAAI,KAAK,CAAC,IAAN,IAAc,KAAlB,EAAyB;AACxB,cAAI,KAAK,CAAC,OAAV,EAAmB;AAElB,mBAAO,OAAO,CAAC,OAAR,CAAgB,KAAhB,CAAP;AACA,WAHD,MAGO;AACN,mBAAO,KAAK,aAAL,CAAmB,KAAK,CAAC,GAAzB,EAA8B,IAA9B,CAAmC,cAAI,EAAG;AAChD,mBAAK,CAAC,OAAN,GAAgB,IAAI,CAAC,QAArB;AACA,qBAAO,KAAP;AACA,aAHM,CAAP;AAIA;AACD,SAVD,MAUO;AACN,iBAAO,IAAI,OAAJ,CAAsC,iBAAO,EAAG;AACtD,gBAAI,YAAY,GAAqB,IAAI,KAAJ,EAArC;AACA,wBAAY,CAAC,gBAAb,CAA8B,MAA9B,EAAsC,YAAK;AAC1C,mBAAK,CAAC,WAAN,GAAoB,YAApB;AACA,qBAAO,CAAC,KAAD,CAAP;AACA,aAHD;AAIA,wBAAY,CAAC,GAAb,GAAmB,KAAK,CAAC,GAAzB;AACA,WAPM,CAAP;AAQA;AACD,OArBD,MAqBO;AACN,eAAO,OAAO,CAAC,MAAR,CACN,IAAI,KAAJ,CAAU,yCAAV,CADM,CAAP;AAGA;AACD;;;kCAGA,G,EAAW;AAEX,aAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAoB;AACtC,YAAI,GAAG,GAAmB,IAAI,cAAJ,EAA1B;AACA,WAAG,CAAC,IAAJ,CAAS,KAAT,EAAgB,GAAhB;;AACA,WAAG,CAAC,kBAAJ,GAAyB,UAAC,IAAD,EAAc;AACtC,cAAI,GAAG,CAAC,UAAJ,IAAkB,CAAtB,EAAyB;AACxB,gBAAI,GAAG,CAAC,MAAJ,IAAc,GAAlB,EAAuB;AACtB,qBAAO,CAAC;AAAE,wBAAQ,EAAE,IAAI,CAAC,aAAL,CAAmB,QAA/B;AAAyC,mBAAG,EAAH;AAAzC,eAAD,CAAP;AACA,aAFD,MAEO;AACN,oBAAM,CACL,IAAI,KAAJ,kDAC2C,GAAG,CAAC,UAD/C,EADK,CAAN;AAKA;AACD;AACD,SAZD;;AAaA,WAAG,CAAC,IAAJ;AACA,OAjBM,CAAP;AAkBA;;;mCAGA,S,EACA,kB,EAGC;AAED,UAAM,MAAM,GAAW,mCAAvB;AAEA,UAAI,aAAa,GAAW,SAAS,CAAC,OAAV,CAAkB,MAAlB,EAA0B,UAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAe;AACpE,YAAI,WAAJ;;AACA,YAAI,kBAAkB,CAAC,KAAnB,CAAyB,GAA7B,EAAkC;AAAA,sCACf,kBAAkB,CAAC,KAAnB,CAAyB,GADV;AAAA,cAC3B,EAD2B,yBAC3B,CAD2B;AAAA,cACxB,EADwB,yBACxB,CADwB;AAAA,cACrB,EADqB,yBACrB,CADqB;AAEjC,qBAAW,mBAAY,EAAZ,eAAkB,EAAlB,eAAwB,EAAxB,eAA8B,kBAAkB,CAAC,OAAjD,OAAX;AACA,SAHD,MAGO;AAAA,uCACY,kBAAkB,CAAC,KAAnB,CAAyB,GADrC;AAAA,cACA,CADA,0BACA,CADA;AAAA,cACG,CADH,0BACG,CADH;AAAA,cACM,CADN,0BACM,CADN;AAEN,qBAAW,mBAAY,CAAZ,eAAkB,CAAlB,eAAwB,CAAxB,eAA8B,kBAAkB,CAAC,OAAjD,OAAX;AACA;;AACD,eAAO,WAAP;AACA,OAV2B,CAA5B;AAYA,UAAM,GAAG,GAAS,IAAI,IAAJ,CAAS,CAAC,aAAD,CAAT,EAA0B;AAC3C,YAAI,EAAE;AADqC,OAA1B,CAAlB;AAGA,UAAM,MAAM,GAAe,MAAM,CAAC,GAAP,IAAe,MAA1C;AACA,UAAM,GAAG,GAAG,MAAM,CAAC,eAAP,CAAuB,GAAvB,CAAZ;AAEA,aAAO,IAAI,OAAJ,CAAY,iBAAO,EAAG;AAC5B,YAAI,GAAG,GAAG,IAAI,KAAJ,EAAV;AACA,WAAG,CAAC,gBAAJ,CAAqB,MAArB,EAA6B,YAAK;AACjC,gBAAM,CAAC,eAAP,CAAuB,GAAvB;AACA,iBAAO,CAAC,GAAD,CAAP;AACA,SAHD;AAIA,WAAG,CAAC,GAAJ,GAAU,GAAV;AACA,OAPM,CAAP;AAQA;;;uCAGiD;AAAA,UAAjD,SAAiD,uEAAF,EAAE;AAEjD;AACC,eAAO,EAAE,IADV;AAEC,cAAM,EAAE,CAFT;AAGC,aAAK,EAAE,CAHR;AAIC,aAAK,EAAE,CAJR;AAKC,WAAG,EAAE,EALN;AAMC,YAAI,EAAE;AANP,SAOI,SAPJ;AASA;;;;;;AAhLF,oC;;;;;;;;;;;;;;;;;;;;ACzBA;;AAEA,IAAY,wBAAZ;;AAAA,WAAY,wBAAZ,EAAoC;AACnC;AACA;AACA,CAHD,EAAY,wBAAwB,GAAxB,wEAAwB,EAAxB,CAAZ;;IAKqB,Q;;;AAapB,oBAAoB,OAApB,EAA6C;AAAA;;AAAzB;AAXpB,6BAA4B;AAC3B,OAAC,EAAE,CADwB;AAE3B,OAAC,EAAE;AAFwB,KAA5B;AAIA,8BAA6B;AAC5B,OAAC,EAAE,CADyB;AAE5B,OAAC,EAAE;AAFyB,KAA7B;AAKA,0BAAyB,CAAzB;AAGC,SAAK,WAAL,GAAmB,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAK,YAAL,GAAoB,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAK,YAAL,GAAoB,KAAK,YAAL,CAAkB,IAAlB,CAAuB,IAAvB,CAApB;AACA;;;;0CAEkB;AAClB,UAAM,aAAa,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,aAAN;AAAA,OAA3B,CAAtB;;AAEA,UAAI,aAAa,CAAC,SAAd,KAA4B,QAAhC,EAA0C;AACzC,aAAK,kBAAL,GAA0B,MAA1B;AACA,OAFD,MAEO;AACN,aAAK,kBAAL,GAA0B,KAAK,OAAL,CAAa,MAAb,CAAoB,OAA9C;AACA;;AAED,UACC,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAA7B,IACA,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAF9B,EAGE;AACD,aAAK,kBAAL,CAAwB,gBAAxB,CAAyC,WAAzC,EAAsD,KAAK,WAA3D;AACA,aAAK,kBAAL,CAAwB,gBAAxB,CAAyC,YAAzC,EAAuD,KAAK,YAA5D;AACA;;AAED,UAAI,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAAjC,EAAyC;AACxC,aAAK,kBAAL,CAAwB,gBAAxB,CAAyC,OAAzC,EAAkD,KAAK,YAAvD;AACA;AACD;;;0CAEkB;AAClB,UAAM,aAAa,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,aAAN;AAAA,OAA3B,CAAtB;AACA,UAAI,CAAC,KAAK,kBAAV,EAA8B;;AAE9B,UACC,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAA7B,IACA,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAF9B,EAGE;AACD,aAAK,kBAAL,CAAwB,mBAAxB,CACC,WADD,EAEC,KAAK,WAFN;AAIA,aAAK,kBAAL,CAAwB,mBAAxB,CACC,YADD,EAEC,KAAK,YAFN;AAIA;;AAED,UAAI,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAAjC,EAAyC;AACxC,aAAK,kBAAL,CAAwB,mBAAxB,CAA4C,OAA5C,EAAqD,KAAK,YAA1D;AACA;AACD;;;gCAEW,K,EAAiB;AAC5B,UAAM,QAAQ,GAAW;AACxB,SAAC,EAAE,CADqB;AAExB,SAAC,EAAE;AAFqB,OAAzB;;AAKA,UAAI,KAAK,kBAAL,KAA4B,MAAhC,EAAwC;AACvC,gBAAQ,CAAC,CAAT,GAAa,KAAK,CAAC,OAAnB;AACA,gBAAQ,CAAC,CAAT,GAAa,KAAK,CAAC,OAAnB;AACA,OAHD,MAGO;AACN,gBAAQ,CAAC,CAAT,GAAa,KAAK,CAAC,OAAN,IAAiB,KAAK,CAAC,OAApC;AACA,gBAAQ,CAAC,CAAT,GAAa,KAAK,CAAC,OAAN,IAAiB,KAAK,CAAC,OAApC;AACA;;AAED,WAAK,iBAAL,GAAyB,QAAzB;;AAEA,UAAI,KAAK,OAAL,CAAa,MAAjB,EAAyB;AACxB,aAAK,iBAAL,CAAuB,CAAvB,IAA4B,KAAK,OAAL,CAAa,MAAb,CAAoB,OAAhD;AACA,aAAK,iBAAL,CAAuB,CAAvB,IAA4B,KAAK,OAAL,CAAa,MAAb,CAAoB,OAAhD;AACA;;AAED,WAAK,WAAL,GAAmB,wBAAwB,CAAC,SAA5C;AACA;;;mCAEW;AACX,WAAK,iBAAL,CAAuB,CAAvB,GAA2B,CAA3B;AACA,WAAK,iBAAL,CAAuB,CAAvB,GAA2B,CAA3B;AAEA,WAAK,WAAL,GAAmB,wBAAwB,CAAC,UAA5C;AACA;;;mCAEW;AAAA;;AACX,UAAM,aAAa,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,aAAN;AAAA,OAA3B,CAAtB;AACA,UAAM,SAAS,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAN;AAAA,OAA3B,CAAlB;AACA,UAAM,OAAO,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,OAAN;AAAA,OAA3B,CAAhB;AAEA,WAAK,kBAAL,GAAuB,kBAAQ,KAAK,iBAAb,CAAvB;;AAEA,UACC,OAAO,CAAC,MAAR,IACA,CAAC,sBAAY,MAAb,EAAqB,sBAAY,OAAjC,EAA0C,OAA1C,CAAkD,OAAO,CAAC,IAA1D,IAAkE,CAAC,CAFpE,EAGE;AACD,YAAM,QAAQ,GAAG,KAAK,OAAL,CAAa,WAAb,CAAyB,oBAAzB,CAChB,KAAK,kBADW,CAAjB;AAGA,YAAI,OAAO,CAAC,IAAR,KAAiB,sBAAY,MAA7B,IAAuC,CAAC,QAA5C,EAAsD;AACtD,YAAI,OAAO,CAAC,IAAR,KAAiB,sBAAY,OAA7B,IAAwC,QAA5C,EAAsD;AACtD;;AAED,WAAK,cAAL,GAAsB,IAAI,IAAJ,GAAW,OAAX,EAAtB;;AAEA,UAAI,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAAjC,EAAyC;AACxC,gBAAQ,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,IAArC;AACC,eAAK,4BAAkB,IAAvB;AACC,gBAAI,SAAS,CAAC,IAAV,CAAe,MAAnB,EAA2B;AAC1B,mBAAK,OAAL,CAAa,KAAb,CAAmB,aAAnB,CACC,aAAa,CAAC,KAAd,CAAoB,IAApB,CAAyB,YAD1B,EAEC,KAAK,kBAFN;AAIA,aALD,MAKO;AACN,kBAAI,aAAa,CAAC,KAAd,CAAoB,IAApB,CAAyB,YAAzB,IAAyC,CAA7C,EAAgD;AAC/C,qBAAK,OAAL,CAAa,KAAb,CAAmB,aAAnB,CACC,aAAa,CAAC,KAAd,CAAoB,IAApB,CAAyB,YAD1B,EAEC,KAAK,kBAFN;AAIA,eALD,MAKO,IAAI,aAAa,CAAC,KAAd,CAAoB,IAApB,CAAyB,YAAzB,GAAwC,CAA5C,EAA+C;AACrD,qBAAK,OAAL,CAAa,KAAb,CAAmB,aAAnB,CACC,aAAa,CAAC,KAAd,CAAoB,IAApB,CAAyB,YAD1B;AAGA;AACD;;AACD;;AAED,eAAK,4BAAkB,MAAvB;AACC,iBAAK,OAAL,CAAa,KAAb,CAAmB,eAAnB,CACC,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,YAD5B;AAGA;;AAED,eAAK,4BAAkB,MAAvB;AACC,iBAAK,OAAL,CAAa,KAAb,CAAmB,eAAnB,GAAqC,IAArC;AACA;;AAED,eAAK,4BAAkB,OAAvB;AACC,iBAAK,OAAL,CAAa,KAAb,CAAmB,gBAAnB,GAAsC,IAAtC;AACA,iBAAK,OAAL,CAAa,KAAb,CAAmB,aAAnB,GAAmC,CAAnC;AACA,iBAAK,OAAL,CAAa,KAAb,CAAmB,cAAnB,GAAoC,KAApC;AACA,sBAAU,CAAC,YAAK;AACf,mBAAI,CAAC,OAAL,CAAa,KAAb,CAAmB,gBAAnB,GAAsC,KAAtC;AACA,aAFS,EAEP,aAAa,CAAC,KAAd,CAAoB,OAApB,CAA4B,QAA5B,GAAuC,IAFhC,CAAV;AAGA;AAtCF;AAwCA;AACD;;;kCAEa,E,EAAc,E,EAAY;AACvC,UAAM,QAAQ,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,WAArB,CAAiC,EAAjC,EAAqC,EAArC,CAAjB;AACA,UAAM,MAAM,GAAG,KAAK,OAAL,CAAa,MAA5B;AACA,UAAM,UAAU,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,WAAhB;AAAA,OAA3B,CAAnB;;AAEA,UAAI,QAAQ,IAAI,UAAU,CAAC,QAA3B,EAAqC;AACpC,YAAM,WAAW,GAChB,UAAU,CAAC,OAAX,GACA,QAAQ,IAAI,IAAI,UAAU,CAAC,OAAnB,CAAR,GAAsC,UAAU,CAAC,QAFlD;;AAGA,YAAI,WAAW,GAAG,CAAlB,EAAqB;AACpB,cAAI,SAAS,GAAG,UAAU,CAAC,cAA3B;AADoB,cAEd,CAFc,GAEF,SAFE,CAEd,CAFc;AAAA,cAEX,CAFW,GAEF,SAFE,CAEX,CAFW;AAAA,cAER,CAFQ,GAEF,SAFE,CAER,CAFQ;AAGpB,gBAAM,CAAC,GAAP,CAAW,IAAX;AACA,gBAAM,CAAC,GAAP,CAAW,WAAX,mBAAkC,CAAlC,eAAwC,CAAxC,eAA8C,CAA9C,eAAoD,WAApD;AACA,gBAAM,CAAC,GAAP,CAAW,SAAX,GAAuB,UAAU,CAAC,KAAlC;AAEA,gBAAM,CAAC,GAAP,CAAW,SAAX;;AACA,cAAI,UAAU,CAAC,MAAX,CAAkB,MAAtB,EAA8B;AAC7B,kBAAM,CAAC,GAAP,CAAW,UAAX,GAAwB,UAAU,CAAC,MAAX,CAAkB,IAA1C;AACA,kBAAM,CAAC,GAAP,CAAW,WAAX,GAAyB,UAAU,CAAC,MAAX,CAAkB,KAA3C;AACA;;AAED,gBAAM,CAAC,GAAP,CAAW,MAAX,CAAkB,EAAE,CAAC,CAArB,EAAwB,EAAE,CAAC,CAA3B;AACA,gBAAM,CAAC,GAAP,CAAW,MAAX,CAAkB,EAAE,CAAC,CAArB,EAAwB,EAAE,CAAC,CAA3B;AACA,gBAAM,CAAC,GAAP,CAAW,MAAX;AACA,gBAAM,CAAC,GAAP,CAAW,SAAX;AACA,gBAAM,CAAC,GAAP,CAAW,OAAX;AACA;AACD;AACD;;;qCAEgB,E,EAAc,E,EAAY;AAAA,kCAKtC,KAAK,OAAL,CAAa,OAAb,CAAqB,YAArB,CAAkC,EAAlC,EAAsC,EAAtC,CALsC;AAAA,UAEzC,QAFyC,yBAEzC,QAFyC;AAAA,UAGzC,SAHyC,yBAGzC,SAHyC;AAAA,UAIzC,SAJyC,yBAIzC,SAJyC;;AAO1C,UAAM,WAAW,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,WAAhB;AAAA,OAA3B,CAApB;AACA,UAAM,OAAO,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,IAAZ,CAAiB,OAArB;AAAA,OAA3B,CAAhB;;AAEA,UAAI,QAAQ,IAAI,WAAW,CAAC,QAA5B,EAAsC;AACrC,YAAM,aAAa,GAAG,SAAS,IAAI,OAAO,CAAC,OAAR,GAAkB,IAAtB,CAA/B;AACA,YAAM,aAAa,GAAG,SAAS,IAAI,OAAO,CAAC,OAAR,GAAkB,IAAtB,CAA/B;AAEA,UAAE,CAAC,EAAH,IAAS,aAAT;AACA,UAAE,CAAC,EAAH,IAAS,aAAT;AAEA,UAAE,CAAC,EAAH,IAAS,aAAT;AACA,UAAE,CAAC,EAAH,IAAS,aAAT;AACA;AACD;;;oCAEe,E,EAAc,E,EAAY;AACzC,UAAM,QAAQ,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,WAArB,CAAiC,EAAjC,EAAqC,EAArC,CAAjB;AACA,UAAI,eAAe,GAAG,EAAE,CAAC,MAAH,GAAY,EAAE,CAAC,MAArC;;AAEA,UAAI,QAAQ,IAAI,eAAhB,EAAiC;AAChC,UAAE,CAAC,EAAH,GAAQ,CAAC,EAAE,CAAC,EAAZ;AACA,UAAE,CAAC,EAAH,GAAQ,CAAC,EAAE,CAAC,EAAZ;AACA,UAAE,CAAC,EAAH,GAAQ,CAAC,EAAE,CAAC,EAAZ;AACA,UAAE,CAAC,EAAH,GAAQ,CAAC,EAAE,CAAC,EAAZ;AACA;AACD;;;;;;AA9NF,2B;;;;;;;;;;;;;;;;;;;;ACRA;;AAQA;;AACA;;IAEqB,K;;;AAQpB,iBAAoB,OAApB,EAA6C;AAAA;;AAAzB;AAPpB,2BAAkB,KAAlB;AACA,+BAAsB,KAAtB;AACA,mBAAU,KAAV;AACA,4BAAmB,KAAnB;AACA,yBAAgB,CAAhB;AACA,0BAAiB,KAAjB;AAEiD;;;;kCAEnC,M,EAAgB,Q,EAAiB;AAAA,UACxC,OADwC,GAC5B,KAAK,OADuB,CACxC,OADwC;AAG9C,UAAM,SAAS,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAN;AAAA,OAA3B,CAAlB;AAEA,WAAK,OAAL,GAAe,IAAf;;AAEA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,MAApB,EAA4B,CAAC,EAA7B,EAAiC;AAChC,iBAAS,CAAC,KAAV,CAAgB,IAAhB,CAAqB,IAAI,WAAJ,CAAa,KAAK,OAAlB,EAA2B;AAAE,kBAAQ,EAAR;AAAF,SAA3B,CAArB;;AAEA,YAAI,CAAC,KAAK,MAAM,GAAG,CAAnB,EAAsB;AACrB,cAAI,CAAC,SAAS,CAAC,IAAV,CAAe,MAApB,EAA4B;AAC3B,mBAAO,CAAC,aAAR;AACA;;AACD,eAAK,OAAL,GAAe,KAAf;AACA;AACD;AACD;;;oCAEe,M,EAAc;AAAA,UACvB,OADuB,GACX,KAAK,OADM,CACvB,OADuB;AAE7B,UAAM,SAAS,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAN;AAAA,OAA3B,CAAlB;AAEA,eAAS,CAAC,KAAV,CAAgB,MAAhB,CAAuB,CAAvB,EAA0B,MAA1B;;AACA,UAAI,CAAC,SAAS,CAAC,IAAV,CAAe,MAApB,EAA4B;AAC3B,eAAO,CAAC,aAAR;AACA;AACD;;;mCAEc,Q,EAAkB;AAAA;;AAChC,UAAM,aAAa,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,aAAN;AAAA,OAA3B,CAAtB;AACA,UAAM,SAAS,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAN;AAAA,OAA3B,CAAlB;;AAEA,UACC,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAA7B,IACA,aAAU,4BAAkB,MAA5B,EAAoC,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,IAAjE,CAFD,EAGE;AACD,YAAM,aAAa,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,WAArB,CACrB,QADqB,EAErB,KAAK,OAAL,CAAa,aAAb,CAA2B,iBAFN,CAAtB;AAIA,YAAM,cAAc,GAAG,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,QAAlD;AACA,YAAM,KAAK,GAAG,IAAI,aAAa,GAAG,cAAlC;;AAEA,YAAI,aAAa,IAAI,cAArB,EAAqC;AACpC,cACC,KAAK,IAAI,CAAT,IACA,KAAK,OAAL,CAAa,aAAb,CAA2B,WAA3B,KACC,yCAAyB,SAH3B,EAIE;AACD,gBAAM,UAAU,GAAG,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,IAA9C;AACA,gBAAM,YAAY,GAAG,SAAS,CAAC,IAAV,CAAe,KAApC;;AAEA,gBAAI,UAAU,IAAI,YAAlB,EAAgC;AAC/B,kBAAI,UAAU,GAAG,YAAjB,EAA+B;AAC9B,oBAAM,IAAI,GAAG,QAAQ,CAAC,MAAT,GAAkB,UAAU,GAAG,KAA5C;;AACA,oBAAI,IAAI,IAAI,CAAZ,EAAe;AACd,0BAAQ,CAAC,aAAT,GAAyB,IAAzB;AACA;AACD,eALD,MAKO;AACN,oBAAM,UAAU,GAAG,QAAQ,CAAC,MAAT,GAAkB,UAArC;;AACA,oBAAM,KAAI,GAAG,QAAQ,CAAC,MAAT,GAAkB,UAAU,GAAG,KAA5C;;AACA,oBAAI,KAAI,GAAG,CAAX,EAAc;AACb,0BAAQ,CAAC,aAAT,GAAyB,KAAzB;AACA,iBAFD,MAEO;AACN,0BAAQ,CAAC,aAAT,GAAyB,CAAzB;AACA;AACD;AACD;;AAED,gBAAI,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,OAA3B,KAAuC,SAAS,CAAC,OAAV,CAAkB,KAA7D,EAAoE;AACnE,kBAAI,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,OAA3B,GAAqC,SAAS,CAAC,OAAV,CAAkB,KAA3D,EAAkE;AACjE,oBAAM,OAAO,GAAG,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,OAA3B,GAAqC,KAArD;;AACA,oBACC,OAAO,GAAG,QAAQ,CAAC,YAAnB,IACA,OAAO,IAAI,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,OAFvC,EAGE;AACD,0BAAQ,CAAC,aAAT,GAAyB,OAAzB;AACA;AACD,eARD,MAQO;AACN,oBAAM,QAAO,GACZ,QAAQ,CAAC,YAAT,GACA,CAAC,SAAS,CAAC,OAAV,CAAkB,KAAlB,GAA0B,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,OAAtD,IACC,KAHF;;AAIA,oBACC,QAAO,GAAG,QAAQ,CAAC,YAAnB,IACA,QAAO,IAAI,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,OAFvC,EAGE;AACD,0BAAQ,CAAC,aAAT,GAAyB,QAAzB;AACA;AACD;AACD;AACD;AACD,SAjDD,MAiDO;AACN,kBAAQ,CAAC,aAAT,GAAyB,QAAQ,CAAC,YAAlC;AACA,kBAAQ,CAAC,aAAT,GAAyB,QAAQ,CAAC,MAAlC;AACA;;AAED,YACC,KAAK,OAAL,CAAa,aAAb,CAA2B,WAA3B,KACA,yCAAyB,UAF1B,EAGE;AACD,kBAAQ,CAAC,aAAT,GAAyB,QAAQ,CAAC,YAAlC;AACA,kBAAQ,CAAC,aAAT,GAAyB,QAAQ,CAAC,MAAlC;AACA;AACD,OAxED,MAwEO,IACN,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAA7B,IACA,aAAU,4BAAkB,MAA5B,EAAoC,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,IAAjE,CAFM,EAGL;AACD,YAAI,KAAK,eAAT,EAA0B;AACzB,cAAM,cAAa,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,WAArB,CACrB,QADqB,EAErB,KAAK,OAAL,CAAa,aAAb,CAA2B,kBAFN,CAAtB;;AAIA,cAAM,SAAS,GACd,CAAC,IAAI,IAAJ,GAAW,OAAX,KAAuB,KAAK,OAAL,CAAa,aAAb,CAA2B,cAAnD,IACA,IAFD;;AAIA,cAAI,SAAS,GAAG,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,QAA3C,EAAqD;AACpD,iBAAK,mBAAL,GAA2B,IAA3B;AACA;;AAED,cAAI,SAAS,GAAG,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,QAA3B,GAAsC,CAAtD,EAAyD;AACxD,iBAAK,eAAL,GAAuB,KAAvB;AACA,iBAAK,mBAAL,GAA2B,KAA3B;AACA;;AAED,cAAM,OAAO,GAAG,SAAV,OAAU,CACf,YADe,EAEf,eAFe,EAGf,YAHe,EAIf,KAJe,EAKf,EALe,EAMZ;AACH,gBAAI,YAAY,IAAI,eAApB,EAAqC;AACpC,kBAAI,CAAC,KAAI,CAAC,mBAAV,EAA+B;AAC9B,oBAAI,cAAa,IAAI,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,QAAhD,EAA0D;AACzD,sBAAI,GAAJ;;AACA,sBAAI,YAAY,IAAI,SAApB,EAA+B;AAC9B,uBAAG,GAAG,YAAN;AACA,mBAFD,MAEO;AACN,uBAAG,GAAG,KAAN;AACA;;AACD,sBAAI,GAAG,IAAI,YAAX,EAAyB;AACxB,wBAAI,KAAK,GACR,KAAK,GACJ,SAAS,IAAI,KAAK,GAAG,YAAZ,CAAV,GACC,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,QAH7B;AAIA,wBAAI,EAAE,IAAI,MAAV,EAAkB,QAAQ,CAAC,aAAT,GAAyB,KAAzB;AAClB,wBAAI,EAAE,IAAI,SAAV,EAAqB,QAAQ,CAAC,aAAT,GAAyB,KAAzB;AACrB;AACD,iBAfD,MAeO;AACN,sBAAI,EAAE,IAAI,MAAV,EAAkB,QAAQ,CAAC,aAAT,GAAyB,SAAzB;AAClB,sBAAI,EAAE,IAAI,SAAV,EAAqB,QAAQ,CAAC,aAAT,GAAyB,SAAzB;AACrB;AACD,eApBD,MAoBO;AACN,oBAAI,YAAY,IAAI,SAApB,EAA+B;AAC9B,sBAAI,SAAS,GACZ,KAAK,GACJ,SAAS,IAAI,KAAK,GAAG,YAAZ,CAAV,GACC,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,QAH7B;AAIA,sBAAI,GAAG,GAAQ,YAAY,GAAG,SAA9B;;AACA,sBAAI,MAAK,GAAQ,YAAY,GAAG,GAAhC;;AACA,sBAAI,EAAE,IAAI,MAAV,EAAkB,QAAQ,CAAC,aAAT,GAAyB,MAAzB;AAClB,sBAAI,EAAE,IAAI,SAAV,EAAqB,QAAQ,CAAC,aAAT,GAAyB,MAAzB;AACrB;AACD;AACD;AACD,WAzCD;;AA2CA,cAAI,KAAK,eAAT,EAA0B;AACzB,mBAAO,CACN,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,IADrB,EAEN,SAAS,CAAC,IAAV,CAAe,KAFT,EAGN,QAAQ,CAAC,aAHH,EAIN,QAAQ,CAAC,MAJH,EAKN,MALM,CAAP;AAOA,mBAAO,CACN,aAAa,CAAC,KAAd,CAAoB,MAApB,CAA2B,OADrB,EAEN,SAAS,CAAC,OAAV,CAAkB,KAFZ,EAGN,QAAQ,CAAC,aAHH,EAIN,QAAQ,CAAC,YAJH,EAKN,SALM,CAAP;AAOA;AACD;AACD;AACD;;;oCAEe,Q,EAAkB;AAAA,UACzB,MADyB,GACd,KAAK,OADS,CACzB,MADyB;AAEjC,UAAM,aAAa,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,aAAN;AAAA,OAA3B,CAAtB;AACA,UAAM,SAAS,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAN;AAAA,OAA3B,CAAlB;;AAEA,UACC,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAA7B,IACA,aAAU,4BAAkB,OAA5B,EAAqC,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,IAAlE,CADA,IAEA,KAAK,OAAL,CAAa,aAAb,CAA2B,WAA3B,KACC,yCAAyB,SAJ3B,EAKE;AAAA,oCAKG,KAAK,OAAL,CAAa,OAAb,CAAqB,YAArB,CACH,QADG,EAEH,KAAK,OAAL,CAAa,aAAb,CAA2B,iBAFxB,CALH;AAAA,YAEA,QAFA,yBAEA,QAFA;AAAA,YAGA,SAHA,yBAGA,SAHA;AAAA,YAIA,SAJA,yBAIA,SAJA;;AAUD,YAAI,OAAO,GAAQ;AAAE,WAAC,EAAE,SAAS,GAAG,QAAjB;AAA2B,WAAC,EAAE,SAAS,GAAG;AAA1C,SAAnB;AACA,YAAI,aAAa,GAAW,aAAa,CAAC,KAAd,CAAoB,OAApB,CAA4B,QAAxD;AACA,YAAI,QAAQ,GAAW,GAAvB;;AACA,YAAI,aAAa,GAAW,SAC1B,IAAI,aAAL,IACE,CAAC,CAAD,GAAK,IAAI,CAAC,GAAL,CAAS,QAAQ,GAAG,aAApB,EAAmC,CAAnC,CAAL,GAA6C,CAD/C,IAEC,aAFD,GAGC,QAJ0B,EAK3B,CAL2B,EAM3B,EAN2B,CAA5B;;AASA,YAAI,GAAG,GAAW;AACjB,WAAC,EAAE,QAAQ,CAAC,CAAT,GAAa,OAAO,CAAC,CAAR,GAAY,aADX;AAEjB,WAAC,EAAE,QAAQ,CAAC,CAAT,GAAa,OAAO,CAAC,CAAR,GAAY;AAFX,SAAlB;;AAKA,YAAI,SAAS,CAAC,IAAV,CAAe,QAAf,KAA4B,sBAAY,MAA5C,EAAoD;AACnD,cACC,GAAG,CAAC,CAAJ,GAAQ,QAAQ,CAAC,MAAjB,GAA0B,CAA1B,IACA,GAAG,CAAC,CAAJ,GAAQ,QAAQ,CAAC,MAAjB,GAA0B,MAAM,CAAC,KAFlC,EAIC,QAAQ,CAAC,CAAT,GAAa,GAAG,CAAC,CAAjB;AACD,cACC,GAAG,CAAC,CAAJ,GAAQ,QAAQ,CAAC,MAAjB,GAA0B,CAA1B,IACA,GAAG,CAAC,CAAJ,GAAQ,QAAQ,CAAC,MAAjB,GAA0B,MAAM,CAAC,MAFlC,EAIC,QAAQ,CAAC,CAAT,GAAa,GAAG,CAAC,CAAjB;AACD,SAXD,MAWO;AACN,kBAAQ,CAAC,CAAT,GAAa,GAAG,CAAC,CAAjB;AACA,kBAAQ,CAAC,CAAT,GAAa,GAAG,CAAC,CAAjB;AACA;AACD,OA/CD,MA+CO,IACN,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAA7B,IACA,aAAU,4BAAkB,OAA5B,EAAqC,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,IAAlE,CAFM,EAGL;AACD,YAAI,CAAC,KAAK,cAAV,EAA0B;AACzB,eAAK,aAAL;AACA,cAAI,KAAK,aAAL,IAAsB,SAAS,CAAC,KAAV,CAAgB,MAA1C,EACC,KAAK,cAAL,GAAsB,IAAtB;AACD;;AAED,YAAI,KAAK,gBAAT,EAA2B;AAC1B,cAAM,cAAa,GAAG,IAAI,CAAC,GAAL,CACrB,aAAa,CAAC,KAAd,CAAoB,OAApB,CAA4B,QAA5B,GAAuC,CADlB,EAErB,CAFqB,CAAtB;;AAD0B,uCAStB,KAAK,OAAL,CAAa,OAAb,CAAqB,YAArB,CACH,KAAK,OAAL,CAAa,aAAb,CAA2B,kBADxB,EAEH,QAFG,CATsB;AAAA,cAMzB,SANyB,0BAMzB,QANyB;AAAA,cAOzB,UAPyB,0BAOzB,SAPyB;AAAA,cAQzB,UARyB,0BAQzB,SARyB;;AAc1B,cAAM,KAAK,GAAG,cAAa,GAAG,IAAI,CAAC,GAAL,CAAS,SAAT,EAAmB,CAAnB,CAA9B;;AAEA,cAAM,SAAS,GAAG,KAAK,GAAG,CAAC,CAA3B;;AAEA,cAAI,SAAQ,IAAI,cAAhB,EAA+B;AAC9B,gBAAM,CAAC,GAAG,IAAI,CAAC,KAAL,CAAW,UAAX,EAAsB,UAAtB,CAAV;AACA,oBAAQ,CAAC,EAAT,GAAc,SAAS,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,CAA1B;AACA,oBAAQ,CAAC,EAAT,GAAc,SAAS,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,CAA1B;;AACA,gBAAI,SAAS,CAAC,IAAV,CAAe,QAAf,KAA4B,sBAAY,MAA5C,EAAoD;AACnD,kBAAM,IAAG,GAAW;AACnB,iBAAC,EAAE,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,EADN;AAEnB,iBAAC,EAAE,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC;AAFN,eAApB;AAIA,kBAAI,IAAG,CAAC,CAAJ,GAAQ,QAAQ,CAAC,MAAjB,GAA0B,MAAM,CAAC,KAArC,EACC,QAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAxB,CADD,KAEK,IAAI,IAAG,CAAC,CAAJ,GAAQ,QAAQ,CAAC,MAAjB,GAA0B,CAA9B,EAAiC,QAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAxB;AACtC,kBAAI,IAAG,CAAC,CAAJ,GAAQ,QAAQ,CAAC,MAAjB,GAA0B,MAAM,CAAC,MAArC,EACC,QAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAxB,CADD,KAEK,IAAI,IAAG,CAAC,CAAJ,GAAQ,QAAQ,CAAC,MAAjB,GAA0B,CAA9B,EAAiC,QAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAxB;AACtC;AACD;AACD,SAnCD,MAmCO;AACN,cAAI,KAAK,gBAAL,KAA0B,KAA9B,EAAqC;AACpC,oBAAQ,CAAC,EAAT,GAAc,QAAQ,CAAC,IAAvB;AACA,oBAAQ,CAAC,EAAT,GAAc,QAAQ,CAAC,IAAvB;AACA;AACD;AACD;AACD;;;iCAEY,Q,EAAkB;AAAA,UACxB,MADwB,GACb,KAAK,OADQ,CACxB,MADwB;;AAAA,kCAGK,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAJ;AAAA,OAA3B,CAHL;AAAA,UAGxB,aAHwB,yBAGxB,aAHwB;AAAA,UAGT,SAHS,yBAGT,SAHS;;AAK9B,UACC,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,MAA7B,IACA,KAAK,OAAL,CAAa,aAAb,CAA2B,WAA3B,KACC,yCAAyB,SAH3B,EAIE;AACD,YAAM,QAAQ,GAAG,KAAK,OAAL,CAAa,OAAb,CAAqB,WAArB,CAChB,QADgB,EAEhB,KAAK,OAAL,CAAa,aAAb,CAA2B,iBAFX,CAAjB;;AAKA,YAAI,QAAQ,IAAI,aAAa,CAAC,KAAd,CAAoB,IAApB,CAAyB,QAAzC,EAAmD;AAAA,cAC5C,IAD4C,GACnC,aAAa,CAAC,KADqB,CAC5C,IAD4C;AAGlD,cAAI,YAAY,GACf,IAAI,CAAC,WAAL,CAAiB,OAAjB,GACA,QAAQ,IAAI,IAAI,IAAI,CAAC,WAAL,CAAiB,OAAzB,CAAR,GAA4C,IAAI,CAAC,QAFlD;;AAIA,cAAI,YAAY,GAAG,CAAnB,EAAsB;AACrB,gBAAI,UAAU,GAIV,SAAS,CAAC,WAAV,CAAsB,cAJ1B;AADqB,gBAMf,CANe,GAMH,UANG,CAMf,CANe;AAAA,gBAMZ,CANY,GAMH,UANG,CAMZ,CANY;AAAA,gBAMT,CANS,GAMH,UANG,CAMT,CANS;AAOrB,kBAAM,CAAC,GAAP,CAAW,WAAX,mBAAkC,CAAlC,eAAwC,CAAxC,eAA8C,CAA9C,eAAoD,YAApD;AACA,kBAAM,CAAC,GAAP,CAAW,SAAX,GAAuB,SAAS,CAAC,WAAV,CAAsB,KAA7C;AAEA,kBAAM,CAAC,GAAP,CAAW,SAAX;AACA,kBAAM,CAAC,GAAP,CAAW,MAAX,CAAkB,QAAQ,CAAC,CAA3B,EAA8B,QAAQ,CAAC,CAAvC;AACA,kBAAM,CAAC,GAAP,CAAW,MAAX,CACC,KAAK,OAAL,CAAa,aAAb,CAA2B,iBAA3B,CAA6C,CAD9C,EAEC,KAAK,OAAL,CAAa,aAAb,CAA2B,iBAA3B,CAA6C,CAF9C;AAIA,kBAAM,CAAC,GAAP,CAAW,MAAX;AACA,kBAAM,CAAC,GAAP,CAAW,SAAX;AACA;AACD;AACD;AACD;;;;;;AA7VF,wB;;;;;;;;;;;;;;;;;;;;ACXA;;AACA;;AAYA;;IAiBqB,Q;;;AA6BpB,oBACC,OADD,EAUuB;AAAA,mFAAF,EAAE;AAAA,QAPrB,KAOqB,QAPrB,KAOqB;AAAA,QANrB,IAMqB,QANrB,IAMqB;AAAA,QALrB,OAKqB,QALrB,OAKqB;AAAA,QAJrB,OAIqB,QAJrB,OAIqB;AAAA,QAHrB,QAGqB,QAHrB,QAGqB;AAAA,QAFrB,KAEqB,QAFrB,KAEqB;AAAA,QADrB,IACqB,QADrB,IACqB;;AAAA;;AAEtB,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,SAAL,CAAe,IAAf;AACA,SAAK,aAAL,CAAmB,IAAnB,EAAyB,OAAzB,EAAkC,QAAlC;AACA,SAAK,UAAL,CAAgB,KAAhB;AACA,SAAK,YAAL,CAAkB,OAAlB;AACA,SAAK,cAAL,CAAoB,IAApB;AACA,SAAK,UAAL,CAAgB,KAAhB;AACA;;;;8BAES,I,EAA8B;AACvC,UAAM,WAAW,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,IAAhB;AAAA,OAA3B,CAApB;AACA,UAAI,GAAG,mBAAW,EAAX,EAAe,WAAf,EAA4B,IAA5B,CAAP;AACA,WAAK,MAAL,GAAc,CAAC,IAAI,CAAC,MAAL,GAAc,IAAI,CAAC,MAAL,EAAd,GAA8B,CAA/B,IAAoC,IAAI,CAAC,KAAvD;;AACA,UAAI,IAAI,CAAC,IAAL,CAAU,MAAd,EAAsB;AACrB,aAAK,WAAL,GAAmB,KAAnB;AACA,aAAK,EAAL,GAAU,IAAI,CAAC,IAAL,CAAU,KAAV,GAAkB,GAA5B;AACA,YAAI,CAAC,IAAI,CAAC,IAAL,CAAU,IAAf,EAAqB,KAAK,EAAL,GAAU,KAAK,EAAL,GAAU,IAAI,CAAC,MAAL,EAApB;AACrB;AACD;;;kCAGA,I,EACA,O,EACA,Q,EAAiB;AAEjB,WAAK,eAAL,GAAuB,QAAvB;AACA,UAAM,WAAW,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,IAAhB;AAAA,OAA3B,CAApB;AACA,UAAI,GAAG,mBAAW,EAAX,EAAe,WAAf,EAA4B,IAA5B,CAAP;AACA,UAAM,cAAc,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,OAAN;AAAA,OAA3B,CAAvB;AACA,aAAO,GAAG,mBAAW,EAAX,EAAe,cAAf,EAA+B,OAA/B,CAAV;AACA,UAAM,cAAc,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,KAAhB;AAAA,OAA3B,CAAvB;AAPiB,0BASW,KAAK,OAThB;AAAA,UAST,MATS,iBAST,MATS;AAAA,UASD,OATC,iBASD,OATC;;AAWjB,UAAI,QAAJ,EAAc;AACb,aAAK,CAAL,GAAS,QAAQ,CAAC,CAAlB;AACA,aAAK,CAAL,GAAS,QAAQ,CAAC,CAAlB;AACA,OAHD,MAGO;AACN,YAAI,OAAO,CAAC,MAAZ,EAAoB;AACnB,cAAI,cAAJ;;AACA,kBAAQ,OAAO,CAAC,IAAhB;AACC,iBAAK,sBAAY,MAAjB;AACC,sBAAQ,OAAO,CAAC,MAAR,CAAe,WAAvB;AACC,qBAAK,uCAA6B,YAAlC;AACC,gCAAc,GAAG,KAAK,OAAL,CAAa,WAAb,CAAyB,2BAAzB,EAAjB;AACA;;AACD,qBAAK,uCAA6B,aAAlC;AACC,gCAAc,GAAG,KAAK,OAAL,CAAa,WAAb,CAAyB,mCAAzB,EAAjB;AACA;;AACD,qBAAK,uCAA6B,WAAlC;AACC,gCAAc,GAAG,KAAK,OAAL,CAAa,WAAb,CAAyB,uCAAzB,CAChB,cAAc,CAAC,MADC,CAAjB;AAGA;;AACD,qBAAK,uCAA6B,aAAlC;AACA;AACC,gCAAc,GAAG,KAAK,OAAL,CAAa,WAAb,CAAyB,4BAAzB,CAChB,cAAc,CAAC,MADC,CAAjB;AAdF;;AAkBA;;AACD,iBAAK,sBAAY,MAAjB;AACC,4BAAc,GAAG,KAAK,OAAL,CAAa,WAAb,CAAyB,+BAAzB,EAAjB;AACA;;AACD,iBAAK,sBAAY,OAAjB;AACC,4BAAc,GAAG,KAAK,OAAL,CAAa,WAAb,CAAyB,gCAAzB,EAAjB;AACA;AA1BF;;AA4BA,cAAI,cAAJ,EAAoB;AACnB,iBAAK,CAAL,GAAS,cAAc,CAAC,CAAxB;AACA,iBAAK,CAAL,GAAS,cAAc,CAAC,CAAxB;AACA,iBAAK,eAAL,GAAuB;AAAE,eAAC,EAAE,KAAK,CAAV;AAAa,eAAC,EAAE,KAAK;AAArB,aAAvB;AACA;AACD;AACD;;AAED,UAAI,KAAK,CAAL,KAAW,SAAX,IAAwB,KAAK,CAAL,KAAW,SAAvC,EAAkD;AACjD,aAAK,CAAL,GAAS,IAAI,CAAC,MAAL,KAAgB,MAAM,CAAC,KAAhC;AACA,aAAK,CAAL,GAAS,IAAI,CAAC,MAAL,KAAgB,MAAM,CAAC,MAAhC;AACA;;AAED,UAAI,KAAK,CAAL,GAAS,MAAM,CAAC,KAAP,GAAe,KAAK,MAAL,GAAc,CAA1C,EAA6C;AAC5C,aAAK,CAAL,GAAS,KAAK,CAAL,GAAS,KAAK,MAAvB;AACA,OAFD,MAEO,IAAI,KAAK,CAAL,GAAS,KAAK,MAAL,GAAc,CAA3B,EAA8B;AACpC,aAAK,CAAL,GAAS,KAAK,CAAL,GAAS,KAAK,MAAvB;AACA;;AACD,UAAI,KAAK,CAAL,GAAS,MAAM,CAAC,MAAP,GAAgB,KAAK,MAAL,GAAc,CAA3C,EAA8C;AAC7C,aAAK,CAAL,GAAS,KAAK,CAAL,GAAS,KAAK,MAAvB;AACA,OAFD,MAEO,IAAI,KAAK,CAAL,GAAS,KAAK,MAAL,GAAc,CAA3B,EAA8B;AACpC,aAAK,CAAL,GAAS,KAAK,CAAL,GAAS,KAAK,MAAvB;AACA;;AAED,UAAI,IAAI,CAAC,MAAT,EAAiB;AAChB,eAAO,CAAC,YAAR,CAAqB,IAArB,EAA2B;AAAE,WAAC,EAAE,KAAK,CAAV;AAAa,WAAC,EAAE,KAAK;AAArB,SAA3B;AACA;AACD;;;+BAEU,K,EAAgC;AAC1C,UAAM,YAAY,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,KAAhB;AAAA,OAA3B,CAArB;AACA,WAAK,GAAG,mBAAW,EAAX,EAAe,KAAf,EAAsB,YAAtB,CAAR;AAEA,WAAK,KAAL,GAAa,YAAS,KAAK,CAAC,KAAf,CAAb;AACA;;;iCAEY,O,EAAoC;AAChD,UAAM,cAAc,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,OAAhB;AAAA,OAA3B,CAAvB;AACA,aAAO,GAAG,mBAAW,EAAX,EAAe,cAAf,EAA+B,OAA/B,CAAV;AAEA,WAAK,YAAL,GAAoB,CAAC,OAAO,CAAC,MAAR,GAAiB,IAAI,CAAC,MAAL,EAAjB,GAAiC,CAAlC,IAAuC,OAAO,CAAC,KAAnE;;AACA,UAAI,OAAO,CAAC,IAAR,CAAa,MAAjB,EAAyB;AACxB,aAAK,cAAL,GAAsB,KAAtB;AACA,aAAK,EAAL,GAAU,OAAO,CAAC,IAAR,CAAa,KAAb,GAAqB,GAA/B;;AACA,YAAI,CAAC,OAAO,CAAC,IAAR,CAAa,IAAlB,EAAwB;AACvB,eAAK,EAAL,GAAU,KAAK,EAAL,GAAU,IAAI,CAAC,MAAL,EAApB;AACA;AACD;AACD;;;mCAEc,I,EAA8B;AAC5C,UAAM,WAAW,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,IAAhB;AAAA,OAA3B,CAApB;AACA,UAAI,GAAG,mBAAW,EAAX,EAAe,WAAf,EAA4B,IAA5B,CAAP;AAEA,UAAI,YAAJ;;AACA,cAAQ,IAAI,CAAC,SAAb;AACC,aAAK,wBAAc,GAAnB;AACC,sBAAY,GAAG;AAAE,aAAC,EAAE,CAAL;AAAQ,aAAC,EAAE,CAAC;AAAZ,WAAf;AACA;;AACD,aAAK,wBAAc,SAAnB;AACC,sBAAY,GAAG;AAAE,aAAC,EAAE,GAAL;AAAU,aAAC,EAAE,CAAC;AAAd,WAAf;AACA;;AACD,aAAK,wBAAc,KAAnB;AACC,sBAAY,GAAG;AAAE,aAAC,EAAE,CAAL;AAAQ,aAAC,EAAE;AAAX,WAAf;AACA;;AACD,aAAK,wBAAc,YAAnB;AACC,sBAAY,GAAG;AAAE,aAAC,EAAE,GAAL;AAAU,aAAC,EAAE;AAAb,WAAf;AACA;;AACD,aAAK,wBAAc,MAAnB;AACC,sBAAY,GAAG;AAAE,aAAC,EAAE,CAAL;AAAQ,aAAC,EAAE;AAAX,WAAf;AACA;;AACD,aAAK,wBAAc,WAAnB;AACC,sBAAY,GAAG;AAAE,aAAC,EAAE,CAAC,GAAN;AAAW,aAAC,EAAE;AAAd,WAAf;AACA;;AACD,aAAK,wBAAc,IAAnB;AACC,sBAAY,GAAG;AAAE,aAAC,EAAE,CAAC,CAAN;AAAS,aAAC,EAAE;AAAZ,WAAf;AACA;;AACD,aAAK,wBAAc,QAAnB;AACC,sBAAY,GAAG;AAAE,aAAC,EAAE,CAAC,GAAN;AAAW,aAAC,EAAE,CAAC;AAAf,WAAf;AACA;;AACD;AACC,sBAAY,GAAG;AAAE,aAAC,EAAE,CAAL;AAAQ,aAAC,EAAE;AAAX,WAAf;AACA;AA3BF;;AA6BA,UAAI,IAAI,CAAC,QAAT,EAAmB;AAClB,aAAK,EAAL,GAAU,YAAY,CAAC,CAAvB;AACA,aAAK,EAAL,GAAU,YAAY,CAAC,CAAvB;;AACA,YAAI,IAAI,CAAC,MAAT,EAAiB;AAChB,eAAK,EAAL,GAAU,KAAK,EAAL,GAAU,IAAI,CAAC,MAAL,EAApB;AACA,eAAK,EAAL,GAAU,KAAK,EAAL,GAAU,IAAI,CAAC,MAAL,EAApB;AACA;AACD,OAPD,MAOO;AACN,aAAK,EAAL,GAAU,YAAY,CAAC,CAAb,GAAiB,IAAI,CAAC,MAAL,EAAjB,GAAiC,GAA3C;AACA,aAAK,EAAL,GAAU,YAAY,CAAC,CAAb,GAAiB,IAAI,CAAC,MAAL,EAAjB,GAAiC,GAA3C;AACA;;AAED,WAAK,IAAL,GAAY,KAAK,EAAjB;AACA,WAAK,IAAL,GAAY,KAAK,EAAjB;AACA;;;+BAEU,K,EAAgC;AAAA;;AAC1C,UAAM,YAAY,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,KAAhB;AAAA,OAA3B,CAArB;AACA,WAAK,GAAG,mBAAW,EAAX,EAAe,YAAf,EAA6B,KAA7B,CAAR;AACA,UAAM,cAAc,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,KAAhB;AAAA,OAA3B,CAAvB;;AAEA,UAAI,KAAK,CAAC,OAAN,CAAc,KAAK,CAAC,IAApB,CAAJ,EAA+B;AAC9B,YAAI,aAAa,GAChB,KAAK,CAAC,IAAN,CAAW,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,KAAK,CAAC,IAAN,CAAW,MAAtC,CAAX,CADD;AAEA,aAAK,GAAG,mBAAW,EAAX,EAAe,KAAf,EAAsB;AAAE,cAAI,EAAE;AAAR,SAAtB,CAAR;AACA;;AAED,WAAK,KAAL,GAAa,KAAb;;AAEA,UAAI,KAAK,CAAC,IAAN,KAAe,oBAAU,KAAzB,IAAkC,KAAK,CAAC,IAAN,KAAe,oBAAU,MAA/D,EAAuE;AACtE,YAAI,KAAK,CAAC,IAAN,KAAe,oBAAU,MAA7B,EAAqC;AACpC,eAAK,UAAL,GAAkB,KAAK,OAAL,CAAa,YAAb,CAA0B,QAA1B,CACjB,cAAc,CAAC,MADE,CAAlB;AAGA,SAJD,MAIO;AACN,eAAK,UAAL,GAAkB,KAAK,OAAL,CAAa,YAAb,CAA0B,QAA1B,EAAlB;AACA;;AACD,YACC,KAAK,UAAL,CAAgB,IAAhB,KAAyB,KAAzB,IACA,KAAK,UAAL,CAAgB,OAAhB,KAA4B,SAF7B,EAGE;AACD,eAAK,OAAL,CAAa,YAAb,CACE,cADF,CACiB,KAAK,UAAL,CAAgB,OADjC,EAC0C;AACxC,iBAAK,EAAE,KAAK,KAD4B;AAExC,mBAAO,EAAE,KAAK;AAF0B,WAD1C,EAKE,IALF,CAKO,eAAK,EAAG;AACb,iBAAI,CAAC,UAAL,CAAgB,WAAhB,GAA8B,KAA9B;AACA,iBAAI,CAAC,UAAL,CAAgB,MAAhB,GAAyB,IAAzB;AACA,WARF;AASA;AACD;AACD;;;2BAEG;AAAA,2BACuB,KAAK,OAD5B;AAAA,UACG,MADH,kBACG,MADH;AAAA,UACW,OADX,kBACW,OADX;AAGH,UAAI,MAAJ;;AACA,UAAI,KAAK,aAAL,KAAuB,SAA3B,EAAsC;AACrC,cAAM,GAAG,KAAK,aAAd;AACA,OAFD,MAEO;AACN,cAAM,GAAG,KAAK,MAAd;AACA;;AAED,UAAI,YAAJ;;AACA,UAAI,KAAK,aAAL,KAAuB,SAA3B,EAAsC;AACrC,oBAAY,GAAG,KAAK,aAApB;AACA,OAFD,MAEO;AACN,oBAAY,GAAG,KAAK,YAApB;AACA;;AAED,UAAI,UAAJ;;AACA,UAAI,KAAK,KAAL,CAAW,GAAf,EAAoB;AAAA,8BACD,KAAK,KAAL,CAAW,GADV;AAAA,YACb,CADa,mBACb,CADa;AAAA,YACV,CADU,mBACV,CADU;AAAA,YACP,CADO,mBACP,CADO;AAEnB,kBAAU,mBAAY,CAAZ,eAAkB,CAAlB,eAAwB,CAAxB,eAA8B,YAA9B,OAAV;AACA,OAHD,MAGO;AAAA,8BACY,KAAK,KAAL,CAAW,GADvB;AAAA,YACA,CADA,mBACA,CADA;AAAA,YACG,CADH,mBACG,CADH;AAAA,YACM,CADN,mBACM,CADN;AAEN,kBAAU,mBAAY,CAAZ,eAAkB,CAAlB,eAAwB,CAAxB,eAA8B,YAA9B,OAAV;AACA;;AAED,YAAM,CAAC,GAAP,CAAW,SAAX,GAAuB,UAAvB;AACA,YAAM,CAAC,GAAP,CAAW,SAAX;;AAEA,cAAQ,KAAK,KAAL,CAAW,IAAnB;AACC,aAAK,oBAAU,MAAf;AACC,gBAAM,CAAC,GAAP,CAAW,GAAX,CAAe,KAAK,CAApB,EAAuB,KAAK,CAA5B,EAA+B,MAA/B,EAAuC,CAAvC,EAA0C,IAAI,CAAC,EAAL,GAAU,CAApD,EAAuD,KAAvD;AACA;;AAED,aAAK,oBAAU,IAAf;AACC,gBAAM,CAAC,GAAP,CAAW,IAAX,CACC,KAAK,CAAL,GAAS,MADV,EAEC,KAAK,CAAL,GAAS,MAFV,EAGC,MAAM,GAAG,CAHV,EAIC,MAAM,GAAG,CAJV;AAMA;;AAED,aAAK,oBAAU,QAAf;AACC,iBAAO,CAAC,SAAR,CACC,MAAM,CAAC,GADR,EAEC,KAAK,CAAL,GAAS,MAFV,EAGC,KAAK,CAAL,GAAS,MAAM,GAAG,IAHnB,EAIC,MAAM,GAAG,CAJV,EAKC,CALD,EAMC,CAND;AAQA;;AAED,aAAK,oBAAU,OAAf;AACC,iBAAO,CAAC,SAAR,CACC,MAAM,CAAC,GADR,EAEC,KAAK,CAAL,GAAS,MAAM,IAAI,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,GAA8B,GAAlC,CAFhB,EAGC,KAAK,CAAL,GAAS,MAAM,IAAI,OAAO,GAAX,CAHhB,EAIE,MAAM,GAAG,IAAV,IAAmB,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,GAA8B,CAAjD,CAJD,EAKC,KAAK,KAAL,CAAW,OAAX,CAAmB,QALpB,EAMC,CAND;AAQA;;AAED,aAAK,oBAAU,IAAf;AACC,iBAAO,CAAC,SAAR,CACC,MAAM,CAAC,GADR,EAEC,KAAK,CAAL,GAAU,MAAM,GAAG,CAAV,IAAgB,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,GAA8B,CAA9C,CAFV,EAGC,KAAK,CAAL,GAAS,MAAM,IAAK,IAAI,IAAL,GAAa,GAAjB,CAHhB,EAIE,MAAM,GAAG,CAAT,GAAa,IAAd,IAAuB,KAAK,KAAL,CAAW,OAAX,CAAmB,QAAnB,GAA8B,CAArD,CAJD,EAKC,KAAK,KAAL,CAAW,OAAX,CAAmB,QALpB,EAMC,CAND;AAQA;;AAED,aAAK,oBAAU,MAAf;AACA,aAAK,oBAAU,KAAf;AACC,cAAI,KAAK,UAAL,CAAgB,WAApB,EAAiC;AAChC,kBAAM,CAAC,GAAP,CAAW,SAAX,CACC,KAAK,UAAL,CAAgB,WADjB,EAEC,KAAK,CAAL,GAAS,MAFV,EAGC,KAAK,CAAL,GAAS,MAHV,EAIC,MAAM,GAAG,CAJV,EAKE,MAAM,GAAG,CAAV,GAAe,KAAK,UAAL,CAAgB,KALhC;AAOA;;AACD;AA1DF;;AA6DA,YAAM,CAAC,GAAP,CAAW,SAAX;;AAEA,UAAI,KAAK,KAAL,CAAW,MAAX,CAAkB,KAAlB,GAA0B,CAA9B,EAAiC;AAChC,cAAM,CAAC,GAAP,CAAW,WAAX,GAAyB,KAAK,KAAL,CAAW,MAAX,CAAkB,KAA3C;AACA,cAAM,CAAC,GAAP,CAAW,SAAX,GAAuB,KAAK,KAAL,CAAW,MAAX,CAAkB,KAAzC;AACA,cAAM,CAAC,GAAP,CAAW,MAAX;AACA;;AAED,YAAM,CAAC,GAAP,CAAW,IAAX;AACA;;;;;;AA1VF,2B;;;;;;;;;;;;;;;;;;;;AC9BA;;AAWA;;IAMqB,e;;;AACpB,2BAAoB,OAApB,EAA6C;AAAA;;AAAzB;AACnB,SAAK,eAAL,GAAuB,KAAK,eAAL,CAAqB,IAArB,CAA0B,IAA1B,CAAvB;AACA;;;;sCAEc;AACd,UAAM,SAAS,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAN;AAAA,OAA3B,CAAlB;AACA,UAAM,OAAO,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,OAAN;AAAA,OAA3B,CAAhB;AAEA,UAAI,eAAe,GAAG,SAAS,CAAC,MAAV,CAAiB,KAAvC;;AACA,UACC,OAAO,CAAC,MAAR,IACA,OAAO,CAAC,IAAR,KAAiB,sBAAY,MAD7B,IAEA,OAAO,CAAC,MAAR,CAAe,WAAf,KAA+B,uCAA6B,aAH7D,EAIE;AACD,uBAAe,GAAG,KAAK,OAAL,CAAa,WAAb,CAAyB,iBAAzB,EAAlB;AACA;;AACD,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,eAApB,EAAqC,CAAC,EAAtC,EAA0C;AACzC,iBAAS,CAAC,KAAV,CAAgB,IAAhB,CAAqB,IAAI,WAAJ,CAAa,KAAK,OAAlB,CAArB;AACA;AACD;;;sCAEc;AAAA;;AAAA,0BACU,KAAK,OADf;AAAA,UACR,MADQ,iBACR,MADQ;AAAA,UACA,KADA,iBACA,KADA;AAGd,UAAM,aAAa,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,aAAN;AAAA,OAA3B,CAAtB;AACA,UAAM,SAAS,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAN;AAAA,OAA3B,CAAlB;AACA,UAAM,OAAO,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,OAAN;AAAA,OAA3B,CAAhB;AAEA,eAAS,CAAC,KAAV,CAAgB,OAAhB,CAAwB,UAAC,QAAD,EAAW,CAAX,EAAgB;AACvC,YAAI,SAAS,CAAC,IAAV,CAAe,MAAnB,EAA2B;AAC1B,cAAI,EAAE,GAAG,SAAS,CAAC,IAAV,CAAe,KAAf,GAAuB,CAAhC;AACA,kBAAQ,CAAC,CAAT,IAAc,QAAQ,CAAC,EAAT,GAAc,EAA5B;AACA,kBAAQ,CAAC,CAAT,IAAc,QAAQ,CAAC,EAAT,GAAc,EAA5B;AACA;;AAED,YAAI,SAAS,CAAC,OAAV,CAAkB,IAAlB,CAAuB,MAA3B,EAAmC;AAClC,cAAI,QAAQ,CAAC,cAAT,IAA2B,IAA/B,EAAqC;AACpC,gBAAI,QAAQ,CAAC,YAAT,IAAyB,SAAS,CAAC,OAAV,CAAkB,KAA/C,EACC,QAAQ,CAAC,cAAT,GAA0B,KAA1B;AACD,oBAAQ,CAAC,YAAT,IAAyB,QAAQ,CAAC,EAAlC;AACA,WAJD,MAIO;AACN,gBAAI,QAAQ,CAAC,YAAT,IAAyB,SAAS,CAAC,OAAV,CAAkB,IAAlB,CAAuB,WAApD,EACC,QAAQ,CAAC,cAAT,GAA0B,IAA1B;AACD,oBAAQ,CAAC,YAAT,IAAyB,QAAQ,CAAC,EAAlC;AACA;;AACD,cAAI,QAAQ,CAAC,YAAT,GAAwB,CAA5B,EAA+B,QAAQ,CAAC,YAAT,GAAwB,CAAxB;AAC/B;;AAED,YAAI,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,MAAxB,EAAgC;AAC/B,cAAI,QAAQ,CAAC,WAAT,IAAwB,IAA5B,EAAkC;AACjC,gBAAI,QAAQ,CAAC,MAAT,IAAmB,SAAS,CAAC,IAAV,CAAe,KAAtC,EACC,QAAQ,CAAC,WAAT,GAAuB,KAAvB;AACD,oBAAQ,CAAC,MAAT,IAAmB,QAAQ,CAAC,EAA5B;AACA,WAJD,MAIO;AACN,gBAAI,QAAQ,CAAC,MAAT,IAAmB,SAAS,CAAC,IAAV,CAAe,IAAf,CAAoB,QAA3C,EACC,QAAQ,CAAC,WAAT,GAAuB,IAAvB;AACD,oBAAQ,CAAC,MAAT,IAAmB,QAAQ,CAAC,EAA5B;AACA;;AACD,cAAI,QAAQ,CAAC,MAAT,GAAkB,CAAtB,EAAyB,QAAQ,CAAC,MAAT,GAAkB,CAAlB;AACzB;;AAQD,YAAI,OAAJ;;AAEA,YAAI,SAAS,CAAC,IAAV,CAAe,QAAf,IAA2B,QAA/B,EAAyC;AACxC,iBAAO,GAAG;AACT,kBAAM,EAAE,QAAQ,CAAC,MADR;AAET,mBAAO,EAAE,MAAM,CAAC,KAFP;AAGT,iBAAK,EAAE,QAAQ,CAAC,MAHP;AAIT,oBAAQ,EAAE,MAAM,CAAC;AAJR,WAAV;AAMA,SAPD,MAOO;AACN,iBAAO,GAAG;AACT,kBAAM,EAAE,CAAC,QAAQ,CAAC,MADT;AAET,mBAAO,EAAE,MAAM,CAAC,KAAP,GAAe,QAAQ,CAAC,MAFxB;AAGT,iBAAK,EAAE,CAAC,QAAQ,CAAC,MAHR;AAIT,oBAAQ,EAAE,MAAM,CAAC,MAAP,GAAgB,QAAQ,CAAC;AAJ1B,WAAV;AAMA;;AAED,YAAI,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,MAAtB,GAA+B,MAAM,CAAC,KAA1C,EAAiD;AAChD,kBAAQ,CAAC,CAAT,GAAa,OAAO,CAAC,MAArB;AACA,kBAAQ,CAAC,CAAT,GAAa,IAAI,CAAC,MAAL,KAAgB,MAAM,CAAC,MAApC;AACA,SAHD,MAGO,IAAI,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,MAAtB,GAA+B,CAAnC,EAAsC;AAC5C,kBAAQ,CAAC,CAAT,GAAa,OAAO,CAAC,OAArB;AACA,kBAAQ,CAAC,CAAT,GAAa,IAAI,CAAC,MAAL,KAAgB,MAAM,CAAC,MAApC;AACA;;AAED,YAAI,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,MAAtB,GAA+B,MAAM,CAAC,MAA1C,EAAkD;AACjD,kBAAQ,CAAC,CAAT,GAAa,OAAO,CAAC,KAArB;AACA,kBAAQ,CAAC,CAAT,GAAa,IAAI,CAAC,MAAL,KAAgB,MAAM,CAAC,KAApC;AACA,SAHD,MAGO,IAAI,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,MAAtB,GAA+B,CAAnC,EAAsC;AAC5C,kBAAQ,CAAC,CAAT,GAAa,OAAO,CAAC,QAArB;AACA,kBAAQ,CAAC,CAAT,GAAa,IAAI,CAAC,MAAL,KAAgB,MAAM,CAAC,KAApC;AACA;;AAED,gBAAQ,SAAS,CAAC,IAAV,CAAe,QAAvB;AACC,eAAK,QAAL;AACC;AACC,kBAAI,OAAO,CAAC,MAAZ,EAAoB;AACnB,oBAAM,UAAU,GAAG,OAAO,CAAC,IAAR,CAAa,MAAhC;;AACA,wBAAQ,OAAO,CAAC,IAAhB;AACC,uBAAK,sBAAY,MAAjB;AACC,wBACC,KAAI,CAAC,WAAL,CAAiB,QAAQ,CAAC,eAA1B,EAA2C,QAA3C,IACA,UAFD,EAGE;AACD,8BAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAV,GAAe,QAAQ,CAAC,EAAT,GAAc,CAA3C;AACA,8BAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAV,GAAe,QAAQ,CAAC,EAAT,GAAc,CAA3C;AACA;;AACD;;AACD,uBAAK,sBAAY,MAAjB;AACA,uBAAK,sBAAY,OAAjB;AACC;AACC,0BAAM,IAAI,GAAG,OAAO,CAAC,IAAR,CAAa,IAA1B;;AACA,0BAAI,IAAI,KAAK,0BAAgB,MAA7B,EAAqC;AACpC,4BACC,KAAI,CAAC,WAAL,CAAiB,QAAQ,CAAC,eAA1B,EAA2C,QAA3C,IACA,UAFD,EAGE;AACD,kCAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAV,GAAe,QAAQ,CAAC,EAAT,GAAc,CAA3C;AACA,kCAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAV,GAAe,QAAQ,CAAC,EAAT,GAAc,CAA3C;AACA;AACD,uBARD,MAQO,IAAI,IAAI,KAAK,0BAAgB,IAA7B,EAAmC;AACzC,4BAAM,cAAc,GACnB,OAAO,CAAC,IAAR,KAAiB,sBAAY,MAD9B;;AAEA,4BAAM,QAAQ,GAAG,KAAI,CAAC,OAAL,CAAa,WAAb,CAAyB,oBAAzB,CAChB;AAAE,2BAAC,EAAE,QAAQ,CAAC,CAAd;AAAiB,2BAAC,EAAE,QAAQ,CAAC;AAA7B,yBADgB,CAAjB;;AAGA,4BACE,cAAc,IAAI,CAAC,QAApB,IACC,CAAC,cAAD,IAAmB,QAFrB,EAGE;AACD,kCAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAV,GAAe,QAAQ,CAAC,EAAT,GAAc,CAA3C;AACA,kCAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAV,GAAe,QAAQ,CAAC,EAAT,GAAc,CAA3C;AACA;AACD;AACD;AACD;AArCF;AAuCA,eAzCD,MAyCO;AACN,oBAAI,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,MAAtB,GAA+B,MAAM,CAAC,KAA1C,EACC,QAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAxB,CADD,KAEK,IAAI,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,MAAtB,GAA+B,CAAnC,EACJ,QAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAxB;AACD,oBAAI,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,MAAtB,GAA+B,MAAM,CAAC,MAA1C,EACC,QAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAxB,CADD,KAEK,IAAI,QAAQ,CAAC,CAAT,GAAa,QAAQ,CAAC,MAAtB,GAA+B,CAAnC,EACJ,QAAQ,CAAC,EAAT,GAAc,CAAC,QAAQ,CAAC,EAAxB;AACD;AACD;AACD;AAvDF;;AA0DA,YAAI,aAAU,MAAV,EAAkB,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,IAA/C,CAAJ,EAA0D;AACzD,eAAK,CAAC,YAAN,CAAmB,QAAnB;AACA;;AAED,YACC,aAAU,QAAV,EAAoB,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,IAAjD,KACA,aAAU,QAAV,EAAoB,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,IAAjD,CAFD,EAGE;AACD,eAAK,CAAC,cAAN,CAAqB,QAArB;AACA;;AAED,YACC,aAAU,SAAV,EAAqB,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,IAAlD,KACA,aAAU,SAAV,EAAqB,aAAa,CAAC,MAAd,CAAqB,OAArB,CAA6B,IAAlD,CAFD,EAGE;AACD,eAAK,CAAC,eAAN,CAAsB,QAAtB;AACA;;AAED,YAAI,SAAS,CAAC,WAAV,CAAsB,MAAtB,IAAgC,SAAS,CAAC,IAAV,CAAe,OAAf,CAAuB,MAA3D,EAAmE;AAClE,eAAK,IAAI,CAAC,GAAG,CAAC,GAAG,CAAjB,EAAoB,CAAC,GAAG,SAAS,CAAC,KAAV,CAAgB,MAAxC,EAAgD,CAAC,EAAjD,EAAqD;AACpD,gBAAI,IAAI,GAAG,SAAS,CAAC,KAAV,CAAgB,CAAhB,CAAX;AAEA,gBAAI,SAAS,CAAC,WAAV,CAAsB,MAA1B,EACC,KAAI,CAAC,OAAL,CAAa,aAAb,CAA2B,aAA3B,CAAyC,QAAzC,EAAmD,IAAnD;AAED,gBAAI,SAAS,CAAC,IAAV,CAAe,OAAf,CAAuB,MAA3B,EACC,KAAI,CAAC,OAAL,CAAa,aAAb,CAA2B,gBAA3B,CAA4C,QAA5C,EAAsD,IAAtD;AAED,gBAAI,SAAS,CAAC,IAAV,CAAe,MAAnB,EACC,KAAI,CAAC,OAAL,CAAa,aAAb,CAA2B,eAA3B,CAA2C,QAA3C,EAAqD,IAArD;AACD;AACD;AACD,OAnKD;AAoKA;;;iCAGA,E,EACA,E,EAAU;AAEV,UAAM,SAAS,GAAG,EAAE,CAAC,CAAH,GAAO,EAAE,CAAC,CAA5B;AACA,UAAM,SAAS,GAAG,EAAE,CAAC,CAAH,GAAO,EAAE,CAAC,CAA5B;AACA,UAAM,QAAQ,GAAG,IAAI,CAAC,IAAL,CAAU,SAAS,GAAG,SAAZ,GAAwB,SAAS,GAAG,SAA9C,CAAjB;AACA,aAAO;AAAE,gBAAQ,EAAR,QAAF;AAAY,iBAAS,EAAT,SAAZ;AAAuB,iBAAS,EAAT;AAAvB,OAAP;AACA;;;gCAEW,E,EAAY,E,EAAU;AACjC,aAAO,KAAK,YAAL,CAAkB,EAAlB,EAAsB,EAAtB,EAA0B,QAAjC;AACA;;;oCAEY;AAAA,2BACc,KAAK,OADnB;AAAA,UACN,MADM,kBACN,MADM;AAAA,UACE,OADF,kBACE,OADF;AAGZ,UAAM,SAAS,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAN;AAAA,OAA3B,CAAlB;AACA,UAAM,OAAO,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,OAAN;AAAA,OAA3B,CAAhB;AAEA,YAAM,CAAC,GAAP,CAAW,SAAX,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,MAAM,CAAC,KAAlC,EAAyC,MAAM,CAAC,MAAhD;AACA,aAAO,CAAC,eAAR;AAEA,eAAS,CAAC,KAAV,CAAgB,OAAhB,CAAwB,UAAC,QAAD,EAAuB;AAC9C,gBAAQ,CAAC,IAAT;AACA,OAFD;AAIA,UAAI,OAAO,CAAC,MAAR,IAAkB,OAAO,CAAC,IAAR,CAAa,MAAnC,EACC,KAAK,OAAL,CAAa,WAAb,CAAyB,WAAzB;AACD;;;qCAEa;AACb,UAAM,SAAS,GAAG,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAN;AAAA,OAA3B,CAAlB;AACA,eAAS,CAAC,KAAV,GAAkB,EAAlB;AACA;;;uCAEe;AACf,0BAAoB,CAAC,KAAK,OAAL,CAAa,aAAd,CAApB;AACA,WAAK,cAAL;AACA,WAAK,OAAL,CAAa,WAAb;AACA,WAAK,OAAL,CAAa,KAAb;AACA;;;;;;AA5OF,kC;;;;;;;;;;;;;;;;;;;;ACjBA;;AAaA;;IAEqB,gB;;;AAgBpB,4BAAY,MAAZ,EAAwB;AAAA;;AANxB,wBAAe,IAAI,2BAAJ,EAAf;AAEA,kBAAS,KAAT;AAKC,SAAK,cAAL,GAAsB,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAK,cAAL,CAAoB,MAApB;AACA,SAAK,aAAL,GAAqB,IAAI,gBAAJ,CAAkB,IAAlB,CAArB;AACA,SAAK,KAAL,GAAa,IAAI,QAAJ,CAAU,IAAV,CAAb;AACA,SAAK,OAAL,GAAe,IAAI,UAAJ,CAAY,KAAK,YAAjB,EAA+B,KAAK,MAApC,EAA4C,IAA5C,CAAf;AACA,SAAK,OAAL,GAAe,IAAI,kBAAJ,CAAoB,IAApB,CAAf;AACA,SAAK,WAAL,GAAmB,IAAI,cAAJ,CAAgB,IAAhB,CAAnB;AACA;;;;iCAEe,Q,EAAgC;AAC/C,aAAO,QAAQ,CAAC,KAAK,MAAN,CAAf;AACA;;;kCAEa,M,EAAiC;AAC9C,WAAK,MAAL,GAAc,cAAU,kBAAM,KAAK,MAAX,CAAV,EAA+B,MAA/B,CAAd;AACA;;;mCAEc,M,EAAY;AAC1B,UAAI,YAAY,GAAY,cAAW,EAAX,EAAe,qBAAf,EAAmC,MAAnC,CAA5B;;AACA,WAAK,MAAL,GAAc,YAAd;AACA;;;+BAEU,a,EAAgC;AAC1C,WAAK,MAAL,GAAc;AACb,eAAO,EAAE,aADI;AAEb,aAAK,EAAE,aAAa,CAAC,WAFR;AAGb,cAAM,EAAE,aAAa,CAAC;AAHT,OAAd;AAKA;;;4BAEI;AACJ,WAAK,aAAL,CAAmB,mBAAnB;AACA,WAAK,OAAL,CAAa,KAAb;AACA;;;8BAEM;AACN,WAAK,eAAL;AACA,WAAK,aAAL,CAAmB,mBAAnB;AACA,0BAAoB,CAAC,KAAK,aAAN,CAApB;AACA,WAAK,WAAL;AACA;;;sCAEc;AACd,YAAM,CAAC,mBAAP,CAA2B,QAA3B,EAAqC,KAAK,cAA1C;AACA;;;iCAES;AACT,UAAM,UAAU,GAAG,MAAM,CAAC,gBAA1B;;AAEA,UAAI,KAAK,MAAL,CAAY,aAAZ,IAA6B,UAAU,GAAG,CAA9C,EAAiD;AAChD,aAAK,MAAL,CAAY,OAAZ,GAAsB,UAAtB;AAEA,aAAK,MAAL,CAAY,KAAZ,GAAoB,KAAK,MAAL,CAAY,OAAZ,CAAoB,WAApB,GAAkC,KAAK,MAAL,CAAY,OAAlE;AACA,aAAK,MAAL,CAAY,MAAZ,GACC,KAAK,MAAL,CAAY,OAAZ,CAAoB,YAApB,GAAmC,KAAK,MAAL,CAAY,OADhD;AAGA,aAAK,MAAL,GAAc,IAAd;AAEA,YAAM,MAAM,GAAG,KAAK,YAAL,CAAkB,WAAC;AAAA,iBAAI,CAAJ;AAAA,SAAnB,CAAf;AAEA,aAAK,aAAL,CAAmB;AAClB,uBAAa,EAAE;AACd,iBAAK,EAAE;AACN,oBAAM,EAAE;AACP,wBAAQ,EAAE,MAAM,CAAC,aAAP,CAAqB,KAArB,CAA2B,MAA3B,CAAkC,QAAlC,GAA6C,UADhD;AAEP,oBAAI,EAAE,MAAM,CAAC,aAAP,CAAqB,KAArB,CAA2B,MAA3B,CAAkC,IAAlC,GAAyC;AAFxC,eADF;AAKN,kBAAI,EAAE;AACL,wBAAQ,EAAE,MAAM,CAAC,aAAP,CAAqB,KAArB,CAA2B,IAA3B,CAAgC,QAAhC,GAA2C;AADhD,eALA;AAQN,qBAAO,EAAE;AACR,wBAAQ,EAAE,MAAM,CAAC,aAAP,CAAqB,KAArB,CAA2B,OAA3B,CAAmC,QAAnC,GAA8C;AADhD;AARH;AADO,WADG;AAelB,mBAAS,EAAE;AACV,uBAAW,EAAE;AACZ,sBAAQ,EAAE,MAAM,CAAC,SAAP,CAAiB,WAAjB,CAA6B,QAA7B,GAAwC,UADtC;AAEZ,mBAAK,EAAE,MAAM,CAAC,SAAP,CAAiB,WAAjB,CAA6B,KAA7B,GAAqC;AAFhC,aADH;AAKV,gBAAI,EAAE;AACL,mBAAK,EAAE,MAAM,CAAC,SAAP,CAAiB,IAAjB,CAAsB,KAAtB,GAA8B;AADhC,aALI;AAQV,gBAAI,EAAE;AACL,mBAAK,EAAE,MAAM,CAAC,SAAP,CAAiB,IAAjB,CAAsB,KAAtB,GAA8B,UADhC;AAEL,kBAAI,EAAE;AACL,qBAAK,EAAE,MAAM,CAAC,SAAP,CAAiB,IAAjB,CAAsB,IAAtB,CAA2B,KAA3B,GAAmC;AADrC;AAFD;AARI;AAfO,SAAnB;AA+BA,OA1CD,MA0CO;AACN,aAAK,MAAL,CAAY,OAAZ,GAAsB,CAAtB;AACA,aAAK,MAAL,GAAc,KAAd;AACA;AACD;;;iCAES;AAAA,UACH,MADG,GACQ,IADR,CACH,MADG;AAGT,YAAM,CAAC,GAAP,GAAa,MAAM,CAAC,OAAP,CAAe,UAAf,CAA0B,IAA1B,CAAb;AACA;;;iCAES;AAAA,UACH,MADG,GACQ,IADR,CACH,MADG;AAGT,YAAM,CAAC,OAAP,CAAe,KAAf,GAAuB,MAAM,CAAC,KAA9B;AACA,YAAM,CAAC,OAAP,CAAe,MAAf,GAAwB,MAAM,CAAC,MAA/B;;AAEA,UAAI,KAAK,MAAL,IAAe,KAAK,MAAL,CAAY,aAAZ,CAA0B,MAA1B,CAAiC,MAApD,EAA4D;AAC3D,cAAM,CAAC,gBAAP,CAAwB,QAAxB,EAAkC,KAAK,cAAvC;AACA;AACD;;;kCAEU;AAAA,UACJ,MADI,GACO,IADP,CACJ,MADI;;AAEV,UAAI,MAAM,IAAI,MAAM,CAAC,GAArB,EAA0B;AACzB,YAAI;AACH,gBAAM,CAAC,GAAP,CAAW,QAAX,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,MAAM,CAAC,KAAjC,EAAwC,MAAM,CAAC,MAA/C;AACA,SAFD,CAEE,OAAO,CAAP,EAAU;AACX,iBAAO,CAAC,IAAR,CAAa,CAAb;AACA;AACD;AACD;;;kCAEU;AAAA,UACJ,MADI,GACO,IADP,CACJ,MADI;;AAEV,UAAI,MAAM,IAAI,MAAM,CAAC,GAArB,EAA0B;AACzB,YAAI;AACH,gBAAM,CAAC,GAAP,CAAW,SAAX,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,MAAM,CAAC,KAAlC,EAAyC,MAAM,CAAC,MAAhD;AACA,SAFD,CAEE,OAAO,CAAP,EAAU;AACX,iBAAO,CAAC,IAAR,CAAa,CAAb;AACA;AACD;AACD;;;qCAEoB;AAAA,UACd,MADc,GACe,IADf,CACd,MADc;AAAA,UACN,OADM,GACe,IADf,CACN,OADM;AAAA,UACG,OADH,GACe,IADf,CACG,OADH;AAGpB,YAAM,CAAC,KAAP,GAAe,MAAM,CAAC,OAAP,CAAe,WAA9B;AACA,YAAM,CAAC,MAAP,GAAgB,MAAM,CAAC,OAAP,CAAe,YAA/B;;AAEA,UAAI,KAAK,MAAT,EAAiB;AAChB,cAAM,CAAC,KAAP,IAAgB,MAAM,CAAC,OAAvB;AACA,cAAM,CAAC,MAAP,IAAiB,MAAM,CAAC,OAAxB;AACA;;AAED,YAAM,CAAC,OAAP,CAAe,KAAf,GAAuB,MAAM,CAAC,KAA9B;AACA,YAAM,CAAC,OAAP,CAAe,MAAf,GAAwB,MAAM,CAAC,MAA/B;;AAEA,UAAI,CAAC,KAAK,MAAL,CAAY,SAAZ,CAAsB,IAAtB,CAA2B,MAA5B,IAAsC,KAAK,MAAL,CAAY,OAAZ,CAAoB,MAA9D,EAAsE;AACrE,eAAO,CAAC,cAAR;AACA,aAAK,WAAL,CACE,UADF,CACa,KAAK,YAAL,CAAkB,WAAC;AAAA,iBAAI,CAAC,CAAC,OAAN;AAAA,SAAnB,CADb,EAEE,IAFF,CAEO,YAAK;AACV,iBAAO,CAAC,eAAR;AACA,iBAAO,CAAC,aAAR;AAEA,SANF;AAOA,OATD,MASO;AACN,eAAO,CAAC,oBAAR;AACA;AACD;;;;;;AAnLF,mC;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICYa,W;;;AAoBZ,uBAAoB,OAApB,EAA6C;AAAA;;AAAzB;AAZZ,6BAA4B,CAA5B;AAIA,uBAAc,KAAd;AACA,2BAAkB,CAAC,CAAE,MAAc,CAAC,QAAD,CAAnC;AAEA,wBAAe,GAAf;AAMP,SAAK,qBAAL,GAA6B,KAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC,CAA7B;AACA;;;;+BAEU,O,EAA2B;AAAA;;AACrC,WAAK,OAAL,GAAe,OAAf;AAEA,UAAI,CAAC,OAAO,CAAC,MAAb,EAAqB,OAAO,OAAO,CAAC,OAAR,EAAP;;AACrB,UAAI,CAAC,KAAK,WAAV,EAAuB;AACtB,eAAO,KAAK,qBAAL,GAA6B,IAA7B,CAAkC,WAAC,EAAG;AAC5C,eAAI,CAAC,WAAL,GAAmB,IAAnB;AACA,SAFM,CAAP;AAGA,OAJD,MAIO;AACN,eAAO,IAAI,OAAJ,CAAkB,iBAAO,EAAG;AAClC,cAAI,KAAI,CAAC,aAAT,EAAwB,YAAY,CAAC,KAAI,CAAC,aAAN,CAAZ;AACxB,eAAI,CAAC,aAAL,GAAqB,UAAU,CAAC,YAAK;AACpC,iBAAI,CAAC,qBAAL,GAA6B,IAA7B,CAAkC,WAAC,EAAG;AACrC,qBAAO;AACP,aAFD;AAGA,WAJ8B,EAI5B,KAAI,CAAC,YAJuB,CAA/B;AAKA,SAPM,CAAP;AAQA;AACD;;;wCAEgB;AAChB,UAAI,CAAC,KAAK,WAAV,EAAuB,OAAO,CAAP;AACvB,aAAO,KAAK,UAAL,CAAgB,MAAvB;AACA;;;0CAEqB,M,EAAe;AAAA;;AACpC,YAAM,GAAG,MAAM,IAAI,KAAK,OAAL,CAAa,GAAhC;AACA,UAAM,sBAAsB,GAC3B,KAAK,OAAL,CAAa,MAAb,CAAoB,KAApB,KAA8B,KAAK,eAAnC,IACA,KAAK,OAAL,CAAa,MAAb,CAAoB,MAApB,KAA+B,KAAK,gBAFrC;AAGA,UAAI,KAAK,UAAL,IAAmB,KAAK,UAAL,CAAgB,MAAnC,IAA6C,sBAAjD,EACC,OAAO,OAAO,CAAC,OAAR,CAAgB,KAAK,UAArB,CAAP;AACD,aAAO,KAAK,YAAL,CAAkB,MAAlB,EAA0B,IAA1B,CAA+B,qBAAW,EAAG;AACnD,cAAI,CAAC,WAAL,GAAmB,WAAnB;AACA,cAAI,CAAC,YAAL,GACC,QAAQ,CAAC,MAAI,CAAC,WAAL,CAAiB,GAAjB,CAAqB,YAArB,CAAkC,OAAlC,CAAD,CAAR,GACA,MAAI,CAAC,OAAL,CAAa,KAFd;AAGA,cAAI,CAAC,aAAL,GACC,QAAQ,CAAC,MAAI,CAAC,WAAL,CAAiB,GAAjB,CAAqB,YAArB,CAAkC,QAAlC,CAAD,CAAR,GACA,MAAI,CAAC,OAAL,CAAa,KAFd;AAGA,cAAI,CAAC,cAAL,GACC,MAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,KAApB,GAA4B,CAA5B,GAAgC,MAAI,CAAC,YAAL,GAAoB,CADrD;AAEA,cAAI,CAAC,cAAL,GACC,MAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,MAApB,GAA6B,CAA7B,GAAiC,MAAI,CAAC,aAAL,GAAqB,CADvD;;AAEA,YAAI,MAAI,CAAC,WAAL,CAAiB,KAAjB,CAAuB,MAA3B,EAAmC;AAClC,gBAAI,CAAC,iBAAL,GAAyB,MAAI,CAAC,WAAL,CAAiB,KAAjB,CAAuB,CAAvB,EAA0B,cAA1B,EAAzB;AACA;;AACD,cAAI,CAAC,UAAL,GAAkB,EAAlB;;AAEA,cAAI,CAAC,WAAL,CAAiB,KAAjB,CAAuB,OAAvB,CAA+B,cAAI,EAAG;AACrC,cAAM,UAAU,GAAG,IAAI,CAAC,WAAL,CAAiB,aAApC;;AACA,eAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,UAApB,EAAgC,CAAC,EAAjC,EAAqC;AACpC,gBAAI,KAAK,GAA6B;AAAE,eAAC,EAAE,CAAL;AAAQ,eAAC,EAAE;AAAX,aAAtC;AAEA,gBAAM,OAAO,GAAG,IAAI,CAAC,WAAL,CAAiB,OAAjB,CAAyB,CAAzB,CAAhB;;AACA,oBAAQ,OAAO,CAAC,WAAhB;AACC,mBAAK,UAAU,CAAC,eAAhB;AACA,mBAAK,UAAU,CAAC,yBAAhB;AACA,mBAAK,UAAU,CAAC,gCAAhB;AACA,mBAAK,UAAU,CAAC,6BAAhB;AACA,mBAAK,UAAU,CAAC,oCAAhB;AACA,mBAAK,UAAU,CAAC,kBAAhB;AACA,mBAAK,UAAU,CAAC,kBAAhB;AACC,qBAAK,CAAC,CAAN,GAAW,OAAwC,CAAC,CAApD;AACA,qBAAK,CAAC,CAAN,GAAW,OAAwC,CAAC,CAApD;;AAED,mBAAK,UAAU,CAAC,6BAAhB;AACC,qBAAK,CAAC,CAAN,GAAW,OAAyC,CAAC,CAArD;AACA;;AAED,mBAAK,UAAU,CAAC,2BAAhB;AACC,qBAAK,CAAC,CAAN,GAAW,OAAuC,CAAC,CAAnD;AACA;;AAED,mBAAK,UAAU,CAAC,eAAhB;AACA,mBAAK,UAAU,CAAC,yBAAhB;AACA,mBAAK,UAAU,CAAC,gCAAhB;AACA,mBAAK,UAAU,CAAC,6BAAhB;AACA,mBAAK,UAAU,CAAC,oCAAhB;AACA,mBAAK,UAAU,CAAC,kBAAhB;AACA,mBAAK,UAAU,CAAC,kBAAhB;AACC,qBAAK,CAAC,CAAN,GAAW,OAAwC,CAAC,CAApD;AACA,qBAAK,CAAC,CAAN,GAAW,OAAwC,CAAC,CAApD;;AAED,mBAAK,UAAU,CAAC,6BAAhB;AACC,qBAAK,CAAC,CAAN,GAAW,OAAyC,CAAC,CAArD;AACA;;AAED,mBAAK,UAAU,CAAC,2BAAhB;AACC,qBAAK,CAAC,CAAN,GAAW,OAAuC,CAAC,CAAnD;AACA;;AAED,mBAAK,UAAU,CAAC,eAAhB;AACA,mBAAK,UAAU,CAAC,iBAAhB;AACA;AACC;AAxCF;;AA2CA,kBAAI,CAAC,UAAL,CAAgB,IAAhB,CAAqB,CACpB,KAAK,CAAC,CAAN,GAAU,MAAI,CAAC,OAAL,CAAa,KAAvB,GAA+B,MAAI,CAAC,cADhB,EAEpB,KAAK,CAAC,CAAN,GAAU,MAAI,CAAC,OAAL,CAAa,KAAvB,GAA+B,MAAI,CAAC,cAFhB,CAArB;AAIA;AACD,SAtDD;;AAwDA,cAAI,CAAC,eAAL,GAAuB,MAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,KAA3C;AACA,cAAI,CAAC,gBAAL,GAAwB,MAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,MAA5C;;AAEA,cAAI,CAAC,YAAL;;AAEA,eAAO,MAAI,CAAC,UAAZ;AACA,OA/EM,CAAP;AAgFA;;;iCAEoB,M,EAAc;AAClC,UACC,CAAC,KAAK,WAAN,IACA,CAAC,KAAK,WAAL,CAAiB,KADlB,IAEA,CAAC,KAAK,WAAL,CAAiB,KAAjB,CAAuB,MAFxB,IAGA,CAAC,KAAK,WAAL,CAAiB,GAJnB,EAKE;AACD,eAAO,KAAK,OAAL,CAAa,YAAb,CAA0B,aAA1B,CAAwC,MAAxC,EAAgD,IAAhD,CAAqD,cAAI,EAAG;AAClE,iBAAO;AAEN,iBAAK,EAAE,CAAC,IAAI,CAAC,GAAL,CAAS,WAAT,CAAqB,oBAArB,CAA0C,MAA1C,EAAkD,CAAlD,CAAD,CAFD;AAGN,eAAG,EAAE,IAAI,CAAC,GAAL,CAAS,WAAT,CAAqB,oBAArB,CAA0C,KAA1C,EAAiD,CAAjD;AAHC,WAAP;AAKA,SANM,CAAP;AAOA,OAbD,MAaO;AACN,eAAO,OAAO,CAAC,OAAR,CAAgB,KAAK,WAArB,CAAP;AACA;AACD;;;kDAE0B;AAC1B,UAAI,CAAC,KAAK,WAAV,EAAuB,MAAM,IAAI,KAAJ,2BAAN;;AADG,iDAEX,KAAK,UAAL,CACd,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,KAAK,UAAL,CAAgB,MAA3C,CADc,CAFW;AAAA,UAEnB,CAFmB;AAAA,UAEhB,CAFgB;;AAK1B,aAAO;AACN,SAAC,EAAD,CADM;AAEN,SAAC,EAAD;AAFM,OAAP;AAIA;;;0DAEkC;AAClC,UAAI,CAAC,KAAK,WAAV,EAAuB,MAAM,IAAI,KAAJ,2BAAN;AACvB,UAAM,KAAK,GAAG,KAAK,WAAL,CAAiB,KAAjB,CAAuB,CAAvB,EAA0B,gBAA1B,CACb,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,KAAK,iBAAhC,IAAqD,CADxC,CAAd;AAGA,aAAO;AACN,SAAC,EAAE,KAAK,CAAC,CAAN,GAAU,KAAK,OAAL,CAAa,KAAvB,GAA+B,KAAK,cADjC;AAEN,SAAC,EAAE,KAAK,CAAC,CAAN,GAAU,KAAK,OAAL,CAAa,KAAvB,GAA+B,KAAK;AAFjC,OAAP;AAIA;;;sDAE8B;AAC9B,UAAI,CAAC,KAAK,WAAV,EAAuB,MAAM,IAAI,KAAJ,2BAAN;AACvB,UAAM,KAAK,GAAG;AACb,SAAC,EAAE,IAAI,CAAC,MAAL,KAAgB,KAAK,OAAL,CAAa,MAAb,CAAoB,KAD1B;AAEb,SAAC,EAAE,IAAI,CAAC,MAAL,KAAgB,KAAK,OAAL,CAAa,MAAb,CAAoB;AAF1B,OAAd;AAIA,aAAO,KAAK,oBAAL,CAA0B,KAA1B,IACJ,KADI,GAEJ,KAAK,+BAAL,EAFH;AAGA;;;uDAE+B;AAC/B,UAAI,CAAC,KAAK,WAAV,EAAuB,MAAM,IAAI,KAAJ,2BAAN;AACvB,UAAM,KAAK,GAAG;AACb,SAAC,EAAE,IAAI,CAAC,MAAL,KAAgB,KAAK,OAAL,CAAa,MAAb,CAAoB,KAD1B;AAEb,SAAC,EAAE,IAAI,CAAC,MAAL,KAAgB,KAAK,OAAL,CAAa,MAAb,CAAoB;AAF1B,OAAd;AAIA,aAAO,KAAK,oBAAL,CAA0B,KAA1B,IACJ,KAAK,gCAAL,EADI,GAEJ,KAFH;AAGA;;;yCAEoB,K,EAAa;AACjC,UAAI,KAAK,eAAL,IAAwB,KAAK,WAAjC,EAA8C;AAC7C,eAAO,KAAK,OAAL,CAAa,MAAb,CAAoB,GAApB,CAAwB,aAAxB,CACN,KAAK,WADC,EAEN,KAAK,CAAC,CAFA,EAGN,KAAK,CAAC,CAHA,CAAP;AAKA,OAND,MAMO;AACN,YAAI,MAAM,GAAG,KAAb;;AAIA,aACC,IAAI,CAAC,GAAG,CAAR,EAAW,CAAC,GAAG,KAAK,UAAL,CAAgB,MAAhB,GAAyB,CADzC,EAEC,CAAC,GAAG,KAAK,UAAL,CAAgB,MAFrB,EAGC,CAAC,GAAG,CAAC,EAHN,EAIE;AACD,cAAM,EAAE,GAAG,KAAK,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,CAAX;AAAA,cACC,EAAE,GAAG,KAAK,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,CADN;AAEA,cAAM,EAAE,GAAG,KAAK,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,CAAX;AAAA,cACC,EAAE,GAAG,KAAK,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,CADN;AAEA,cAAM,SAAS,GACd,EAAE,GAAG,KAAK,CAAC,CAAX,IAAgB,EAAE,GAAG,KAAK,CAAC,CAA3B,IACA,KAAK,CAAC,CAAN,GAAW,CAAC,EAAE,GAAG,EAAN,KAAa,KAAK,CAAC,CAAN,GAAU,EAAvB,CAAD,IAAgC,EAAE,GAAG,EAArC,IAA2C,EAFtD;AAGA,cAAI,SAAJ,EAAe,MAAM,GAAG,CAAC,MAAV;AACf;;AACD,eAAO,MAAP;AACA;AACD;;;iDAE4B,K,EAAa;AACzC,UAAI,CAAC,KAAK,WAAV,EAAuB,MAAM,IAAI,KAAJ,2BAAN;;AADkB,4CAE1B,KAAK,UAAL,CAAgB,KAAK,GAAG,KAAK,UAAL,CAAgB,MAAxC,CAF0B;AAAA,UAElC,CAFkC;AAAA,UAE/B,CAF+B;;AAGzC,aAAO;AAAE,SAAC,EAAD,CAAF;AAAK,SAAC,EAAD;AAAL,OAAP;AACA;;;4DAEuC,K,EAAa;AACpD,UAAI,CAAC,KAAK,WAAV,EAAuB,MAAM,IAAI,KAAJ,2BAAN;AACvB,UAAM,KAAK,GAAG,KAAK,WAAL,CAAiB,KAAjB,CAAuB,CAAvB,EAA0B,gBAA1B,CACZ,KAAK,iBAAL,GACA,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,SAAF,CAAY,MAAZ,CAAmB,KAAvB;AAAA,OAA3B,CADD,GAEC,KAHY,CAAd;AAKA,aAAO;AACN,SAAC,EAAE,KAAK,CAAC,CAAN,GAAU,KAAK,OAAL,CAAa,KAAvB,GAA+B,KAAK,cADjC;AAEN,SAAC,EAAE,KAAK,CAAC,CAAN,GAAU,KAAK,OAAL,CAAa,KAAvB,GAA+B,KAAK;AAFjC,OAAP;AAIA;;;kCAEU;AACV,UAAM,OAAO,GAAG,KAAK,OAAL,CAAa,MAAb,CAAoB,GAApC;;AACA,UAAI,CAAC,KAAK,eAAV,EAA2B;AAC1B,YAAI,CAAC,KAAK,WAAV,EAAuB;AACvB,eAAO,CAAC,SAAR;AACA,eAAO,CAAC,MAAR,CAAe,KAAK,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,CAAf,EAAsC,KAAK,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,CAAtC;AACA,aAAK,UAAL,CAAgB,OAAhB,CAAwB,gBAAS,CAAT,EAAc;AAAA;AAAA,cAAZ,CAAY;AAAA,cAAT,CAAS;;AACrC,cAAI,CAAC,GAAG,CAAR,EAAW,OAAO,CAAC,MAAR,CAAe,CAAf,EAAkB,CAAlB;AACX,SAFD;AAGA,eAAO,CAAC,SAAR;AACA;;AACD,aAAO,CAAC,WAAR,GAAsB,KAAK,OAAL,CAAa,IAAb,CAAkB,MAAlB,CAAyB,KAA/C;AACA,aAAO,CAAC,SAAR,GAAoB,KAAK,OAAL,CAAa,IAAb,CAAkB,MAAlB,CAAyB,KAA7C;AACA,WAAK,WAAL,GAAmB,OAAO,CAAC,MAAR,CAAe,KAAK,WAApB,CAAnB,GAAsD,OAAO,CAAC,MAAR,EAAtD;AACA;;;mCAEW;AAAA;;AACX,UAAI,CAAC,KAAK,eAAV,EAA2B;AAC3B,WAAK,WAAL,GAAmB,IAAI,MAAJ,EAAnB;AACA,WAAK,WAAL,CAAiB,MAAjB,CAAwB,KAAK,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,CAAxB,EAA+C,KAAK,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,CAA/C;AACA,WAAK,UAAL,CAAgB,OAAhB,CAAwB,iBAAS,CAAT,EAAc;AAAA;AAAA,YAAZ,CAAY;AAAA,YAAT,CAAS;;AACrC,YAAI,CAAC,GAAG,CAAR,EAAW,MAAI,CAAC,WAAL,CAAiB,MAAjB,CAAwB,CAAxB,EAA2B,CAA3B;AACX,OAFD;AAGA,WAAK,WAAL,CAAiB,SAAjB;AACA;;;;;;AAlRF,kC;;;;;;;;;;;;;;;;ACLa,mBAAiC,aAAG,EAAG;AACnD,MAAI,cAAc,GAAG,kCAArB;AACA,KAAG,GAAG,GAAG,CAAC,OAAJ,CAAY,cAAZ,EAA4B,UAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAe;AAChD,WAAO,CAAC,GAAG,CAAJ,GAAQ,CAAR,GAAY,CAAZ,GAAgB,CAAhB,GAAoB,CAA3B;AACA,GAFK,CAAN;AAGA,MAAI,MAAM,GAAG,4CAA4C,IAA5C,CAAiD,GAAjD,CAAb;AACA,SAAO,MAAM,GACV;AACA,KAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CADX;AAEA,KAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CAFX;AAGA,KAAC,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ;AAHX,GADU,GAMV,IANH;AAOA,CAbY;;AAeA,gBAA8D,UAC1E,MAD0E,EAE1E,GAF0E,EAG1E,GAH0E,EAIvE;AACH,SAAO,IAAI,CAAC,GAAL,CAAS,IAAI,CAAC,GAAL,CAAS,MAAT,EAAiB,GAAjB,CAAT,EAAgC,GAAhC,CAAP;AACA,CANY;;AAQb,SAAgB,SAAhB,CAA0B,KAA1B,EAAsC,KAAtC,EAAgD;AAC/C,SAAO,KAAK,CAAC,OAAN,CAAc,KAAd,IAAuB,CAAC,CAA/B;AACA;;AAFD;;AAOA,SAAgB,OAAhB,CAA2B,KAA3B,EAAqC,aAArC,EAA2D;AAC1D,MAAI,KAAK,CAAC,OAAN,CAAc,aAAd,CAAJ,EAAkC,OAAO,SAAS,CAAC,KAAD,EAAQ,aAAR,CAAhB;AAClC,SAAO,aAAa,KAAK,KAAzB;AACA;;AAHD;;AAKa,qBAAa,UAAC,WAAD,EAAwC;AAAA,oCAAlB,OAAkB;AAAlB,WAAkB;AAAA;;AACjE,wBAAqB,OAArB,eAA8B;AAAzB,QAAM,MAAM,GAAI,OAAJ,IAAZ;AACJ,QAAI,MAAM,KAAK,SAAX,IAAwB,MAAM,KAAK,IAAvC,EAA6C;;AAC7C,QAAI,YAAY,WAAU,MAAV,CAAhB;;AACA,QAAI,YAAY,KAAK,QAArB,EAA+B;AAC9B,UAAM,aAAa,GAAG,KAAK,CAAC,OAAN,CAAc,MAAd,CAAtB;;AACA,UAAI,aAAJ,EAAmB;AAClB,YACC,QAAO,WAAP,MAAuB,QAAvB,IACA,CAAC,WADD,IAEA,CAAC,KAAK,CAAC,OAAN,CAAc,WAAd,CAHF,EAKC,WAAW,GAAG,EAAd;AACD,OAPD,MAOO;AACN,YACC,QAAO,WAAP,MAAuB,QAAvB,IACA,CAAC,WADD,IAEA,KAAK,CAAC,OAAN,CAAc,WAAd,CAHD,EAKC,WAAW,GAAG,EAAd;AACD;;AAhB6B,iCAiBnB,GAjBmB;AAkB7B,YAAI,GAAG,KAAK,WAAZ,EAAyB;AACzB,YAAM,KAAK,GAAG,MAAM,CAAC,GAAD,CAApB;AACA,YAAM,QAAQ,GAAG,QAAO,KAAP,MAAiB,QAAlC;;AACA,YAAI,QAAQ,IAAI,KAAK,CAAC,OAAN,CAAc,KAAd,CAAhB,EAAsC;AACrC,qBAAW,CAAC,GAAD,CAAX,GAAmB,KAAK,CAAC,GAAN,CAAU,WAAC;AAAA,mBAAI,mBAAW,WAAW,CAAC,GAAD,CAAtB,EAA6B,CAA7B,CAAJ;AAAA,WAAX,CAAnB;AACA,SAFD,MAEO,IAAI,QAAJ,EAAc;AACpB,qBAAW,CAAC,GAAD,CAAX,GAAmB,mBAAW,WAAW,CAAC,GAAD,CAAtB,EAA6B,KAA7B,CAAnB;AACA,SAFM,MAEA;AACN,qBAAW,CAAC,GAAD,CAAX,GAAmB,mBAAW,WAAW,CAAC,GAAD,CAAtB,EAA6B,KAA7B,CAAnB;AACA;AA3B4B;;AAiB9B,WAAK,IAAM,GAAX,IAAkB,MAAlB,EAA0B;AAAA,yBAAf,GAAe;;AAAA,iCACA;AAUzB;AACD,KA7BD,MA6BO;AACN,iBAAW,GAAG,MAAd;AACA;AACD;;AACD,SAAO,WAAP;AACA,CAtCY;;AAwCA,mBAA+C,qBAAW,EAAG;AACzE,MAAI,KAAK,GAA6B,EAAtC;;AACA,MAAI,QAAO,WAAP,KAAsB,QAA1B,EAAoC;AACnC,QAAI,WAAW,YAAY,KAA3B,EAAkC;AACjC,UAAI,aAAa,GAChB,WAAW,CAAC,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,WAAW,CAAC,MAAvC,CAAD,CADZ;AAEA,WAAK,CAAC,GAAN,GAAY,iBAAS,aAAT,CAAZ;AACA,KAJD,MAIO;AAAA,UACA,CADA,GACY,WADZ,CACA,CADA;AAAA,UACG,CADH,GACY,WADZ,CACG,CADH;AAAA,UACM,CADN,GACY,WADZ,CACM,CADN;;AAEN,UAAI,CAAC,KAAK,SAAN,IAAmB,CAAC,KAAK,SAAzB,IAAsC,CAAC,KAAK,SAAhD,EAA2D;AAC1D,aAAK,CAAC,GAAN,GAAY;AAAE,WAAC,EAAD,CAAF;AAAK,WAAC,EAAD,CAAL;AAAQ,WAAC,EAAD;AAAR,SAAZ;AACA,OAFD,MAEO;AAAA,YACA,CADA,GACY,WADZ,CACA,CADA;AAAA,YACG,CADH,GACY,WADZ,CACG,CADH;AAAA,YACM,CADN,GACY,WADZ,CACM,CADN;;AAEN,YAAI,CAAC,KAAK,SAAN,IAAmB,CAAC,KAAK,SAAzB,IAAsC,CAAC,KAAK,SAAhD,EAA2D;AAC1D,eAAK,CAAC,GAAN,GAAY;AAAE,aAAC,EAAD,CAAF;AAAK,aAAC,EAAD,CAAL;AAAQ,aAAC,EAAD;AAAR,WAAZ;AACA;AACD;AACD;AACD,GAhBD,MAgBO,IAAI,WAAW,IAAI,QAAnB,EAA6B;AACnC,SAAK,CAAC,GAAN,GAAY;AACX,OAAC,EAAE,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,GAA3B,IAAkC,CAD1B;AAEX,OAAC,EAAE,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,GAA3B,IAAkC,CAF1B;AAGX,OAAC,EAAE,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,GAA3B,IAAkC;AAH1B,KAAZ;AAKA,GANM,MAMA,IAAI,OAAO,WAAP,IAAsB,QAA1B,EAAoC;AAC1C,SAAK,CAAC,GAAN,GAAY,iBAAS,WAAT,CAAZ;AACA;;AACD,SAAO,KAAP;AACA,CA5BY,C;;;;;;;;;;;;;;;;;;;;ACjGb;;AAEA;;IAEqB,O;;;AAMpB,mBACS,YADT,EAEC,MAFD,EAGC,OAHD,EAG0B;AAAA;;AAFjB;AAHD,uBAAuB,KAAvB;AAOP,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,OAAL,GAAe,OAAf;;AACA,QAAI,OAAO,WAAP,KAAuB,WAA3B,EAAwC;AACvC,WAAK,QAAL,GAAgB,WAAW,CAAC,GAAZ,EAAhB;AACA;;AACD,SAAK,IAAL,GAAY,KAAK,IAAL,CAAU,IAAV,CAAe,IAAf,CAAZ;AACA;;;;2CAEmB;AAAA,0BACK,KAAK,OADV;AAAA,UACb,MADa,iBACb,MADa;AAAA,UACL,KADK,iBACL,KADK;AAAA,UAEb,SAFa,GAEC,KAAK,MAFN,CAEb,SAFa;AAInB,UAAM,OAAO,GAAG,SAAS,CAAC,MAAV,CAAiB,OAAjC;AACA,UAAI,gBAAgB,GAAG,OAAO,CAAC,UAA/B;;AAEA,UAAI,OAAO,CAAC,MAAZ,EAAoB;AACnB,YAAI,IAAI,GAAI,MAAM,CAAC,OAAP,CAAe,KAAf,GAAuB,MAAM,CAAC,OAAP,CAAe,MAAvC,GAAiD,IAA5D;;AACA,YAAI,KAAK,OAAL,CAAa,MAAjB,EAAyB;AACxB,cAAI,GAAG,IAAI,IAAI,MAAM,CAAC,OAAP,GAAiB,CAArB,CAAX;AACA;;AACD,YAAM,YAAY,GAAG,IAAI,GAAG,SAAS,CAAC,MAAV,CAAiB,KAAxB,GAAgC,gBAArD;AACA,YAAM,iBAAiB,GAAG,SAAS,CAAC,KAAV,CAAgB,MAAhB,GAAyB,YAAnD;;AACA,YAAI,iBAAiB,GAAG,CAAxB,EAA2B;AAC1B,eAAK,CAAC,aAAN,CAAoB,IAAI,CAAC,GAAL,CAAS,iBAAT,CAApB;AACA,SAFD,MAEO;AACN,eAAK,CAAC,eAAN,CAAsB,iBAAtB;AACA;AACD;AACD;;;iCAEY,E,EAAc,Q,EAAmC;AAAA;;AAAA,2BACnC,KAAK,OAD8B;AAAA,UACvD,MADuD,kBACvD,MADuD;AAAA,UAC/C,OAD+C,kBAC/C,OAD+C;AAK7D,UAAI,CAAC,MAAM,CAAC,KAAR,IAAiB,CAAC,MAAM,CAAC,MAA7B,EAAqC;AALwB,UAOvD,SAPuD,GAOzC,KAAK,MAPoC,CAOvD,SAPuD;AAS7D,eAAS,CAAC,KAAV,CAAgB,OAAhB,CAAwB,UAAC,QAAD,EAAuB;AAC9C,YAAI,EAAE,GAAa,QAAnB;AAEA,YAAI,EAAE,GAAW,EAAE,CAAC,CAAH,GAAO,EAAE,CAAC,CAA3B;AACA,YAAI,EAAE,GAAW,EAAE,CAAC,CAAH,GAAO,EAAE,CAAC,CAA3B;AACA,YAAI,IAAI,GAAW,IAAI,CAAC,IAAL,CAAU,EAAE,GAAG,EAAL,GAAU,EAAE,GAAG,EAAzB,CAAnB;;AACA,YAAI,IAAI,IAAI,EAAE,CAAC,MAAH,GAAY,EAAE,CAAC,MAA3B,EAAmC;AAClC,cAAI,CAAC,KAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,OAApB,CAA4B,MAAjC,EAAyC;AACxC,cAAE,CAAC,CAAH,GAAO,QAAQ,GAAG,QAAQ,CAAC,CAAZ,GAAgB,IAAI,CAAC,MAAL,KAAgB,MAAM,CAAC,KAAtD;AACA,cAAE,CAAC,CAAH,GAAO,QAAQ,GAAG,QAAQ,CAAC,CAAZ,GAAgB,IAAI,CAAC,MAAL,KAAgB,MAAM,CAAC,MAAtD;AACA,mBAAO,CAAC,YAAR,CAAqB,EAArB;AACA,WAJD,MAIO;AAEN,oBAAQ,KAAI,CAAC,OAAL,CAAa,MAAb,CAAoB,OAApB,CAA4B,MAA5B,CAAmC,WAA3C;AACC,mBAAK,uCAA6B,aAAlC;AACA,mBAAK,uCAA6B,YAAlC;AACA;AAHD;AAMA;AACD;AACD,OArBD;AAsBA;;;8BAEM;AACN,0BAAoB,CAAC,KAAK,OAAL,CAAa,aAAd,CAApB;AACA,WAAK,OAAL,CAAa,MAAb,CAAoB,OAApB,CAA4B,MAA5B;AACA;;;8BAGA,C,EACA,M,EACA,M,EACA,U,EACA,kB,EACA,oB,EAA4B;AAE5B,UAAI,SAAS,GAAW,kBAAkB,GAAG,oBAA7C;AACA,UAAI,YAAY,GAAW,kBAAkB,GAAG,oBAAhD;AACA,UAAI,oBAAoB,GACtB,OAAO,YAAY,GAAG,CAAtB,CAAD,GAA6B,YAD9B;AAEA,UAAI,aAAa,GAChB,IAAI,CAAC,EAAL,GAAW,IAAI,CAAC,EAAL,GAAU,oBAAX,GAAmC,GAD9C;AAEA,OAAC,CAAC,IAAF;AACA,OAAC,CAAC,SAAF;AACA,OAAC,CAAC,SAAF,CAAY,MAAZ,EAAoB,MAApB;AACA,OAAC,CAAC,MAAF,CAAS,CAAT,EAAY,CAAZ;;AACA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,SAApB,EAA+B,CAAC,EAAhC,EAAoC;AACnC,SAAC,CAAC,MAAF,CAAS,UAAT,EAAqB,CAArB;AACA,SAAC,CAAC,SAAF,CAAY,UAAZ,EAAwB,CAAxB;AACA,SAAC,CAAC,MAAF,CAAS,aAAT;AACA;;AACD,OAAC,CAAC,IAAF;AACA,OAAC,CAAC,OAAF;AACA;;;gCAEQ;AAAA,UACF,MADE,GACS,KAAK,OADd,CACF,MADE;AAER,YAAM,CAAC,IAAP,CAAY,MAAM,CAAC,OAAP,CAAe,SAAf,CAAyB,WAAzB,CAAZ,EAAmD,QAAnD;AACA;;;2BAEG;AACH,UAAI,UAAU,GAAG,IAAjB;AADG,2BAEwB,KAAK,OAF7B;AAAA,UAEG,OAFH,kBAEG,OAFH;AAAA,UAEY,OAFZ,kBAEY,OAFZ;AAAA,UAGG,SAHH,GAGiB,KAAK,MAHtB,CAGG,SAHH;;AAIH,UAAI,WAAW,KAAK,SAApB,EAA+B;AAC9B,YAAI,QAAQ,GAAG,WAAW,CAAC,GAAZ,EAAf;;AACA,YAAI,QAAQ,GAAG,KAAK,QAAhB,GAA2B,OAAO,KAAK,MAAL,CAAY,SAAlD,EAA6D;AAC5D,oBAAU,GAAG,KAAb;AACA,SAFD,MAEO;AACN,eAAK,QAAL,GAAgB,WAAW,CAAC,GAAZ,EAAhB;AACA;AACD;;AACD,UAAI,UAAJ,EAAgB;AACf,eAAO,CAAC,aAAR;AACA;;AACD,UAAI,CAAC,SAAS,CAAC,IAAV,CAAe,MAApB,EAA4B;AAC3B,4BAAoB,CAAC,KAAK,OAAL,CAAa,aAAd,CAApB;AACA,OAFD,MAEO;AACN,aAAK,OAAL,CAAa,aAAb,GAA6B,qBAAqB,CAAC,OAAO,CAAC,IAAT,CAAlD;AACA;AACD;;;2BAEG;AAAA;;AACH,UAAI,KAAK,WAAT,EAAsB;AACtB,WAAK,WAAL,GAAmB,IAAnB;AAFG,UAGG,OAHH,GAGe,IAHf,CAGG,OAHH;AAAA,UAIG,OAJH,GAIwB,OAJxB,CAIG,OAJH;AAAA,UAIY,OAJZ,GAIwB,OAJxB,CAIY,OAJZ;AAAA,UAKG,SALH,GAKiB,KAAK,MALtB,CAKG,SALH;AAMH,aAAO,CAAC,UAAR;AACA,aAAO,CAAC,UAAR;AACA,aAAO,CAAC,UAAR;AACA,aAAO,CAAC,WAAR,CACE,UADF,CACa,KAAK,OAAL,CAAa,YAAb,CAA0B,WAAC;AAAA,eAAI,CAAC,CAAC,OAAN;AAAA,OAA3B,CADb,EAEE,IAFF,CAEO,YAAK;AACV,eAAO,CAAC,eAAR;AACA,eAAO,CAAC,oBAAR;;AACA,cAAI,CAAC,OAAL,CAAa,aAAb,CAA2B;AAC1B,mBAAS,EAAE;AACV,uBAAW,EAAE;AACZ,4BAAc,EAAE,YAAS,SAAS,CAAC,WAAV,CAAsB,KAA/B;AADJ;AADH;AADe,SAA3B;;AAOA,cAAI,CAAC,IAAL;AACA,OAbF;AAcA;;;4BAEI;AAAA;;AAAA,UACE,SADF,GACgB,KAAK,MADrB,CACE,SADF;AAGJ,WAAK,YAAL,CAAkB,UAAlB,CAA6B,SAAS,CAAC,KAAvC,EAA8C,IAA9C,CAAmD,eAAK,EAAG;AAC1D,cAAI,CAAC,IAAL;AACA,OAFD;AAGA;;;;;;AApKF,0B;;;;;;;;;;;;;;ACHA;;AASA;;AAEA,IAAM,aAAa,GAAY;AAC9B,WAAS,EAAE;AACV,UAAM,EAAE;AACP,WAAK,EAAE,EADA;AAEP,aAAO,EAAE;AACR,cAAM,EAAE,KADA;AAER,kBAAU,EAAE;AAFJ;AAFF,KADE;AAQV,SAAK,EAAE;AACN,WAAK,EAAE;AADD,KARG;AAWV,SAAK,EAAE;AACN,UAAI,EAAE,oBAAU,MADV;AAEN,YAAM,EAAE;AACP,aAAK,EAAE,CADA;AAEP,aAAK,EAAE;AAFA,OAFF;AAMN,aAAO,EAAE;AACR,gBAAQ,EAAE;AADF,OANH;AASN,WAAK,EAAE;AACN,WAAG,EAAE,EADC;AAEN,aAAK,EAAE,GAFD;AAGN,cAAM,EAAE;AAHF,OATD;AAcN,YAAM,EAAE;AAdF,KAXG;AA2BV,WAAO,EAAE;AACR,WAAK,EAAE,GADC;AAER,YAAM,EAAE,KAFA;AAGR,UAAI,EAAE;AACL,cAAM,EAAE,IADH;AAEL,aAAK,EAAE,CAFF;AAGL,mBAAW,EAAE,GAHR;AAIL,YAAI,EAAE;AAJD;AAHE,KA3BC;AAqCV,QAAI,EAAE;AACL,WAAK,EAAE,CADF;AAEL,YAAM,EAAE,KAFH;AAGL,UAAI,EAAE;AACL,cAAM,EAAE,KADH;AAEL,aAAK,EAAE,EAFF;AAGL,gBAAQ,EAAE,CAHL;AAIL,YAAI,EAAE;AAJD;AAHD,KArCI;AA+CV,eAAW,EAAE;AACZ,YAAM,EAAE,IADI;AAEZ,cAAQ,EAAE,GAFE;AAGZ,WAAK,EAAE,MAHK;AAIZ,aAAO,EAAE,GAJG;AAKZ,WAAK,EAAE,CALK;AAMZ,YAAM,EAAE;AACP,cAAM,EAAE,KADD;AAEP,YAAI,EAAE,CAFC;AAGP,aAAK,EAAE;AAHA;AANI,KA/CH;AA2DV,QAAI,EAAE;AACL,YAAM,EAAE,IADH;AAEL,WAAK,EAAE,CAFF;AAGL,eAAS,EAAE,wBAAc,IAHpB;AAIL,YAAM,EAAE,KAJH;AAKL,cAAQ,EAAE,KALL;AAML,cAAQ,EAAE,sBAAY,MANjB;AAOL,YAAM,EAAE,IAPH;AAQL,aAAO,EAAE;AACR,cAAM,EAAE,KADA;AAER,eAAO,EAAE,IAFD;AAGR,eAAO,EAAE;AAHD;AARJ,KA3DI;AAyEV,SAAK,EAAE;AAzEG,GADmB;AA4E9B,eAAa,EAAE;AACd,aAAS,EAAE,QADG;AAEd,UAAM,EAAE;AACP,aAAO,EAAE;AACR,cAAM,EAAE,KADA;AAER,YAAI,EAAE,4BAAkB;AAFhB,OADF;AAKP,aAAO,EAAE;AACR,cAAM,EAAE,KADA;AAER,YAAI,EAAE,4BAAkB;AAFhB,OALF;AASP,YAAM,EAAE;AATD,KAFM;AAad,SAAK,EAAE;AACN,UAAI,EAAE;AACL,gBAAQ,EAAE,GADL;AAEL,mBAAW,EAAE;AACZ,iBAAO,EAAE;AADG;AAFR,OADA;AAON,YAAM,EAAE;AACP,gBAAQ,EAAE,GADH;AAEP,YAAI,EAAE,EAFC;AAGP,gBAAQ,EAAE;AAHH,OAPF;AAYN,aAAO,EAAE;AACR,gBAAQ,EAAE,GADF;AAER,gBAAQ,EAAE;AAFF,OAZH;AAgBN,UAAI,EAAE;AACL,oBAAY,EAAE;AADT,OAhBA;AAmBN,YAAM,EAAE;AACP,oBAAY,EAAE;AADP;AAnBF;AAbO,GA5Ee;AAiH9B,eAAa,EAAE,IAjHe;AAkH9B,WAAS,EAAE,GAlHmB;AAmH9B,SAAO,EAAE;AACR,UAAM,EAAE,KADA;AAER,SAAK,EAAE,CAFC;AAGR,QAAI,EAAE,sBAAY,MAHV;AAIR,UAAM,EAAE;AACP,iBAAW,EAAE,uCAA6B;AADnC,KAJA;AAOR,QAAI,EAAE;AACL,YAAM,EAAE,KADH;AAEL,YAAM,EAAE;AACP,aAAK,EAAE,GADA;AAEP,aAAK,EAAE;AAFA;AAFH,KAPE;AAcR,QAAI,EAAE;AACL,YAAM,EAAE,EADH;AAEL,UAAI,EAAE,0BAAgB;AAFjB,KAdE;AAkBR,OAAG,EAAE;AAlBG;AAnHqB,CAA/B;;AAyIa,2BAAmB;AAAA,SAAM,mBAAW,EAAX,EAAe,aAAf,CAAN;AAAA,CAAnB,C;;;;;;;;;;;;;;;;;;;;ACrJb;;AAaC,wBAbM,uBAaN;;AAZD;;AAaC,gBAbM,eAaN;;AAZD;;AAaC,mBAbM,kBAaN;;AAZD;;AAaC,0BAbM,yBAaN;;AAZD;;AAaC,2BAbM,0BAaN;;AAZD;;AAaC,kBAbM,iBAaN;;AAXD;;AACA;;AACA;;AACA,oD;;;;;;;ACVA,mD","file":"particles.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Particles\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"Particles\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_react__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import * as React from \"react\";\nimport { Component } from \"react\";\n\nimport { IParams, ParticlesLibrary, deepAssign, RecursivePartial } from \"./lib\";\n\nexport interface ParticlesProps {\n\twidth: string;\n\theight: string;\n\tparams: RecursivePartial<IParams>;\n\tstyle: any;\n\tclassName?: string;\n\tcanvasClassName?: string;\n}\n\nexport interface ParticlesState {\n\tcanvas?: HTMLCanvasElement;\n\tlibrary?: ParticlesLibrary;\n}\n\nexport default class Particles extends Component<\n\tParticlesProps,\n\tParticlesState\n> {\n\tpublic static defaultProps: ParticlesProps = {\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tparams: {},\n\t\tstyle: {}\n\t};\n\n\tconstructor(props: ParticlesProps) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcanvas: undefined,\n\t\t\tlibrary: undefined\n\t\t};\n\t\tthis.loadCanvas = this.loadCanvas.bind(this);\n\t}\n\n\tprivate buildParticlesLibrary(params: RecursivePartial<IParams>) {\n\t\ttry{if (window === undefined) return null; } catch{ return null; } // SSR\n\t\treturn new ParticlesLibrary(params);\n\t}\n\n\tprivate refresh(props: Readonly<ParticlesProps>): void {\n\t\tif (this.state.canvas) {\n\t\t\tthis.destroy();\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tlibrary: this.buildParticlesLibrary(props.params)\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.loadCanvas(this.state.canvas);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.state.library.destroy();\n\t}\n\n\tloadCanvas(canvas: HTMLCanvasElement) {\n\t\tif (canvas) {\n\t\t\tthis.setState(\n\t\t\t\t{\n\t\t\t\t\tcanvas\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tthis.state.library.loadCanvas(this.state.canvas);\n\t\t\t\t\tthis.state.library.start();\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps: Readonly<ParticlesProps>) {\n\t\treturn nextProps !== this.props;\n\t}\n\n\tcomponentDidUpdate() {\n\t\tthis.refresh(this.props);\n\t}\n\n\tforceUpdate() {\n\t\tthis.refresh(this.props);\n\t\tsuper.forceUpdate();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState({\n\t\t\tlibrary: this.buildParticlesLibrary(this.props.params)\n\t\t});\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.destroy();\n\t\tthis.setState({\n\t\t\tlibrary: undefined\n\t\t});\n\t}\n\n\trender() {\n\t\tlet { width, height, className, canvasClassName } = this.props;\n\t\treturn (\n\t\t\t<div className={className}>\n\t\t\t\t<canvas\n\t\t\t\t\tref={this.loadCanvas}\n\t\t\t\t\tclassName={canvasClassName}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\t...this.props.style,\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\theight\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import Particles from \"./Particles\";\n\nexport default Particles;\nexport { Particles };\n","export interface ICanvasParam {\n\telement: HTMLCanvasElement;\n\twidth: number;\n\theight: number;\n\tpxratio?: number;\n\tctx?: CanvasRenderingContext2D;\n}\n\nexport enum ShapeType {\n\tCIRCLE = \"circle\",\n\tEDGE = \"edge\",\n\tTRIANGLE = \"triangle\",\n\tPOLYGON = \"polygon\",\n\tSTAR = \"star\",\n\tIMAGE = \"image\",\n\tIMAGES = \"images\"\n}\n\nexport enum MoveDirection {\n\tTOP = \"top\",\n\tTOP_RIGHT = \"top-right\",\n\tRIGHT = \"right\",\n\tBOTTOM_RIGHT = \"bottom-right\",\n\tBOTTOM = \"bottom\",\n\tBOTTOM_LEFT = \"bottom-left\",\n\tLEFT = \"left\",\n\tTOP_LEFT = \"top-left\",\n\tNONE = \"none\"\n}\n\nexport enum MoveOutMode {\n\tBOUNCE = \"bounce\",\n\tOUT = \"out\"\n}\n\nexport enum InteractivityMode {\n\tGRAB = \"grab\",\n\tPUSH = \"push\",\n\tREMOVE = \"remove\",\n\tBUBBLE = \"bubble\",\n\tREPULSE = \"repulse\"\n}\n\nexport interface IImageDefinition {\n\tsrc: string;\n\twidth: number;\n\theight: number;\n}\n\nexport interface IParticleShapeDefinition {\n\ttype: ShapeType;\n\tstroke: {\n\t\twidth: number;\n\t\tcolor: any;\n\t};\n\tpolygon: {\n\t\tnb_sides: number;\n\t};\n\timage: IImageDefinition;\n\timages: IImageDefinition[];\n}\n\nexport enum PolygonType {\n\tINLINE = \"inline\",\n\tINSIDE = \"inside\",\n\tOUTSIDE = \"outside\"\n}\n\nexport enum PolygonInlineArrangementType {\n\tRANDOM_POINT = \"random-point\",\n\tONE_PER_POINT = \"one-per-point\", // Overrides particles number\n\tRANDOM_LENGTH = \"random-length\",\n\tEQUIDISTANT = \"equidistant\"\n}\n\nexport enum PolygonMoveType {\n\tPATH = \"path\",\n\tRADIUS = \"radius\"\n}\n\nexport interface IPolygonDefinition {\n\tenable: boolean;\n\tscale: number;\n\ttype: PolygonType;\n\tmove: {\n\t\tradius: number;\n\t\ttype: PolygonMoveType;\n\t};\n\tinline: {\n\t\tarrangement: PolygonInlineArrangementType;\n\t};\n\tdraw: {\n\t\tenable: boolean;\n\t\tstroke: {\n\t\t\twidth: number;\n\t\t\tcolor: string;\n\t\t};\n\t};\n\turl: string;\n}\n\nexport interface IParticleSizeDefinition {\n\tvalue: number;\n\trandom: boolean;\n\tanim: {\n\t\tenable: boolean;\n\t\tspeed: number;\n\t\tsize_min: number;\n\t\tsync: boolean;\n\t};\n}\n\nexport interface IParticleColorDefinition {\n\tvalue: any;\n}\n\nexport interface IParticleOpacityDefinition {\n\tvalue: number;\n\trandom: boolean;\n\tanim: {\n\t\tenable: boolean;\n\t\tspeed: number;\n\t\topacity_min: number;\n\t\tsync: boolean;\n\t};\n}\n\nexport interface IParticleMoveDefinition {\n\tenable: boolean;\n\tspeed: number;\n\tdirection: MoveDirection;\n\trandom: boolean;\n\tstraight: boolean;\n\tout_mode: MoveOutMode;\n\tbounce: boolean;\n\tattract: {\n\t\tenable: boolean;\n\t\trotateX: number;\n\t\trotateY: number;\n\t};\n}\n\nexport interface IParams {\n\tparticles: {\n\t\tnumber: {\n\t\t\tvalue: number;\n\t\t\tdensity: {\n\t\t\t\tenable: boolean;\n\t\t\t\tvalue_area: number;\n\t\t\t};\n\t\t};\n\t\tcolor: IParticleColorDefinition;\n\t\tshape: IParticleShapeDefinition;\n\t\topacity: IParticleOpacityDefinition;\n\t\tsize: IParticleSizeDefinition;\n\t\tline_linked: {\n\t\t\tenable: boolean;\n\t\t\tdistance: number;\n\t\t\tcolor: any;\n\t\t\topacity: number;\n\t\t\twidth: number;\n\t\t\tcolor_rgb_line?: any;\n\t\t\tshadow: {\n\t\t\t\tenable: boolean;\n\t\t\t\tblur: number;\n\t\t\t\tcolor: string;\n\t\t\t};\n\t\t};\n\t\tmove: IParticleMoveDefinition;\n\t\tarray: any[];\n\t};\n\tinteractivity: {\n\t\tdetect_on: string;\n\t\tevents: {\n\t\t\tonhover: {\n\t\t\t\tenable: boolean;\n\t\t\t\tmode: InteractivityMode | InteractivityMode[];\n\t\t\t};\n\t\t\tonclick: {\n\t\t\t\tenable: boolean;\n\t\t\t\tmode: InteractivityMode | InteractivityMode[];\n\t\t\t};\n\t\t\tresize: boolean;\n\t\t};\n\t\tmodes: {\n\t\t\tgrab: {\n\t\t\t\tdistance: number;\n\t\t\t\tline_linked: {\n\t\t\t\t\topacity: number;\n\t\t\t\t};\n\t\t\t};\n\t\t\tbubble: {\n\t\t\t\tdistance: number;\n\t\t\t\tsize: number;\n\t\t\t\tduration: number;\n\t\t\t\topacity?: number;\n\t\t\t};\n\t\t\trepulse: {\n\t\t\t\tdistance: number;\n\t\t\t\tduration: number;\n\t\t\t};\n\t\t\tpush: {\n\t\t\t\tparticles_nb: number;\n\t\t\t};\n\t\t\tremove: {\n\t\t\t\tparticles_nb: number;\n\t\t\t};\n\t\t};\n\t};\n\tretina_detect: boolean;\n\tfps_limit: number;\n\tpolygon: IPolygonDefinition;\n}\n","import { resolve } from \"dns\";\nimport {\n\tIImageDefinition,\n\tIParticleShapeDefinition,\n\tShapeType\n} from \"./IParams\";\nimport { IParsedColor, isEqual } from \"./Utils\";\n\nexport interface IImageDefinitionEnhanced extends IImageDefinition {\n\tsvgData?: string;\n\telementData?: HTMLImageElement;\n\tloaded?: boolean;\n\tratio?: number;\n\ttype?: string;\n}\n\nexport interface IShapeDefinitionEnhanced extends IParticleShapeDefinition {\n\timage: IImageDefinitionEnhanced;\n\timages: IImageDefinitionEnhanced[];\n}\n\nexport enum ImageMode {\n\tSINGLE = \"single\",\n\tMULTIPLE = \"multiple\"\n}\n\nexport class ImageManager {\n\tprivate singleImage: IImageDefinitionEnhanced = null;\n\tprivate multipleImages: IImageDefinitionEnhanced[] = [];\n\tprivate mode: ImageMode = ImageMode.SINGLE;\n\n\tgetImage(index?: number): IImageDefinitionEnhanced {\n\t\tif (index !== undefined) {\n\t\t\tif (this.multipleImages.length === 0)\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`No images loaded. You may need to define 'shape.type' = 'images'.`\n\t\t\t\t);\n\t\t\treturn this.multipleImages[index % this.multipleImages.length];\n\t\t} else {\n\t\t\treturn this.singleImage;\n\t\t}\n\t}\n\n\tparseShape(\n\t\tshape: IShapeDefinitionEnhanced\n\t): Promise<IShapeDefinitionEnhanced> {\n\t\tif (isEqual(ShapeType.IMAGE, shape.type)) {\n\t\t\tthis.mode = ImageMode.SINGLE;\n\t\t\treturn this.parseSingleImage(shape.image).then(parsedImage => {\n\t\t\t\tthis.singleImage = parsedImage;\n\t\t\t\treturn {\n\t\t\t\t\t...shape,\n\t\t\t\t\timage: parsedImage\n\t\t\t\t};\n\t\t\t});\n\t\t} else if (isEqual(ShapeType.IMAGES, shape.type)) {\n\t\t\t// 'image' or 'images', not both\n\t\t\tthis.mode = ImageMode.MULTIPLE;\n\t\t\tconst promises = shape.images.map(imageShape =>\n\t\t\t\tthis.parseSingleImage(imageShape)\n\t\t\t);\n\t\t\treturn Promise.all(promises).then(parsedImages => {\n\t\t\t\tthis.multipleImages = parsedImages;\n\t\t\t\treturn {\n\t\t\t\t\t...shape,\n\t\t\t\t\timages: parsedImages\n\t\t\t\t};\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.resolve(shape);\n\t\t}\n\t}\n\n\tprivate parseSingleImage(\n\t\timage: IImageDefinitionEnhanced\n\t): Promise<IImageDefinitionEnhanced> {\n\t\tconst returnImage = this.buildImageObject({\n\t\t\theight: image.height,\n\t\t\twidth: image.width,\n\t\t\tsrc: image.src\n\t\t});\n\n\t\tlet ratio = image.width / image.height;\n\t\tif (ratio === Infinity || ratio === 0) ratio = 1;\n\t\treturnImage.ratio = ratio;\n\n\t\tlet match: string[];\n\t\tif (\n\t\t\t(match = /^data:image\\/(\\w{3})\\+xml;(.*?)base64,(.*)$/.exec(image.src))\n\t\t) {\n\t\t\treturnImage.type = match[1];\n\t\t\treturnImage.svgData = atob(match[3]);\n\t\t} else if ((match = /^.*(\\w{3})$/.exec(image.src))) {\n\t\t\treturnImage.type = match[1];\n\t\t}\n\t\treturn this.loadImage(returnImage);\n\t}\n\n\tprivate loadImage(\n\t\timage: IImageDefinitionEnhanced\n\t): Promise<IImageDefinitionEnhanced> {\n\t\timage = { ...image };\n\t\tif (image.src != \"\") {\n\t\t\tif (image.type == \"svg\") {\n\t\t\t\tif (image.svgData) {\n\t\t\t\t\t// already loaded\n\t\t\t\t\treturn Promise.resolve(image);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.downloadImage(image.src).then(data => {\n\t\t\t\t\t\timage.svgData = data.response;\n\t\t\t\t\t\treturn image;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn new Promise<IImageDefinitionEnhanced>(resolve => {\n\t\t\t\t\tlet imageElement: HTMLImageElement = new Image();\n\t\t\t\t\timageElement.addEventListener(\"load\", () => {\n\t\t\t\t\t\timage.elementData = imageElement;\n\t\t\t\t\t\tresolve(image);\n\t\t\t\t\t});\n\t\t\t\t\timageElement.src = image.src;\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\treturn Promise.reject(\n\t\t\t\tnew Error(\"Error react-particles-js - no image.src\")\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic downloadImage(\n\t\turl: string\n\t): Promise<{ response: any; xhr: XMLHttpRequest }> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet xhr: XMLHttpRequest = new XMLHttpRequest();\n\t\t\txhr.open(\"GET\", url);\n\t\t\txhr.onreadystatechange = (data: any) => {\n\t\t\t\tif (xhr.readyState == 4) {\n\t\t\t\t\tif (xhr.status == 200) {\n\t\t\t\t\t\tresolve({ response: data.currentTarget.response, xhr });\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(\n\t\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\t`Error react-particles-js - Status code ${xhr.readyState}`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr.send();\n\t\t});\n\t}\n\n\tcreateSvgImage(\n\t\timageData: string,\n\t\tparticleParameters: {\n\t\t\tcolor: IParsedColor;\n\t\t\topacity: number;\n\t\t}\n\t): Promise<HTMLImageElement> {\n\t\tconst rgbHex: RegExp = /#([0-9A-F]{3,6})|rgb\\([0-9,]+\\)/gi;\n\n\t\tlet coloredSvgXml: string = imageData.replace(rgbHex, (m, r, g, b) => {\n\t\t\tlet color_value: string;\n\t\t\tif (particleParameters.color.rgb) {\n\t\t\t\tlet { r, g, b } = particleParameters.color.rgb;\n\t\t\t\tcolor_value = `rgba( ${r}, ${g}, ${b}, ${particleParameters.opacity} )`;\n\t\t\t} else {\n\t\t\t\tlet { h, s, l } = particleParameters.color.hsl;\n\t\t\t\tcolor_value = `rgba( ${h}, ${s}, ${l}, ${particleParameters.opacity} )`;\n\t\t\t}\n\t\t\treturn color_value;\n\t\t});\n\n\t\tconst svg: Blob = new Blob([coloredSvgXml], {\n\t\t\ttype: \"image/svg+xml;charset=utf-8\"\n\t\t});\n\t\tconst DOMURL: typeof URL = window.URL || (window as any);\n\t\tconst url = DOMURL.createObjectURL(svg);\n\n\t\treturn new Promise(resolve => {\n\t\t\tlet img = new Image();\n\t\t\timg.addEventListener(\"load\", () => {\n\t\t\t\tDOMURL.revokeObjectURL(url);\n\t\t\t\tresolve(img);\n\t\t\t});\n\t\t\timg.src = url;\n\t\t});\n\t}\n\n\tbuildImageObject(\n\t\timageData: Partial<IImageDefinitionEnhanced> = {}\n\t): IImageDefinitionEnhanced {\n\t\treturn {\n\t\t\tsvgData: null,\n\t\t\theight: 0,\n\t\t\twidth: 0,\n\t\t\tratio: 0,\n\t\t\tsrc: \"\",\n\t\t\ttype: \"\",\n\t\t\t...imageData\n\t\t};\n\t}\n}\n","import { Particle, IParams, ParticlesLibrary, TPoint } from \".\";\nimport { PolygonType, InteractivityMode } from \"./IParams\";\n\nexport enum MouseInteractivityStatus {\n\tMOUSEMOVE = \"mousemove\",\n\tMOUSELEAVE = \"mouseleave\"\n}\n\nexport default class Interact {\n\tinteractionElement: EventTarget;\n\tmouseMovePosition: TPoint = {\n\t\tx: 0,\n\t\ty: 0\n\t};\n\tmouseClickPosition: TPoint = {\n\t\tx: 0,\n\t\ty: 0\n\t};\n\tmouseStatus: MouseInteractivityStatus;\n\tmouseClickTime: number = 0;\n\n\tconstructor(private library: ParticlesLibrary) {\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onMouseLeave = this.onMouseLeave.bind(this);\n\t\tthis.onMouseClick = this.onMouseClick.bind(this);\n\t}\n\n\tattachEventHandlers() {\n\t\tconst interactivity = this.library.getParameter(p => p.interactivity);\n\n\t\tif (interactivity.detect_on === \"window\") {\n\t\t\tthis.interactionElement = window;\n\t\t} else {\n\t\t\tthis.interactionElement = this.library.canvas.element;\n\t\t}\n\n\t\tif (\n\t\t\tinteractivity.events.onhover.enable ||\n\t\t\tinteractivity.events.onclick.enable\n\t\t) {\n\t\t\tthis.interactionElement.addEventListener(\"mousemove\", this.onMouseMove);\n\t\t\tthis.interactionElement.addEventListener(\"mouseleave\", this.onMouseLeave);\n\t\t}\n\n\t\tif (interactivity.events.onclick.enable) {\n\t\t\tthis.interactionElement.addEventListener(\"click\", this.onMouseClick);\n\t\t}\n\t}\n\n\tdetachEventHandlers() {\n\t\tconst interactivity = this.library.getParameter(p => p.interactivity);\n\t\tif (!this.interactionElement) return;\n\n\t\tif (\n\t\t\tinteractivity.events.onhover.enable ||\n\t\t\tinteractivity.events.onclick.enable\n\t\t) {\n\t\t\tthis.interactionElement.removeEventListener(\n\t\t\t\t\"mousemove\",\n\t\t\t\tthis.onMouseMove\n\t\t\t);\n\t\t\tthis.interactionElement.removeEventListener(\n\t\t\t\t\"mouseleave\",\n\t\t\t\tthis.onMouseLeave\n\t\t\t);\n\t\t}\n\n\t\tif (interactivity.events.onclick.enable) {\n\t\t\tthis.interactionElement.removeEventListener(\"click\", this.onMouseClick);\n\t\t}\n\t}\n\n\tonMouseMove(event: MouseEvent) {\n\t\tconst position: TPoint = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\n\t\tif (this.interactionElement === window) {\n\t\t\tposition.x = event.clientX;\n\t\t\tposition.y = event.clientY;\n\t\t} else {\n\t\t\tposition.x = event.offsetX || event.clientX;\n\t\t\tposition.y = event.offsetY || event.clientY;\n\t\t}\n\n\t\tthis.mouseMovePosition = position;\n\n\t\tif (this.library.retina) {\n\t\t\tthis.mouseMovePosition.x *= this.library.canvas.pxratio;\n\t\t\tthis.mouseMovePosition.y *= this.library.canvas.pxratio;\n\t\t}\n\n\t\tthis.mouseStatus = MouseInteractivityStatus.MOUSEMOVE;\n\t}\n\n\tonMouseLeave() {\n\t\tthis.mouseMovePosition.x = 0;\n\t\tthis.mouseMovePosition.y = 0;\n\n\t\tthis.mouseStatus = MouseInteractivityStatus.MOUSELEAVE;\n\t}\n\n\tonMouseClick() {\n\t\tconst interactivity = this.library.getParameter(p => p.interactivity);\n\t\tconst particles = this.library.getParameter(p => p.particles);\n\t\tconst polygon = this.library.getParameter(p => p.polygon);\n\n\t\tthis.mouseClickPosition = { ...this.mouseMovePosition };\n\n\t\tif (\n\t\t\tpolygon.enable &&\n\t\t\t[PolygonType.INSIDE, PolygonType.OUTSIDE].indexOf(polygon.type) > -1\n\t\t) {\n\t\t\tconst isInside = this.library.polygonMask.isPointInsidePolygon(\n\t\t\t\tthis.mouseClickPosition\n\t\t\t);\n\t\t\tif (polygon.type === PolygonType.INSIDE && !isInside) return;\n\t\t\tif (polygon.type === PolygonType.OUTSIDE && isInside) return;\n\t\t}\n\n\t\tthis.mouseClickTime = new Date().getTime();\n\n\t\tif (interactivity.events.onclick.enable) {\n\t\t\tswitch (interactivity.events.onclick.mode) {\n\t\t\t\tcase InteractivityMode.PUSH:\n\t\t\t\t\tif (particles.move.enable) {\n\t\t\t\t\t\tthis.library.modes.pushParticles(\n\t\t\t\t\t\t\tinteractivity.modes.push.particles_nb,\n\t\t\t\t\t\t\tthis.mouseClickPosition\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (interactivity.modes.push.particles_nb == 1) {\n\t\t\t\t\t\t\tthis.library.modes.pushParticles(\n\t\t\t\t\t\t\t\tinteractivity.modes.push.particles_nb,\n\t\t\t\t\t\t\t\tthis.mouseClickPosition\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else if (interactivity.modes.push.particles_nb > 1) {\n\t\t\t\t\t\t\tthis.library.modes.pushParticles(\n\t\t\t\t\t\t\t\tinteractivity.modes.push.particles_nb\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase InteractivityMode.REMOVE:\n\t\t\t\t\tthis.library.modes.removeParticles(\n\t\t\t\t\t\tinteractivity.modes.remove.particles_nb\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase InteractivityMode.BUBBLE:\n\t\t\t\t\tthis.library.modes.bubble_clicking = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase InteractivityMode.REPULSE:\n\t\t\t\t\tthis.library.modes.repulse_clicking = true;\n\t\t\t\t\tthis.library.modes.repulse_count = 0;\n\t\t\t\t\tthis.library.modes.repulse_finish = false;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.library.modes.repulse_clicking = false;\n\t\t\t\t\t}, interactivity.modes.repulse.duration * 1000);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tlinkParticles(p1: Particle, p2: Particle): void {\n\t\tconst distance = this.library.manager.getDistance(p1, p2);\n\t\tconst canvas = this.library.canvas;\n\t\tconst lineLinked = this.library.getParameter(p => p.particles.line_linked);\n\n\t\tif (distance <= lineLinked.distance) {\n\t\t\tconst lineOpacity =\n\t\t\t\tlineLinked.opacity -\n\t\t\t\tdistance / (1 / lineLinked.opacity) / lineLinked.distance;\n\t\t\tif (lineOpacity > 0) {\n\t\t\t\tlet lineColor = lineLinked.color_rgb_line;\n\t\t\t\tlet { r, g, b } = lineColor;\n\t\t\t\tcanvas.ctx.save();\n\t\t\t\tcanvas.ctx.strokeStyle = `rgba( ${r}, ${g}, ${b}, ${lineOpacity} )`;\n\t\t\t\tcanvas.ctx.lineWidth = lineLinked.width;\n\n\t\t\t\tcanvas.ctx.beginPath();\n\t\t\t\tif (lineLinked.shadow.enable) {\n\t\t\t\t\tcanvas.ctx.shadowBlur = lineLinked.shadow.blur;\n\t\t\t\t\tcanvas.ctx.shadowColor = lineLinked.shadow.color;\n\t\t\t\t}\n\n\t\t\t\tcanvas.ctx.moveTo(p1.x, p1.y);\n\t\t\t\tcanvas.ctx.lineTo(p2.x, p2.y);\n\t\t\t\tcanvas.ctx.stroke();\n\t\t\t\tcanvas.ctx.closePath();\n\t\t\t\tcanvas.ctx.restore();\n\t\t\t}\n\t\t}\n\t}\n\n\tattractParticles(p1: Particle, p2: Particle): void {\n\t\tconst {\n\t\t\tdistance,\n\t\t\tdistanceX,\n\t\t\tdistanceY\n\t\t} = this.library.manager.getDistances(p1, p2);\n\n\t\tconst line_linked = this.library.getParameter(p => p.particles.line_linked);\n\t\tconst attract = this.library.getParameter(p => p.particles.move.attract);\n\n\t\tif (distance <= line_linked.distance) {\n\t\t\tconst accelerationX = distanceX / (attract.rotateX * 1000);\n\t\t\tconst accelerationY = distanceY / (attract.rotateY * 1000);\n\n\t\t\tp1.vx -= accelerationX;\n\t\t\tp1.vy -= accelerationY;\n\n\t\t\tp2.vx += accelerationX;\n\t\t\tp2.vy += accelerationY;\n\t\t}\n\t}\n\n\tbounceParticles(p1: Particle, p2: Particle): void {\n\t\tconst distance = this.library.manager.getDistance(p1, p2);\n\t\tlet minimumDistance = p1.radius + p2.radius;\n\n\t\tif (distance <= minimumDistance) {\n\t\t\tp1.vx = -p1.vx;\n\t\t\tp1.vy = -p1.vy;\n\t\t\tp2.vx = -p2.vx;\n\t\t\tp2.vy = -p2.vy;\n\t\t}\n\t}\n}\n","import {\n\tclamp,\n\tisInArray,\n\tIParams,\n\tParticle,\n\tParticlesLibrary,\n\tTPoint\n} from \".\";\nimport { InteractivityMode, MoveOutMode } from \"./IParams\";\nimport { MouseInteractivityStatus } from \"./Interactivity\";\n\nexport default class Modes {\n\tbubble_clicking = false;\n\tbubble_duration_end = false;\n\tpushing = false;\n\trepulse_clicking = false;\n\trepulse_count = 0;\n\trepulse_finish = false;\n\n\tconstructor(private library: ParticlesLibrary) {}\n\n\tpushParticles(amount: number, position?: TPoint) {\n\t\tlet { manager } = this.library;\n\n\t\tconst particles = this.library.getParameter(p => p.particles);\n\n\t\tthis.pushing = true;\n\n\t\tfor (let i = 0; i < amount; i++) {\n\t\t\tparticles.array.push(new Particle(this.library, { position }));\n\n\t\t\tif (i === amount - 1) {\n\t\t\t\tif (!particles.move.enable) {\n\t\t\t\t\tmanager.particlesDraw();\n\t\t\t\t}\n\t\t\t\tthis.pushing = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveParticles(amount: number): void {\n\t\tlet { manager } = this.library;\n\t\tconst particles = this.library.getParameter(p => p.particles);\n\n\t\tparticles.array.splice(0, amount);\n\t\tif (!particles.move.enable) {\n\t\t\tmanager.particlesDraw();\n\t\t}\n\t}\n\n\tbubbleParticle(particle: Particle) {\n\t\tconst interactivity = this.library.getParameter(p => p.interactivity);\n\t\tconst particles = this.library.getParameter(p => p.particles);\n\n\t\tif (\n\t\t\tinteractivity.events.onhover.enable &&\n\t\t\tisInArray(InteractivityMode.BUBBLE, interactivity.events.onhover.mode)\n\t\t) {\n\t\t\tconst mouseDistance = this.library.manager.getDistance(\n\t\t\t\tparticle,\n\t\t\t\tthis.library.interactivity.mouseMovePosition\n\t\t\t);\n\t\t\tconst bubbleDistance = interactivity.modes.bubble.distance;\n\t\t\tconst ratio = 1 - mouseDistance / bubbleDistance;\n\n\t\t\tif (mouseDistance <= bubbleDistance) {\n\t\t\t\tif (\n\t\t\t\t\tratio >= 0 &&\n\t\t\t\t\tthis.library.interactivity.mouseStatus ===\n\t\t\t\t\t\tMouseInteractivityStatus.MOUSEMOVE\n\t\t\t\t) {\n\t\t\t\t\tconst bubbleSize = interactivity.modes.bubble.size;\n\t\t\t\t\tconst particleSize = particles.size.value;\n\n\t\t\t\t\tif (bubbleSize != particleSize) {\n\t\t\t\t\t\tif (bubbleSize > particleSize) {\n\t\t\t\t\t\t\tconst size = particle.radius + bubbleSize * ratio;\n\t\t\t\t\t\t\tif (size >= 0) {\n\t\t\t\t\t\t\t\tparticle.radius_bubble = size;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst difference = particle.radius - bubbleSize;\n\t\t\t\t\t\t\tconst size = particle.radius - difference * ratio;\n\t\t\t\t\t\t\tif (size > 0) {\n\t\t\t\t\t\t\t\tparticle.radius_bubble = size;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tparticle.radius_bubble = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (interactivity.modes.bubble.opacity !== particles.opacity.value) {\n\t\t\t\t\t\tif (interactivity.modes.bubble.opacity > particles.opacity.value) {\n\t\t\t\t\t\t\tconst opacity = interactivity.modes.bubble.opacity * ratio;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\topacity > particle.opacityValue &&\n\t\t\t\t\t\t\t\topacity <= interactivity.modes.bubble.opacity\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tparticle.bubbleOpacity = opacity;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst opacity =\n\t\t\t\t\t\t\t\tparticle.opacityValue -\n\t\t\t\t\t\t\t\t(particles.opacity.value - interactivity.modes.bubble.opacity) *\n\t\t\t\t\t\t\t\t\tratio;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\topacity < particle.opacityValue &&\n\t\t\t\t\t\t\t\topacity >= interactivity.modes.bubble.opacity\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tparticle.bubbleOpacity = opacity;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparticle.bubbleOpacity = particle.opacityValue;\n\t\t\t\tparticle.radius_bubble = particle.radius;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.library.interactivity.mouseStatus ===\n\t\t\t\tMouseInteractivityStatus.MOUSELEAVE\n\t\t\t) {\n\t\t\t\tparticle.bubbleOpacity = particle.opacityValue;\n\t\t\t\tparticle.radius_bubble = particle.radius;\n\t\t\t}\n\t\t} else if (\n\t\t\tinteractivity.events.onclick.enable &&\n\t\t\tisInArray(InteractivityMode.BUBBLE, interactivity.events.onclick.mode)\n\t\t) {\n\t\t\tif (this.bubble_clicking) {\n\t\t\t\tconst mouseDistance = this.library.manager.getDistance(\n\t\t\t\t\tparticle,\n\t\t\t\t\tthis.library.interactivity.mouseClickPosition\n\t\t\t\t);\n\t\t\t\tconst timeSpent =\n\t\t\t\t\t(new Date().getTime() - this.library.interactivity.mouseClickTime) /\n\t\t\t\t\t1000;\n\n\t\t\t\tif (timeSpent > interactivity.modes.bubble.duration) {\n\t\t\t\t\tthis.bubble_duration_end = true;\n\t\t\t\t}\n\n\t\t\t\tif (timeSpent > interactivity.modes.bubble.duration * 2) {\n\t\t\t\t\tthis.bubble_clicking = false;\n\t\t\t\t\tthis.bubble_duration_end = false;\n\t\t\t\t}\n\n\t\t\t\tconst process = (\n\t\t\t\t\tbubble_param: any,\n\t\t\t\t\tparticles_param: any,\n\t\t\t\t\tp_obj_bubble: any,\n\t\t\t\t\tp_obj: any,\n\t\t\t\t\tid: any\n\t\t\t\t) => {\n\t\t\t\t\tif (bubble_param != particles_param) {\n\t\t\t\t\t\tif (!this.bubble_duration_end) {\n\t\t\t\t\t\t\tif (mouseDistance <= interactivity.modes.bubble.distance) {\n\t\t\t\t\t\t\t\tlet obj: any;\n\t\t\t\t\t\t\t\tif (p_obj_bubble != undefined) {\n\t\t\t\t\t\t\t\t\tobj = p_obj_bubble;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tobj = p_obj;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (obj != bubble_param) {\n\t\t\t\t\t\t\t\t\tlet value: any =\n\t\t\t\t\t\t\t\t\t\tp_obj -\n\t\t\t\t\t\t\t\t\t\t(timeSpent * (p_obj - bubble_param)) /\n\t\t\t\t\t\t\t\t\t\t\tinteractivity.modes.bubble.duration;\n\t\t\t\t\t\t\t\t\tif (id == \"size\") particle.radius_bubble = value;\n\t\t\t\t\t\t\t\t\tif (id == \"opacity\") particle.bubbleOpacity = value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (id == \"size\") particle.radius_bubble = undefined;\n\t\t\t\t\t\t\t\tif (id == \"opacity\") particle.bubbleOpacity = undefined;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (p_obj_bubble != undefined) {\n\t\t\t\t\t\t\t\tlet value_tmp: any =\n\t\t\t\t\t\t\t\t\tp_obj -\n\t\t\t\t\t\t\t\t\t(timeSpent * (p_obj - bubble_param)) /\n\t\t\t\t\t\t\t\t\t\tinteractivity.modes.bubble.duration;\n\t\t\t\t\t\t\t\tlet dif: any = bubble_param - value_tmp;\n\t\t\t\t\t\t\t\tlet value: any = bubble_param + dif;\n\t\t\t\t\t\t\t\tif (id == \"size\") particle.radius_bubble = value;\n\t\t\t\t\t\t\t\tif (id == \"opacity\") particle.bubbleOpacity = value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif (this.bubble_clicking) {\n\t\t\t\t\tprocess(\n\t\t\t\t\t\tinteractivity.modes.bubble.size,\n\t\t\t\t\t\tparticles.size.value,\n\t\t\t\t\t\tparticle.radius_bubble,\n\t\t\t\t\t\tparticle.radius,\n\t\t\t\t\t\t\"size\"\n\t\t\t\t\t);\n\t\t\t\t\tprocess(\n\t\t\t\t\t\tinteractivity.modes.bubble.opacity,\n\t\t\t\t\t\tparticles.opacity.value,\n\t\t\t\t\t\tparticle.bubbleOpacity,\n\t\t\t\t\t\tparticle.opacityValue,\n\t\t\t\t\t\t\"opacity\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trepulseParticle(particle: Particle) {\n\t\tconst { canvas } = this.library;\n\t\tconst interactivity = this.library.getParameter(p => p.interactivity);\n\t\tconst particles = this.library.getParameter(p => p.particles);\n\n\t\tif (\n\t\t\tinteractivity.events.onhover.enable &&\n\t\t\tisInArray(InteractivityMode.REPULSE, interactivity.events.onhover.mode) &&\n\t\t\tthis.library.interactivity.mouseStatus ===\n\t\t\t\tMouseInteractivityStatus.MOUSEMOVE\n\t\t) {\n\t\t\tconst {\n\t\t\t\tdistance,\n\t\t\t\tdistanceX,\n\t\t\t\tdistanceY\n\t\t\t} = this.library.manager.getDistances(\n\t\t\t\tparticle,\n\t\t\t\tthis.library.interactivity.mouseMovePosition\n\t\t\t);\n\n\t\t\tlet normVec: any = { x: distanceX / distance, y: distanceY / distance };\n\t\t\tlet repulseRadius: number = interactivity.modes.repulse.distance;\n\t\t\tlet velocity: number = 100;\n\t\t\tlet repulseFactor: number = clamp(\n\t\t\t\t(1 / repulseRadius) *\n\t\t\t\t\t(-1 * Math.pow(distance / repulseRadius, 2) + 1) *\n\t\t\t\t\trepulseRadius *\n\t\t\t\t\tvelocity,\n\t\t\t\t0,\n\t\t\t\t50\n\t\t\t);\n\n\t\t\tlet pos: TPoint = {\n\t\t\t\tx: particle.x + normVec.x * repulseFactor,\n\t\t\t\ty: particle.y + normVec.y * repulseFactor\n\t\t\t};\n\n\t\t\tif (particles.move.out_mode === MoveOutMode.BOUNCE) {\n\t\t\t\tif (\n\t\t\t\t\tpos.x - particle.radius > 0 &&\n\t\t\t\t\tpos.x + particle.radius < canvas.width\n\t\t\t\t)\n\t\t\t\t\tparticle.x = pos.x;\n\t\t\t\tif (\n\t\t\t\t\tpos.y - particle.radius > 0 &&\n\t\t\t\t\tpos.y + particle.radius < canvas.height\n\t\t\t\t)\n\t\t\t\t\tparticle.y = pos.y;\n\t\t\t} else {\n\t\t\t\tparticle.x = pos.x;\n\t\t\t\tparticle.y = pos.y;\n\t\t\t}\n\t\t} else if (\n\t\t\tinteractivity.events.onclick.enable &&\n\t\t\tisInArray(InteractivityMode.REPULSE, interactivity.events.onclick.mode)\n\t\t) {\n\t\t\tif (!this.repulse_finish) {\n\t\t\t\tthis.repulse_count++;\n\t\t\t\tif (this.repulse_count == particles.array.length)\n\t\t\t\t\tthis.repulse_finish = true;\n\t\t\t}\n\n\t\t\tif (this.repulse_clicking) {\n\t\t\t\tconst repulseRadius = Math.pow(\n\t\t\t\t\tinteractivity.modes.repulse.distance / 6,\n\t\t\t\t\t3\n\t\t\t\t);\n\t\t\t\tconst {\n\t\t\t\t\tdistance,\n\t\t\t\t\tdistanceX,\n\t\t\t\t\tdistanceY\n\t\t\t\t} = this.library.manager.getDistances(\n\t\t\t\t\tthis.library.interactivity.mouseClickPosition,\n\t\t\t\t\tparticle\n\t\t\t\t);\n\n\t\t\t\tconst force = repulseRadius / Math.pow(distance, 2);\n\n\t\t\t\tconst repulsion = force * -1;\n\n\t\t\t\tif (distance <= repulseRadius) {\n\t\t\t\t\tconst f = Math.atan2(distanceY, distanceX);\n\t\t\t\t\tparticle.vx = repulsion * Math.cos(f);\n\t\t\t\t\tparticle.vy = repulsion * Math.sin(f);\n\t\t\t\t\tif (particles.move.out_mode === MoveOutMode.BOUNCE) {\n\t\t\t\t\t\tconst pos: TPoint = {\n\t\t\t\t\t\t\tx: particle.x + particle.vx,\n\t\t\t\t\t\t\ty: particle.y + particle.vy\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (pos.x + particle.radius > canvas.width)\n\t\t\t\t\t\t\tparticle.vx = -particle.vx;\n\t\t\t\t\t\telse if (pos.x - particle.radius < 0) particle.vx = -particle.vx;\n\t\t\t\t\t\tif (pos.y + particle.radius > canvas.height)\n\t\t\t\t\t\t\tparticle.vy = -particle.vy;\n\t\t\t\t\t\telse if (pos.y - particle.radius < 0) particle.vy = -particle.vy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.repulse_clicking === false) {\n\t\t\t\t\tparticle.vx = particle.vx_i;\n\t\t\t\t\tparticle.vy = particle.vy_i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgrabParticle(particle: Particle): void {\n\t\tlet { canvas } = this.library;\n\n\t\tlet { interactivity, particles } = this.library.getParameter(p => p);\n\n\t\tif (\n\t\t\tinteractivity.events.onhover.enable &&\n\t\t\tthis.library.interactivity.mouseStatus ===\n\t\t\t\tMouseInteractivityStatus.MOUSEMOVE\n\t\t) {\n\t\t\tconst distance = this.library.manager.getDistance(\n\t\t\t\tparticle,\n\t\t\t\tthis.library.interactivity.mouseMovePosition\n\t\t\t);\n\n\t\t\tif (distance <= interactivity.modes.grab.distance) {\n\t\t\t\tlet { grab } = interactivity.modes;\n\n\t\t\t\tlet opacity_line: number =\n\t\t\t\t\tgrab.line_linked.opacity -\n\t\t\t\t\tdistance / (1 / grab.line_linked.opacity) / grab.distance;\n\n\t\t\t\tif (opacity_line > 0) {\n\t\t\t\t\tlet color_line: {\n\t\t\t\t\t\tr: number;\n\t\t\t\t\t\tg: number;\n\t\t\t\t\t\tb: number;\n\t\t\t\t\t} = particles.line_linked.color_rgb_line;\n\t\t\t\t\tlet { r, g, b } = color_line;\n\t\t\t\t\tcanvas.ctx.strokeStyle = `rgba( ${r}, ${g}, ${b}, ${opacity_line} )`;\n\t\t\t\t\tcanvas.ctx.lineWidth = particles.line_linked.width;\n\n\t\t\t\t\tcanvas.ctx.beginPath();\n\t\t\t\t\tcanvas.ctx.moveTo(particle.x, particle.y);\n\t\t\t\t\tcanvas.ctx.lineTo(\n\t\t\t\t\t\tthis.library.interactivity.mouseMovePosition.x,\n\t\t\t\t\t\tthis.library.interactivity.mouseMovePosition.y\n\t\t\t\t\t);\n\t\t\t\t\tcanvas.ctx.stroke();\n\t\t\t\t\tcanvas.ctx.closePath();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import { hexToRgb, IParams, ParticlesLibrary, getColor } from \".\";\nimport {\n\tMoveDirection,\n\tShapeType,\n\tPolygonType,\n\tPolygonInlineArrangementType,\n\tIParticleSizeDefinition,\n\tIParticleColorDefinition,\n\tIParticleOpacityDefinition,\n\tIParticleMoveDefinition,\n\tIPolygonDefinition,\n\tIParticleShapeDefinition\n} from \"./IParams\";\nimport { IParsedColor, TPoint, deepAssign } from \"./Utils\";\nimport {\n\tImageManager,\n\tIShapeDefinitionEnhanced,\n\tIImageDefinitionEnhanced\n} from \"./ImageManager\";\n\nexport type ParticleParams = {\n\tcolor?: IParticleColorDefinition;\n\tmove?: IParticleMoveDefinition;\n\topacity?: IParticleOpacityDefinition;\n\tpolygon?: IPolygonDefinition;\n\tposition?: TPoint;\n\tshape?: IParticleShapeDefinition;\n\tsize?: IParticleSizeDefinition;\n};\n\nexport default class Particle {\n\tlibrary: ParticlesLibrary;\n\n\tradius: number;\n\tradius_bubble: number;\n\tsize_status: boolean;\n\tvs: number;\n\n\tx: number;\n\ty: number;\n\n\tcolor: IParsedColor;\n\n\topacityValue: number;\n\tbubbleOpacity: number;\n\topacity_status: boolean;\n\tvo: number;\n\n\tvx: number;\n\tvy: number;\n\n\tvx_i: number;\n\tvy_i: number;\n\n\tshapeImage: IImageDefinitionEnhanced;\n\n\tinitialPosition: TPoint;\n\tshape: IParticleShapeDefinition;\n\n\tconstructor(\n\t\tlibrary: ParticlesLibrary,\n\t\t{\n\t\t\tcolor,\n\t\t\tmove,\n\t\t\topacity,\n\t\t\tpolygon,\n\t\t\tposition,\n\t\t\tshape,\n\t\t\tsize\n\t\t}: ParticleParams = {}\n\t) {\n\t\tthis.library = library;\n\t\tthis.setupSize(size);\n\t\tthis.setupPosition(move, polygon, position);\n\t\tthis.setupColor(color);\n\t\tthis.setupOpacity(opacity);\n\t\tthis.setupAnimation(move);\n\t\tthis.setupShape(shape);\n\t}\n\n\tsetupSize(size?: IParticleSizeDefinition): void {\n\t\tconst defaultSize = this.library.getParameter(p => p.particles.size);\n\t\tsize = deepAssign({}, defaultSize, size);\n\t\tthis.radius = (size.random ? Math.random() : 1) * size.value;\n\t\tif (size.anim.enable) {\n\t\t\tthis.size_status = false;\n\t\t\tthis.vs = size.anim.speed / 100;\n\t\t\tif (!size.anim.sync) this.vs = this.vs * Math.random();\n\t\t}\n\t}\n\n\tsetupPosition(\n\t\tmove?: IParticleMoveDefinition,\n\t\tpolygon?: IPolygonDefinition,\n\t\tposition?: TPoint\n\t): void {\n\t\tthis.initialPosition = position;\n\t\tconst defaultMove = this.library.getParameter(p => p.particles.move);\n\t\tmove = deepAssign({}, defaultMove, move);\n\t\tconst defaultPolygon = this.library.getParameter(p => p.polygon);\n\t\tpolygon = deepAssign({}, defaultPolygon, polygon);\n\t\tconst particlesArray = this.library.getParameter(p => p.particles.array);\n\n\t\tconst { canvas, vendors } = this.library;\n\n\t\tif (position) {\n\t\t\tthis.x = position.x;\n\t\t\tthis.y = position.y;\n\t\t} else {\n\t\t\tif (polygon.enable) {\n\t\t\t\tlet randomPosition: TPoint;\n\t\t\t\tswitch (polygon.type) {\n\t\t\t\t\tcase PolygonType.INLINE:\n\t\t\t\t\t\tswitch (polygon.inline.arrangement) {\n\t\t\t\t\t\t\tcase PolygonInlineArrangementType.RANDOM_POINT:\n\t\t\t\t\t\t\t\trandomPosition = this.library.polygonMask.getRandomPointOnPolygonPath();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase PolygonInlineArrangementType.RANDOM_LENGTH:\n\t\t\t\t\t\t\t\trandomPosition = this.library.polygonMask.getRandomPointOnPolygonPathByLength();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase PolygonInlineArrangementType.EQUIDISTANT:\n\t\t\t\t\t\t\t\trandomPosition = this.library.polygonMask.getEquidistantPoingOnPolygonPathByIndex(\n\t\t\t\t\t\t\t\t\tparticlesArray.length\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase PolygonInlineArrangementType.ONE_PER_POINT:\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\trandomPosition = this.library.polygonMask.getPoingOnPolygonPathByIndex(\n\t\t\t\t\t\t\t\t\tparticlesArray.length\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase PolygonType.INSIDE:\n\t\t\t\t\t\trandomPosition = this.library.polygonMask.getRandomPointInsidePolygonPath();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase PolygonType.OUTSIDE:\n\t\t\t\t\t\trandomPosition = this.library.polygonMask.getRandomPointOutsidePolygonPath();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (randomPosition) {\n\t\t\t\t\tthis.x = randomPosition.x;\n\t\t\t\t\tthis.y = randomPosition.y;\n\t\t\t\t\tthis.initialPosition = { x: this.x, y: this.y };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.x === undefined || this.y === undefined) {\n\t\t\tthis.x = Math.random() * canvas.width;\n\t\t\tthis.y = Math.random() * canvas.height;\n\t\t}\n\n\t\tif (this.x > canvas.width - this.radius * 2) {\n\t\t\tthis.x = this.x - this.radius;\n\t\t} else if (this.x < this.radius * 2) {\n\t\t\tthis.x = this.x + this.radius;\n\t\t}\n\t\tif (this.y > canvas.height - this.radius * 2) {\n\t\t\tthis.y = this.y - this.radius;\n\t\t} else if (this.y < this.radius * 2) {\n\t\t\tthis.y = this.y + this.radius;\n\t\t}\n\n\t\tif (move.bounce) {\n\t\t\tvendors.checkOverlap(this, { x: this.x, y: this.y });\n\t\t}\n\t}\n\n\tsetupColor(color?: IParticleColorDefinition) {\n\t\tconst defaultColor = this.library.getParameter(p => p.particles.color);\n\t\tcolor = deepAssign({}, color, defaultColor);\n\n\t\tthis.color = getColor(color.value);\n\t}\n\n\tsetupOpacity(opacity?: IParticleOpacityDefinition) {\n\t\tconst defaultOpacity = this.library.getParameter(p => p.particles.opacity);\n\t\topacity = deepAssign({}, defaultOpacity, opacity);\n\n\t\tthis.opacityValue = (opacity.random ? Math.random() : 1) * opacity.value;\n\t\tif (opacity.anim.enable) {\n\t\t\tthis.opacity_status = false;\n\t\t\tthis.vo = opacity.anim.speed / 100;\n\t\t\tif (!opacity.anim.sync) {\n\t\t\t\tthis.vo = this.vo * Math.random();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetupAnimation(move?: IParticleMoveDefinition) {\n\t\tconst defaultMove = this.library.getParameter(p => p.particles.move);\n\t\tmove = deepAssign({}, defaultMove, move);\n\n\t\tlet baseVelocity: TPoint;\n\t\tswitch (move.direction) {\n\t\t\tcase MoveDirection.TOP:\n\t\t\t\tbaseVelocity = { x: 0, y: -1 };\n\t\t\t\tbreak;\n\t\t\tcase MoveDirection.TOP_RIGHT:\n\t\t\t\tbaseVelocity = { x: 0.5, y: -0.5 };\n\t\t\t\tbreak;\n\t\t\tcase MoveDirection.RIGHT:\n\t\t\t\tbaseVelocity = { x: 1, y: 0 };\n\t\t\t\tbreak;\n\t\t\tcase MoveDirection.BOTTOM_RIGHT:\n\t\t\t\tbaseVelocity = { x: 0.5, y: 0.5 };\n\t\t\t\tbreak;\n\t\t\tcase MoveDirection.BOTTOM:\n\t\t\t\tbaseVelocity = { x: 0, y: 1 };\n\t\t\t\tbreak;\n\t\t\tcase MoveDirection.BOTTOM_LEFT:\n\t\t\t\tbaseVelocity = { x: -0.5, y: 1 };\n\t\t\t\tbreak;\n\t\t\tcase MoveDirection.LEFT:\n\t\t\t\tbaseVelocity = { x: -1, y: 0 };\n\t\t\t\tbreak;\n\t\t\tcase MoveDirection.TOP_LEFT:\n\t\t\t\tbaseVelocity = { x: -0.5, y: -0.5 };\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbaseVelocity = { x: 0, y: 0 };\n\t\t\t\tbreak;\n\t\t}\n\t\tif (move.straight) {\n\t\t\tthis.vx = baseVelocity.x;\n\t\t\tthis.vy = baseVelocity.y;\n\t\t\tif (move.random) {\n\t\t\t\tthis.vx = this.vx * Math.random();\n\t\t\t\tthis.vy = this.vy * Math.random();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.vx = baseVelocity.x + Math.random() - 0.5;\n\t\t\tthis.vy = baseVelocity.y + Math.random() - 0.5;\n\t\t}\n\n\t\tthis.vx_i = this.vx;\n\t\tthis.vy_i = this.vy;\n\t}\n\n\tsetupShape(shape?: IParticleShapeDefinition) {\n\t\tconst defaultShape = this.library.getParameter(p => p.particles.shape);\n\t\tshape = deepAssign({}, defaultShape, shape);\n\t\tconst particlesArray = this.library.getParameter(p => p.particles.array);\n\n\t\tif (Array.isArray(shape.type)) {\n\t\t\tlet selectedShape =\n\t\t\t\tshape.type[Math.floor(Math.random() * shape.type.length)];\n\t\t\tshape = deepAssign({}, shape, { type: selectedShape });\n\t\t}\n\n\t\tthis.shape = shape;\n\n\t\tif (shape.type === ShapeType.IMAGE || shape.type === ShapeType.IMAGES) {\n\t\t\tif (shape.type === ShapeType.IMAGES) {\n\t\t\t\tthis.shapeImage = this.library.imageManager.getImage(\n\t\t\t\t\tparticlesArray.length\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.shapeImage = this.library.imageManager.getImage();\n\t\t\t}\n\t\t\tif (\n\t\t\t\tthis.shapeImage.type === \"svg\" &&\n\t\t\t\tthis.shapeImage.svgData !== undefined\n\t\t\t) {\n\t\t\t\tthis.library.imageManager\n\t\t\t\t\t.createSvgImage(this.shapeImage.svgData, {\n\t\t\t\t\t\tcolor: this.color,\n\t\t\t\t\t\topacity: this.opacityValue\n\t\t\t\t\t})\n\t\t\t\t\t.then(image => {\n\t\t\t\t\t\tthis.shapeImage.elementData = image;\n\t\t\t\t\t\tthis.shapeImage.loaded = true;\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tdraw(): void {\n\t\tlet { canvas, vendors } = this.library;\n\n\t\tlet radius: number;\n\t\tif (this.radius_bubble !== undefined) {\n\t\t\tradius = this.radius_bubble;\n\t\t} else {\n\t\t\tradius = this.radius;\n\t\t}\n\n\t\tlet opacityValue: number;\n\t\tif (this.bubbleOpacity !== undefined) {\n\t\t\topacityValue = this.bubbleOpacity;\n\t\t} else {\n\t\t\topacityValue = this.opacityValue;\n\t\t}\n\n\t\tlet colorValue: string;\n\t\tif (this.color.rgb) {\n\t\t\tlet { r, g, b } = this.color.rgb;\n\t\t\tcolorValue = `rgba( ${r}, ${g}, ${b}, ${opacityValue} )`;\n\t\t} else {\n\t\t\tlet { h, s, l } = this.color.hsl;\n\t\t\tcolorValue = `hsla( ${h}, ${s}, ${l}, ${opacityValue} )`;\n\t\t}\n\n\t\tcanvas.ctx.fillStyle = colorValue;\n\t\tcanvas.ctx.beginPath();\n\n\t\tswitch (this.shape.type) {\n\t\t\tcase ShapeType.CIRCLE:\n\t\t\t\tcanvas.ctx.arc(this.x, this.y, radius, 0, Math.PI * 2, false);\n\t\t\t\tbreak;\n\n\t\t\tcase ShapeType.EDGE:\n\t\t\t\tcanvas.ctx.rect(\n\t\t\t\t\tthis.x - radius,\n\t\t\t\t\tthis.y - radius,\n\t\t\t\t\tradius * 2,\n\t\t\t\t\tradius * 2\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase ShapeType.TRIANGLE:\n\t\t\t\tvendors.drawShape(\n\t\t\t\t\tcanvas.ctx,\n\t\t\t\t\tthis.x - radius,\n\t\t\t\t\tthis.y + radius / 1.66,\n\t\t\t\t\tradius * 2,\n\t\t\t\t\t3,\n\t\t\t\t\t2\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase ShapeType.POLYGON:\n\t\t\t\tvendors.drawShape(\n\t\t\t\t\tcanvas.ctx,\n\t\t\t\t\tthis.x - radius / (this.shape.polygon.nb_sides / 3.5),\n\t\t\t\t\tthis.y - radius / (2.66 / 3.5),\n\t\t\t\t\t(radius * 2.66) / (this.shape.polygon.nb_sides / 3),\n\t\t\t\t\tthis.shape.polygon.nb_sides,\n\t\t\t\t\t1\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase ShapeType.STAR:\n\t\t\t\tvendors.drawShape(\n\t\t\t\t\tcanvas.ctx,\n\t\t\t\t\tthis.x - (radius * 2) / (this.shape.polygon.nb_sides / 4),\n\t\t\t\t\tthis.y - radius / ((2 * 2.66) / 3.5),\n\t\t\t\t\t(radius * 2 * 2.66) / (this.shape.polygon.nb_sides / 3),\n\t\t\t\t\tthis.shape.polygon.nb_sides,\n\t\t\t\t\t2\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase ShapeType.IMAGES:\n\t\t\tcase ShapeType.IMAGE:\n\t\t\t\tif (this.shapeImage.elementData) {\n\t\t\t\t\tcanvas.ctx.drawImage(\n\t\t\t\t\t\tthis.shapeImage.elementData,\n\t\t\t\t\t\tthis.x - radius,\n\t\t\t\t\t\tthis.y - radius,\n\t\t\t\t\t\tradius * 2,\n\t\t\t\t\t\t(radius * 2) / this.shapeImage.ratio\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tcanvas.ctx.closePath();\n\n\t\tif (this.shape.stroke.width > 0) {\n\t\t\tcanvas.ctx.strokeStyle = this.shape.stroke.color;\n\t\t\tcanvas.ctx.lineWidth = this.shape.stroke.width;\n\t\t\tcanvas.ctx.stroke();\n\t\t}\n\n\t\tcanvas.ctx.fill();\n\t}\n}\n","import {\n\tIParams,\n\tParticle,\n\tInteractivity,\n\tisInArray,\n\tModes,\n\tParticlesLibrary,\n\tVendors,\n\tTPoint\n} from \".\";\nimport { ImageManager } from \"./ImageManager\";\nimport {\n\tPolygonType,\n\tPolygonMoveType,\n\tPolygonInlineArrangementType\n} from \"./IParams\";\n\nexport default class ParticleManager {\n\tconstructor(private library: ParticlesLibrary) {\n\t\tthis.particlesCreate = this.particlesCreate.bind(this);\n\t}\n\n\tparticlesCreate(): void {\n\t\tconst particles = this.library.getParameter(p => p.particles);\n\t\tconst polygon = this.library.getParameter(p => p.polygon);\n\n\t\tlet particlesNumber = particles.number.value;\n\t\tif (\n\t\t\tpolygon.enable &&\n\t\t\tpolygon.type === PolygonType.INLINE &&\n\t\t\tpolygon.inline.arrangement === PolygonInlineArrangementType.ONE_PER_POINT\n\t\t) {\n\t\t\tparticlesNumber = this.library.polygonMask.getVerticesNumber();\n\t\t}\n\t\tfor (let i = 0; i < particlesNumber; i++) {\n\t\t\tparticles.array.push(new Particle(this.library));\n\t\t}\n\t}\n\n\tparticlesUpdate(): void {\n\t\tlet { canvas, modes } = this.library;\n\n\t\tconst interactivity = this.library.getParameter(p => p.interactivity);\n\t\tconst particles = this.library.getParameter(p => p.particles);\n\t\tconst polygon = this.library.getParameter(p => p.polygon);\n\n\t\tparticles.array.forEach((particle, i) => {\n\t\t\tif (particles.move.enable) {\n\t\t\t\tlet ms = particles.move.speed / 2;\n\t\t\t\tparticle.x += particle.vx * ms;\n\t\t\t\tparticle.y += particle.vy * ms;\n\t\t\t}\n\n\t\t\tif (particles.opacity.anim.enable) {\n\t\t\t\tif (particle.opacity_status == true) {\n\t\t\t\t\tif (particle.opacityValue >= particles.opacity.value)\n\t\t\t\t\t\tparticle.opacity_status = false;\n\t\t\t\t\tparticle.opacityValue += particle.vo;\n\t\t\t\t} else {\n\t\t\t\t\tif (particle.opacityValue <= particles.opacity.anim.opacity_min)\n\t\t\t\t\t\tparticle.opacity_status = true;\n\t\t\t\t\tparticle.opacityValue -= particle.vo;\n\t\t\t\t}\n\t\t\t\tif (particle.opacityValue < 0) particle.opacityValue = 0;\n\t\t\t}\n\n\t\t\tif (particles.size.anim.enable) {\n\t\t\t\tif (particle.size_status == true) {\n\t\t\t\t\tif (particle.radius >= particles.size.value)\n\t\t\t\t\t\tparticle.size_status = false;\n\t\t\t\t\tparticle.radius += particle.vs;\n\t\t\t\t} else {\n\t\t\t\t\tif (particle.radius <= particles.size.anim.size_min)\n\t\t\t\t\t\tparticle.size_status = true;\n\t\t\t\t\tparticle.radius -= particle.vs;\n\t\t\t\t}\n\t\t\t\tif (particle.radius < 0) particle.radius = 0;\n\t\t\t}\n\n\t\t\ttype Pos = {\n\t\t\t\tx_left: number;\n\t\t\t\tx_right: number;\n\t\t\t\ty_top: number;\n\t\t\t\ty_bottom: number;\n\t\t\t};\n\t\t\tlet new_pos: Pos;\n\n\t\t\tif (particles.move.out_mode == \"bounce\") {\n\t\t\t\tnew_pos = {\n\t\t\t\t\tx_left: particle.radius,\n\t\t\t\t\tx_right: canvas.width,\n\t\t\t\t\ty_top: particle.radius,\n\t\t\t\t\ty_bottom: canvas.height\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tnew_pos = {\n\t\t\t\t\tx_left: -particle.radius,\n\t\t\t\t\tx_right: canvas.width + particle.radius,\n\t\t\t\t\ty_top: -particle.radius,\n\t\t\t\t\ty_bottom: canvas.height + particle.radius\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (particle.x - particle.radius > canvas.width) {\n\t\t\t\tparticle.x = new_pos.x_left;\n\t\t\t\tparticle.y = Math.random() * canvas.height;\n\t\t\t} else if (particle.x + particle.radius < 0) {\n\t\t\t\tparticle.x = new_pos.x_right;\n\t\t\t\tparticle.y = Math.random() * canvas.height;\n\t\t\t}\n\n\t\t\tif (particle.y - particle.radius > canvas.height) {\n\t\t\t\tparticle.y = new_pos.y_top;\n\t\t\t\tparticle.x = Math.random() * canvas.width;\n\t\t\t} else if (particle.y + particle.radius < 0) {\n\t\t\t\tparticle.y = new_pos.y_bottom;\n\t\t\t\tparticle.x = Math.random() * canvas.width;\n\t\t\t}\n\n\t\t\tswitch (particles.move.out_mode) {\n\t\t\t\tcase \"bounce\":\n\t\t\t\t\t{\n\t\t\t\t\t\tif (polygon.enable) {\n\t\t\t\t\t\t\tconst moveRadius = polygon.move.radius;\n\t\t\t\t\t\t\tswitch (polygon.type) {\n\t\t\t\t\t\t\t\tcase PolygonType.INLINE:\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tthis.getDistance(particle.initialPosition, particle) >\n\t\t\t\t\t\t\t\t\t\tmoveRadius\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tparticle.vx = -particle.vx + particle.vy / 2;\n\t\t\t\t\t\t\t\t\t\tparticle.vy = -particle.vy + particle.vx / 2;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase PolygonType.INSIDE:\n\t\t\t\t\t\t\t\tcase PolygonType.OUTSIDE:\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tconst mode = polygon.move.type;\n\t\t\t\t\t\t\t\t\t\tif (mode === PolygonMoveType.RADIUS) {\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tthis.getDistance(particle.initialPosition, particle) >\n\t\t\t\t\t\t\t\t\t\t\t\tmoveRadius\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\tparticle.vx = -particle.vx + particle.vy / 2;\n\t\t\t\t\t\t\t\t\t\t\t\tparticle.vy = -particle.vy + particle.vx / 2;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else if (mode === PolygonMoveType.PATH) {\n\t\t\t\t\t\t\t\t\t\t\tconst shouldBeInside =\n\t\t\t\t\t\t\t\t\t\t\t\tpolygon.type === PolygonType.INSIDE;\n\t\t\t\t\t\t\t\t\t\t\tconst isInside = this.library.polygonMask.isPointInsidePolygon(\n\t\t\t\t\t\t\t\t\t\t\t\t{ x: particle.x, y: particle.y }\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t(shouldBeInside && !isInside) ||\n\t\t\t\t\t\t\t\t\t\t\t\t(!shouldBeInside && isInside)\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\tparticle.vx = -particle.vx + particle.vy / 2;\n\t\t\t\t\t\t\t\t\t\t\t\tparticle.vy = -particle.vy + particle.vx / 2;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (particle.x + particle.radius > canvas.width)\n\t\t\t\t\t\t\t\tparticle.vx = -particle.vx;\n\t\t\t\t\t\t\telse if (particle.x - particle.radius < 0)\n\t\t\t\t\t\t\t\tparticle.vx = -particle.vx;\n\t\t\t\t\t\t\tif (particle.y + particle.radius > canvas.height)\n\t\t\t\t\t\t\t\tparticle.vy = -particle.vy;\n\t\t\t\t\t\t\telse if (particle.y - particle.radius < 0)\n\t\t\t\t\t\t\t\tparticle.vy = -particle.vy;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (isInArray(\"grab\", interactivity.events.onhover.mode)) {\n\t\t\t\tmodes.grabParticle(particle);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tisInArray(\"bubble\", interactivity.events.onhover.mode) ||\n\t\t\t\tisInArray(\"bubble\", interactivity.events.onclick.mode)\n\t\t\t) {\n\t\t\t\tmodes.bubbleParticle(particle);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tisInArray(\"repulse\", interactivity.events.onhover.mode) ||\n\t\t\t\tisInArray(\"repulse\", interactivity.events.onclick.mode)\n\t\t\t) {\n\t\t\t\tmodes.repulseParticle(particle);\n\t\t\t}\n\n\t\t\tif (particles.line_linked.enable || particles.move.attract.enable) {\n\t\t\t\tfor (let j = i + 1; j < particles.array.length; j++) {\n\t\t\t\t\tlet link = particles.array[j];\n\n\t\t\t\t\tif (particles.line_linked.enable)\n\t\t\t\t\t\tthis.library.interactivity.linkParticles(particle, link);\n\n\t\t\t\t\tif (particles.move.attract.enable)\n\t\t\t\t\t\tthis.library.interactivity.attractParticles(particle, link);\n\n\t\t\t\t\tif (particles.move.bounce)\n\t\t\t\t\t\tthis.library.interactivity.bounceParticles(particle, link);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetDistances(\n\t\tp1: TPoint,\n\t\tp2: TPoint\n\t): { distance: number; distanceX: number; distanceY: number } {\n\t\tconst distanceX = p1.x - p2.x;\n\t\tconst distanceY = p1.y - p2.y;\n\t\tconst distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n\t\treturn { distance, distanceX, distanceY };\n\t}\n\n\tgetDistance(p1: TPoint, p2: TPoint): number {\n\t\treturn this.getDistances(p1, p2).distance;\n\t}\n\n\tparticlesDraw(): void {\n\t\tlet { canvas, manager } = this.library;\n\n\t\tconst particles = this.library.getParameter(p => p.particles);\n\t\tconst polygon = this.library.getParameter(p => p.polygon);\n\n\t\tcanvas.ctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\tmanager.particlesUpdate();\n\n\t\tparticles.array.forEach((particle: Particle) => {\n\t\t\tparticle.draw();\n\t\t});\n\n\t\tif (polygon.enable && polygon.draw.enable)\n\t\t\tthis.library.polygonMask.drawPolygon();\n\t}\n\n\tparticlesEmpty(): void {\n\t\tconst particles = this.library.getParameter(p => p.particles);\n\t\tparticles.array = [];\n\t}\n\n\tparticlesRefresh(): void {\n\t\tcancelAnimationFrame(this.library.drawAnimFrame);\n\t\tthis.particlesEmpty();\n\t\tthis.library.canvasClear();\n\t\tthis.library.start();\n\t}\n}\n","import {\n\tICanvasParam,\n\tIParams,\n\tdeepAssign,\n\tgetDefaultParams,\n\tInteractivity,\n\tModes,\n\tParticle,\n\tParticleManager,\n\tVendors,\n\tPolygonMask,\n\tRecursivePartial\n} from \".\";\nimport { ImageManager } from \"./ImageManager\";\n\nexport default class ParticlesLibrary {\n\tcanvas: ICanvasParam;\n\tparams: IParams;\n\n\tmanager: ParticleManager;\n\tinteractivity: Interactivity;\n\tmodes: Modes;\n\tvendors: Vendors;\n\tpolygonMask: PolygonMask;\n\n\timageManager = new ImageManager();\n\n\tretina = false;\n\n\tdrawAnimFrame: number;\n\n\tconstructor(params?: any) {\n\t\tthis.onWindowResize = this.onWindowResize.bind(this);\n\t\tthis.loadParameters(params);\n\t\tthis.interactivity = new Interactivity(this);\n\t\tthis.modes = new Modes(this);\n\t\tthis.vendors = new Vendors(this.imageManager, this.params, this);\n\t\tthis.manager = new ParticleManager(this);\n\t\tthis.polygonMask = new PolygonMask(this);\n\t}\n\n\tgetParameter<T>(selector: (params: IParams) => T): T {\n\t\treturn selector(this.params);\n\t}\n\n\tsetParameters(params: RecursivePartial<IParams>) {\n\t\tthis.params = deepAssign({ ...this.params }, params);\n\t}\n\n\tloadParameters(params?: any): void {\n\t\tlet mergedParams: IParams = deepAssign({}, getDefaultParams(), params);\n\t\tthis.params = mergedParams;\n\t}\n\n\tloadCanvas(canvasElement: HTMLCanvasElement) {\n\t\tthis.canvas = {\n\t\t\telement: canvasElement,\n\t\t\twidth: canvasElement.offsetWidth,\n\t\t\theight: canvasElement.offsetHeight\n\t\t};\n\t}\n\n\tstart(): void {\n\t\tthis.interactivity.attachEventHandlers();\n\t\tthis.vendors.start();\n\t}\n\n\tdestroy(): void {\n\t\tthis.detachListeners();\n\t\tthis.interactivity.detachEventHandlers();\n\t\tcancelAnimationFrame(this.drawAnimFrame);\n\t\tthis.canvasClear();\n\t}\n\n\tdetachListeners(): void {\n\t\twindow.removeEventListener(\"resize\", this.onWindowResize);\n\t}\n\n\tretinaInit(): void {\n\t\tconst pixelRatio = window.devicePixelRatio;\n\n\t\tif (this.params.retina_detect && pixelRatio > 1) {\n\t\t\tthis.canvas.pxratio = pixelRatio;\n\n\t\t\tthis.canvas.width = this.canvas.element.offsetWidth * this.canvas.pxratio;\n\t\t\tthis.canvas.height =\n\t\t\t\tthis.canvas.element.offsetHeight * this.canvas.pxratio;\n\n\t\t\tthis.retina = true;\n\n\t\t\tconst params = this.getParameter(p => p);\n\n\t\t\tthis.setParameters({\n\t\t\t\tinteractivity: {\n\t\t\t\t\tmodes: {\n\t\t\t\t\t\tbubble: {\n\t\t\t\t\t\t\tdistance: params.interactivity.modes.bubble.distance * pixelRatio,\n\t\t\t\t\t\t\tsize: params.interactivity.modes.bubble.size * pixelRatio\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgrab: {\n\t\t\t\t\t\t\tdistance: params.interactivity.modes.grab.distance * pixelRatio\n\t\t\t\t\t\t},\n\t\t\t\t\t\trepulse: {\n\t\t\t\t\t\t\tdistance: params.interactivity.modes.repulse.distance * pixelRatio\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tparticles: {\n\t\t\t\t\tline_linked: {\n\t\t\t\t\t\tdistance: params.particles.line_linked.distance * pixelRatio,\n\t\t\t\t\t\twidth: params.particles.line_linked.width * pixelRatio\n\t\t\t\t\t},\n\t\t\t\t\tmove: {\n\t\t\t\t\t\tspeed: params.particles.move.speed * pixelRatio\n\t\t\t\t\t},\n\t\t\t\t\tsize: {\n\t\t\t\t\t\tvalue: params.particles.size.value * pixelRatio,\n\t\t\t\t\t\tanim: {\n\t\t\t\t\t\t\tspeed: params.particles.size.anim.speed * pixelRatio\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tthis.canvas.pxratio = 1;\n\t\t\tthis.retina = false;\n\t\t}\n\t}\n\n\tcanvasInit(): void {\n\t\tlet { canvas } = this;\n\n\t\tcanvas.ctx = canvas.element.getContext(\"2d\");\n\t}\n\n\tcanvasSize(): void {\n\t\tlet { canvas } = this;\n\n\t\tcanvas.element.width = canvas.width;\n\t\tcanvas.element.height = canvas.height;\n\n\t\tif (this.params && this.params.interactivity.events.resize) {\n\t\t\twindow.addEventListener(\"resize\", this.onWindowResize);\n\t\t}\n\t}\n\n\tcanvasPaint(): void {\n\t\tlet { canvas } = this;\n\t\tif (canvas && canvas.ctx) {\n\t\t\ttry {\n\t\t\t\tcanvas.ctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(e);\n\t\t\t}\n\t\t}\n\t}\n\n\tcanvasClear(): void {\n\t\tlet { canvas } = this;\n\t\tif (canvas && canvas.ctx) {\n\t\t\ttry {\n\t\t\t\tcanvas.ctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(e);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic onWindowResize(): void {\n\t\tlet { canvas, manager, vendors } = this;\n\n\t\tcanvas.width = canvas.element.offsetWidth;\n\t\tcanvas.height = canvas.element.offsetHeight;\n\n\t\tif (this.retina) {\n\t\t\tcanvas.width *= canvas.pxratio;\n\t\t\tcanvas.height *= canvas.pxratio;\n\t\t}\n\n\t\tcanvas.element.width = canvas.width;\n\t\tcanvas.element.height = canvas.height;\n\n\t\tif (!this.params.particles.move.enable || this.params.polygon.enable) {\n\t\t\tmanager.particlesEmpty();\n\t\t\tthis.polygonMask\n\t\t\t\t.initialize(this.getParameter(p => p.polygon))\n\t\t\t\t.then(() => {\n\t\t\t\t\tmanager.particlesCreate();\n\t\t\t\t\tmanager.particlesDraw();\n\t\t\t\t\t\n\t\t\t\t});\n\t\t} else {\n\t\t\tvendors.densityAutoParticles();\n\t\t}\n\t}\n}\n","import { ParticlesLibrary } from \".\";\nimport { TPoint } from \"./Utils\";\nimport { IPolygonDefinition } from \"./IParams\";\n\nexport interface ISVGPolygonData {\n\tpaths: SVGPathElement[];\n\tsvg: SVGSVGElement;\n}\n\ntype TSVGAbsoluteCoordinatesTypes =\n\t| SVGPathSegArcAbs\n\t| SVGPathSegCurvetoCubicAbs\n\t| SVGPathSegCurvetoCubicSmoothAbs\n\t| SVGPathSegCurvetoQuadraticAbs\n\t| SVGPathSegCurvetoQuadraticSmoothAbs\n\t| SVGPathSegLinetoAbs\n\t| SVGPathSegMovetoAbs;\n\ntype TSVGRelativeCoordinatesTypes =\n\t| SVGPathSegArcRel\n\t| SVGPathSegCurvetoCubicRel\n\t| SVGPathSegCurvetoCubicSmoothRel\n\t| SVGPathSegCurvetoQuadraticRel\n\t| SVGPathSegCurvetoQuadraticSmoothRel\n\t| SVGPathSegLinetoRel\n\t| SVGPathSegMovetoRel;\n\nexport class PolygonMask {\n\tprivate lastCanvasHeight: number;\n\tprivate lastCanvasWidth: number;\n\tprivate polygonData: ISVGPolygonData;\n\tprivate polygonHeight: number;\n\tprivate polygonOffsetX: number;\n\tprivate polygonOffsetY: number;\n\tprivate polygonPath: Path2D;\n\tprivate polygonPathLength: number = 0;\n\tprivate polygonRaw: Array<[number, number]>;\n\tprivate polygonWidth: number;\n\n\tprivate initialized = false;\n\tprivate path2DSupported = !!(window as any)[\"Path2D\"];\n\n\tprivate debounceTime = 250;\n\tprivate debounceTimer: NodeJS.Timer;\n\n\tprivate polygon: IPolygonDefinition;\n\n\tconstructor(private library: ParticlesLibrary) {\n\t\tthis.parseSvgPathToPolygon = this.parseSvgPathToPolygon.bind(this);\n\t}\n\n\tinitialize(polygon: IPolygonDefinition): Promise<void> {\n\t\tthis.polygon = polygon;\n\n\t\tif (!polygon.enable) return Promise.resolve();\n\t\tif (!this.initialized) {\n\t\t\treturn this.parseSvgPathToPolygon().then(_ => {\n\t\t\t\tthis.initialized = true;\n\t\t\t});\n\t\t} else {\n\t\t\treturn new Promise<void>(resolve => {\n\t\t\t\tif (this.debounceTimer) clearTimeout(this.debounceTimer);\n\t\t\t\tthis.debounceTimer = setTimeout(() => {\n\t\t\t\t\tthis.parseSvgPathToPolygon().then(_ => {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t}, this.debounceTime);\n\t\t\t});\n\t\t}\n\t}\n\n\tgetVerticesNumber(): number {\n\t\tif (!this.initialized) return 0;\n\t\treturn this.polygonRaw.length;\n\t}\n\n\tparseSvgPathToPolygon(svgUrl?: string): Promise<Array<[number, number]>> {\n\t\tsvgUrl = svgUrl || this.polygon.url;\n\t\tconst canvasSizeDidNotChange =\n\t\t\tthis.library.canvas.width === this.lastCanvasWidth &&\n\t\t\tthis.library.canvas.height === this.lastCanvasHeight;\n\t\tif (this.polygonRaw && this.polygonRaw.length && canvasSizeDidNotChange)\n\t\t\treturn Promise.resolve(this.polygonRaw);\n\t\treturn this.parseSvgPath(svgUrl).then(polygonData => {\n\t\t\tthis.polygonData = polygonData;\n\t\t\tthis.polygonWidth =\n\t\t\t\tparseInt(this.polygonData.svg.getAttribute(\"width\")) *\n\t\t\t\tthis.polygon.scale;\n\t\t\tthis.polygonHeight =\n\t\t\t\tparseInt(this.polygonData.svg.getAttribute(\"height\")) *\n\t\t\t\tthis.polygon.scale;\n\t\t\tthis.polygonOffsetX =\n\t\t\t\tthis.library.canvas.width / 2 - this.polygonWidth / 2;\n\t\t\tthis.polygonOffsetY =\n\t\t\t\tthis.library.canvas.height / 2 - this.polygonHeight / 2;\n\t\t\tif (this.polygonData.paths.length) {\n\t\t\t\tthis.polygonPathLength = this.polygonData.paths[0].getTotalLength();\n\t\t\t}\n\t\t\tthis.polygonRaw = [];\n\n\t\t\tthis.polygonData.paths.forEach(path => {\n\t\t\t\tconst pathLength = path.pathSegList.numberOfItems;\n\t\t\t\tfor (let a = 0; a < pathLength; a++) {\n\t\t\t\t\tlet point: { x: number; y: number } = { x: 0, y: 0 };\n\n\t\t\t\t\tconst pathSeg = path.pathSegList.getItem(a);\n\t\t\t\t\tswitch (pathSeg.pathSegType) {\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_ARC_ABS:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_LINETO_ABS:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_MOVETO_ABS:\n\t\t\t\t\t\t\tpoint.x = (pathSeg as TSVGAbsoluteCoordinatesTypes).x;\n\t\t\t\t\t\t\tpoint.y = (pathSeg as TSVGAbsoluteCoordinatesTypes).y;\n\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\n\t\t\t\t\t\t\tpoint.x = (pathSeg as SVGPathSegLinetoHorizontalAbs).x;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\n\t\t\t\t\t\t\tpoint.y = (pathSeg as SVGPathSegLinetoVerticalAbs).y;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_ARC_REL:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_LINETO_REL:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_MOVETO_REL:\n\t\t\t\t\t\t\tpoint.x = (pathSeg as TSVGRelativeCoordinatesTypes).x;\n\t\t\t\t\t\t\tpoint.y = (pathSeg as TSVGRelativeCoordinatesTypes).y;\n\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\n\t\t\t\t\t\t\tpoint.x = (pathSeg as SVGPathSegLinetoHorizontalRel).x;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\n\t\t\t\t\t\t\tpoint.y = (pathSeg as SVGPathSegLinetoVerticalRel).y;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_UNKNOWN:\n\t\t\t\t\t\tcase SVGPathSeg.PATHSEG_CLOSEPATH:\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.polygonRaw.push([\n\t\t\t\t\t\tpoint.x * this.polygon.scale + this.polygonOffsetX,\n\t\t\t\t\t\tpoint.y * this.polygon.scale + this.polygonOffsetY\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.lastCanvasWidth = this.library.canvas.width;\n\t\t\tthis.lastCanvasHeight = this.library.canvas.height;\n\n\t\t\tthis.createPath2D();\n\n\t\t\treturn this.polygonRaw;\n\t\t});\n\t}\n\n\tprivate parseSvgPath(svgUrl: string): Promise<ISVGPolygonData> {\n\t\tif (\n\t\t\t!this.polygonData ||\n\t\t\t!this.polygonData.paths ||\n\t\t\t!this.polygonData.paths.length ||\n\t\t\t!this.polygonData.svg\n\t\t) {\n\t\t\treturn this.library.imageManager.downloadImage(svgUrl).then(data => {\n\t\t\t\treturn {\n\t\t\t\t\t// Single path supported for now\n\t\t\t\t\tpaths: [data.xhr.responseXML.getElementsByTagName(\"path\")[0]],\n\t\t\t\t\tsvg: data.xhr.responseXML.getElementsByTagName(\"svg\")[0]\n\t\t\t\t};\n\t\t\t});\n\t\t} else {\n\t\t\treturn Promise.resolve(this.polygonData);\n\t\t}\n\t}\n\n\tgetRandomPointOnPolygonPath(): TPoint {\n\t\tif (!this.initialized) throw new Error(`No polygon data loaded.`);\n\t\tconst [x, y] = this.polygonRaw[\n\t\t\tMath.floor(Math.random() * this.polygonRaw.length)\n\t\t];\n\t\treturn {\n\t\t\tx,\n\t\t\ty\n\t\t};\n\t}\n\n\tgetRandomPointOnPolygonPathByLength(): TPoint {\n\t\tif (!this.initialized) throw new Error(`No polygon data loaded.`);\n\t\tconst point = this.polygonData.paths[0].getPointAtLength(\n\t\t\tMath.floor(Math.random() * this.polygonPathLength) + 1\n\t\t);\n\t\treturn {\n\t\t\tx: point.x * this.polygon.scale + this.polygonOffsetX,\n\t\t\ty: point.y * this.polygon.scale + this.polygonOffsetY\n\t\t};\n\t}\n\n\tgetRandomPointInsidePolygonPath(): TPoint {\n\t\tif (!this.initialized) throw new Error(`No polygon data loaded.`);\n\t\tconst point = {\n\t\t\tx: Math.random() * this.library.canvas.width,\n\t\t\ty: Math.random() * this.library.canvas.height\n\t\t};\n\t\treturn this.isPointInsidePolygon(point)\n\t\t\t? point\n\t\t\t: this.getRandomPointInsidePolygonPath();\n\t}\n\n\tgetRandomPointOutsidePolygonPath(): TPoint {\n\t\tif (!this.initialized) throw new Error(`No polygon data loaded.`);\n\t\tconst point = {\n\t\t\tx: Math.random() * this.library.canvas.width,\n\t\t\ty: Math.random() * this.library.canvas.height\n\t\t};\n\t\treturn this.isPointInsidePolygon(point)\n\t\t\t? this.getRandomPointOutsidePolygonPath()\n\t\t\t: point;\n\t}\n\n\tisPointInsidePolygon(point: TPoint): boolean {\n\t\tif (this.path2DSupported && this.polygonPath) {\n\t\t\treturn this.library.canvas.ctx.isPointInPath(\n\t\t\t\tthis.polygonPath,\n\t\t\t\tpoint.x,\n\t\t\t\tpoint.y\n\t\t\t);\n\t\t} else {\n\t\t\tlet inside = false;\n\t\t\t// https://github.com/substack/point-in-polygon\n\t\t\t// ray-casting algorithm based on\n\t\t\t// http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n\t\t\tfor (\n\t\t\t\tlet i = 0, j = this.polygonRaw.length - 1;\n\t\t\t\ti < this.polygonRaw.length;\n\t\t\t\tj = i++\n\t\t\t) {\n\t\t\t\tconst xi = this.polygonRaw[i][0],\n\t\t\t\t\tyi = this.polygonRaw[i][1];\n\t\t\t\tconst xj = this.polygonRaw[j][0],\n\t\t\t\t\tyj = this.polygonRaw[j][1];\n\t\t\t\tconst intersect =\n\t\t\t\t\tyi > point.y != yj > point.y &&\n\t\t\t\t\tpoint.x < ((xj - xi) * (point.y - yi)) / (yj - yi) + xi;\n\t\t\t\tif (intersect) inside = !inside;\n\t\t\t}\n\t\t\treturn inside;\n\t\t}\n\t}\n\n\tgetPoingOnPolygonPathByIndex(index: number): TPoint {\n\t\tif (!this.initialized) throw new Error(`No polygon data loaded.`);\n\t\tconst [x, y] = this.polygonRaw[index % this.polygonRaw.length];\n\t\treturn { x, y };\n\t}\n\n\tgetEquidistantPoingOnPolygonPathByIndex(index: number): TPoint {\n\t\tif (!this.initialized) throw new Error(`No polygon data loaded.`);\n\t\tconst point = this.polygonData.paths[0].getPointAtLength(\n\t\t\t(this.polygonPathLength /\n\t\t\t\tthis.library.getParameter(p => p.particles.number.value)) *\n\t\t\t\tindex\n\t\t);\n\t\treturn {\n\t\t\tx: point.x * this.polygon.scale + this.polygonOffsetX,\n\t\t\ty: point.y * this.polygon.scale + this.polygonOffsetY\n\t\t};\n\t}\n\n\tdrawPolygon() {\n\t\tconst context = this.library.canvas.ctx;\n\t\tif (!this.path2DSupported) {\n\t\t\tif (!this.initialized) return;\n\t\t\tcontext.beginPath();\n\t\t\tcontext.moveTo(this.polygonRaw[0][0], this.polygonRaw[0][1]);\n\t\t\tthis.polygonRaw.forEach(([x, y], i) => {\n\t\t\t\tif (i > 0) context.lineTo(x, y);\n\t\t\t});\n\t\t\tcontext.closePath();\n\t\t}\n\t\tcontext.strokeStyle = this.polygon.draw.stroke.color;\n\t\tcontext.lineWidth = this.polygon.draw.stroke.width;\n\t\tthis.polygonPath ? context.stroke(this.polygonPath) : context.stroke();\n\t}\n\n\tcreatePath2D() {\n\t\tif (!this.path2DSupported) return;\n\t\tthis.polygonPath = new Path2D();\n\t\tthis.polygonPath.moveTo(this.polygonRaw[0][0], this.polygonRaw[0][1]);\n\t\tthis.polygonRaw.forEach(([x, y], i) => {\n\t\t\tif (i > 0) this.polygonPath.lineTo(x, y);\n\t\t});\n\t\tthis.polygonPath.closePath();\n\t}\n}\n","export type TPoint = {\n\tx: number;\n\ty: number;\n};\n\nexport interface IParsedColor {\n\thsl?: HSL;\n\trgb?: RGB;\n}\n\nexport type RGB = {\n\tr: number;\n\tg: number;\n\tb: number;\n};\n\nexport type HSL = {\n\th: number;\n\ts: number;\n\tl: number;\n};\n\nexport const hexToRgb: (hex: string) => RGB = hex => {\n\tlet shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\thex = hex.replace(shorthandRegex, (m, r, g, b) => {\n\t\treturn r + r + g + g + b + b;\n\t});\n\tlet result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\treturn result\n\t\t? {\n\t\t\t\tr: parseInt(result[1], 16),\n\t\t\t\tg: parseInt(result[2], 16),\n\t\t\t\tb: parseInt(result[3], 16)\n\t\t\t}\n\t\t: null;\n};\n\nexport const clamp: (number: number, min: number, max: number) => number = (\n\tnumber,\n\tmin,\n\tmax\n) => {\n\treturn Math.min(Math.max(number, min), max);\n};\n\nexport function isInArray(value: any, array: any): boolean {\n\treturn array.indexOf(value) > -1;\n}\n\nexport function isEqual<T>(value: T, array: T[]): boolean;\nexport function isEqual<T>(value: T, object: T): boolean;\n\nexport function isEqual<T>(value: T, arrayOrObject: T | T[]): boolean {\n\tif (Array.isArray(arrayOrObject)) return isInArray(value, arrayOrObject);\n\treturn arrayOrObject === value;\n}\n\nexport const deepAssign = (destination: any, ...sources: any[]) => {\n\tfor (const source of sources) {\n\t\tif (source === undefined || source === null) continue;\n\t\tlet typeOfSource = typeof source;\n\t\tif (typeOfSource === \"object\") {\n\t\t\tconst sourceIsArray = Array.isArray(source);\n\t\t\tif (sourceIsArray) {\n\t\t\t\tif (\n\t\t\t\t\ttypeof destination !== \"object\" ||\n\t\t\t\t\t!destination ||\n\t\t\t\t\t!Array.isArray(destination)\n\t\t\t\t)\n\t\t\t\t\tdestination = [];\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\ttypeof destination !== \"object\" ||\n\t\t\t\t\t!destination ||\n\t\t\t\t\tArray.isArray(destination)\n\t\t\t\t)\n\t\t\t\t\tdestination = {};\n\t\t\t}\n\t\t\tfor (const key in source) {\n\t\t\t\tif (key === \"__proto__\") continue;\n\t\t\t\tconst value = source[key];\n\t\t\t\tconst isObject = typeof value === \"object\";\n\t\t\t\tif (isObject && Array.isArray(value)) {\n\t\t\t\t\tdestination[key] = value.map(v => deepAssign(destination[key], v));\n\t\t\t\t} else if (isObject) {\n\t\t\t\t\tdestination[key] = deepAssign(destination[key], value);\n\t\t\t\t} else {\n\t\t\t\t\tdestination[key] = deepAssign(destination[key], value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tdestination = source;\n\t\t}\n\t}\n\treturn destination;\n};\n\nexport const getColor: (colorObject: any) => IParsedColor = colorObject => {\n\tlet color: { rgb?: RGB; hsl?: HSL } = {};\n\tif (typeof colorObject == \"object\") {\n\t\tif (colorObject instanceof Array) {\n\t\t\tlet selectedColor: string =\n\t\t\t\tcolorObject[Math.floor(Math.random() * colorObject.length)];\n\t\t\tcolor.rgb = hexToRgb(selectedColor);\n\t\t} else {\n\t\t\tlet { r, g, b } = colorObject;\n\t\t\tif (r !== undefined && g !== undefined && b !== undefined) {\n\t\t\t\tcolor.rgb = { r, g, b };\n\t\t\t} else {\n\t\t\t\tlet { h, s, l } = colorObject;\n\t\t\t\tif (h !== undefined && g !== undefined && b !== undefined) {\n\t\t\t\t\tcolor.hsl = { h, s, l };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else if (colorObject == \"random\") {\n\t\tcolor.rgb = {\n\t\t\tr: Math.floor(Math.random() * 255) + 1,\n\t\t\tg: Math.floor(Math.random() * 255) + 1,\n\t\t\tb: Math.floor(Math.random() * 255) + 1\n\t\t};\n\t} else if (typeof colorObject == \"string\") {\n\t\tcolor.rgb = hexToRgb(colorObject);\n\t}\n\treturn color;\n};\n\nexport type RecursivePartial<T> = {\n\t[P in keyof T]?: T[P] extends (infer U)[]\n\t\t? RecursivePartial<U>[]\n\t\t: T[P] extends object ? RecursivePartial<T[P]> : T[P]\n};\n","import { IParams, Particle, hexToRgb, ParticlesLibrary } from \".\";\nimport { ImageManager } from \"./ImageManager\";\nimport { PolygonInlineArrangementType } from \"./IParams\";\n\nexport default class Vendors {\n\tparams: IParams;\n\tlibrary: ParticlesLibrary;\n\tlastDraw: number;\n\tprivate initialized: boolean = false;\n\n\tconstructor(\n\t\tprivate imageManager: ImageManager,\n\t\tparams: IParams,\n\t\tlibrary: ParticlesLibrary\n\t) {\n\t\tthis.params = params;\n\t\tthis.library = library;\n\t\tif (typeof performance !== \"undefined\") {\n\t\t\tthis.lastDraw = performance.now();\n\t\t}\n\t\tthis.draw = this.draw.bind(this);\n\t}\n\n\tdensityAutoParticles(): void {\n\t\tlet { canvas, modes } = this.library;\n\t\tlet { particles } = this.params;\n\n\t\tconst density = particles.number.density;\n\t\tlet densityValueArea = density.value_area;\n\n\t\tif (density.enable) {\n\t\t\tlet area = (canvas.element.width * canvas.element.height) / 1000;\n\t\t\tif (this.library.retina) {\n\t\t\t\tarea = area / (canvas.pxratio * 2);\n\t\t\t}\n\t\t\tconst nb_particles = area * particles.number.value / densityValueArea;\n\t\t\tconst missing_particles = particles.array.length - nb_particles;\n\t\t\tif (missing_particles < 0) {\n\t\t\t\tmodes.pushParticles(Math.abs(missing_particles));\n\t\t\t} else {\n\t\t\t\tmodes.removeParticles(missing_particles);\n\t\t\t}\n\t\t}\n\t}\n\n\tcheckOverlap(p1: Particle, position?: { x: number; y: number }): void {\n\t\tlet { canvas, vendors } = this.library;\n\n\t\t// Hot fix: maximum call stack due to not rendered canvas.\n\t\t// https://github.com/Wufe/react-particles-js/issues/49\n\t\tif (!canvas.width || !canvas.height) return;\n\n\t\tlet { particles } = this.params;\n\n\t\tparticles.array.forEach((particle: Particle) => {\n\t\t\tlet p2: Particle = particle;\n\n\t\t\tlet dx: number = p1.x - p2.x;\n\t\t\tlet dy: number = p1.y - p2.y;\n\t\t\tlet dist: number = Math.sqrt(dx * dx + dy * dy);\n\t\t\tif (dist <= p1.radius + p2.radius) {\n\t\t\t\tif (!this.library.params.polygon.enable) {\n\t\t\t\t\tp1.x = position ? position.x : Math.random() * canvas.width;\n\t\t\t\t\tp1.y = position ? position.y : Math.random() * canvas.height;\n\t\t\t\t\tvendors.checkOverlap(p1);\n\t\t\t\t} else {\n\t\t\t\t\t// If disposition is random, we cannot check if the point is used by another particle\n\t\t\t\t\tswitch (this.library.params.polygon.inline.arrangement) {\n\t\t\t\t\t\tcase PolygonInlineArrangementType.RANDOM_LENGTH:\n\t\t\t\t\t\tcase PolygonInlineArrangementType.RANDOM_POINT:\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t// Let the particle be overlapped\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tdestroy(): void {\n\t\tcancelAnimationFrame(this.library.drawAnimFrame);\n\t\tthis.library.canvas.element.remove();\n\t}\n\n\tdrawShape(\n\t\tc: CanvasRenderingContext2D,\n\t\tstartX: number,\n\t\tstartY: number,\n\t\tsideLength: number,\n\t\tsideCountNumerator: number,\n\t\tsideCountDenominator: number\n\t): void {\n\t\tlet sideCount: number = sideCountNumerator * sideCountDenominator;\n\t\tlet decimalSides: number = sideCountNumerator / sideCountDenominator;\n\t\tlet interiorAngleDegrees: number =\n\t\t\t(180 * (decimalSides - 2)) / decimalSides;\n\t\tlet interiorAngle: number =\n\t\t\tMath.PI - (Math.PI * interiorAngleDegrees) / 180;\n\t\tc.save();\n\t\tc.beginPath();\n\t\tc.translate(startX, startY);\n\t\tc.moveTo(0, 0);\n\t\tfor (let i = 0; i < sideCount; i++) {\n\t\t\tc.lineTo(sideLength, 0);\n\t\t\tc.translate(sideLength, 0);\n\t\t\tc.rotate(interiorAngle);\n\t\t}\n\t\tc.fill();\n\t\tc.restore();\n\t}\n\n\texportImg(): void {\n\t\tlet { canvas } = this.library;\n\t\twindow.open(canvas.element.toDataURL(\"image/png\"), \"_blank\");\n\t}\n\n\tdraw(): void {\n\t\tlet shouldDraw = true;\n\t\tlet { manager, vendors } = this.library;\n\t\tlet { particles } = this.params;\n\t\tif (performance !== undefined) {\n\t\t\tlet thisDraw = performance.now();\n\t\t\tif (thisDraw - this.lastDraw < 1000 / this.params.fps_limit) {\n\t\t\t\tshouldDraw = false;\n\t\t\t} else {\n\t\t\t\tthis.lastDraw = performance.now();\n\t\t\t}\n\t\t}\n\t\tif (shouldDraw) {\n\t\t\tmanager.particlesDraw();\n\t\t}\n\t\tif (!particles.move.enable) {\n\t\t\tcancelAnimationFrame(this.library.drawAnimFrame);\n\t\t} else {\n\t\t\tthis.library.drawAnimFrame = requestAnimationFrame(vendors.draw);\n\t\t}\n\t}\n\n\tinit(): void {\n\t\tif (this.initialized) return;\n\t\tthis.initialized = true;\n\t\tlet { library } = this;\n\t\tlet { manager, vendors } = library;\n\t\tlet { particles } = this.params;\n\t\tlibrary.retinaInit();\n\t\tlibrary.canvasInit();\n\t\tlibrary.canvasSize();\n\t\tlibrary.polygonMask\n\t\t\t.initialize(this.library.getParameter(p => p.polygon))\n\t\t\t.then(() => {\n\t\t\t\tmanager.particlesCreate();\n\t\t\t\tvendors.densityAutoParticles();\n\t\t\t\tthis.library.setParameters({\n\t\t\t\t\tparticles: {\n\t\t\t\t\t\tline_linked: {\n\t\t\t\t\t\t\tcolor_rgb_line: hexToRgb(particles.line_linked.color)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.draw();\n\t\t\t});\n\t}\n\n\tstart(): void {\n\t\tlet { particles } = this.params;\n\n\t\tthis.imageManager.parseShape(particles.shape).then(shape => {\n\t\t\tthis.init();\n\t\t});\n\t}\n}\n","import { IParams } from \".\";\nimport {\n\tShapeType,\n\tMoveDirection,\n\tInteractivityMode,\n\tPolygonType,\n\tPolygonInlineArrangementType,\n\tPolygonMoveType,\n\tMoveOutMode\n} from \"./IParams\";\nimport { deepAssign } from \"./Utils\";\n\nconst defaultParams: IParams = {\n\tparticles: {\n\t\tnumber: {\n\t\t\tvalue: 40,\n\t\t\tdensity: {\n\t\t\t\tenable: false,\n\t\t\t\tvalue_area: 1200\n\t\t\t}\n\t\t},\n\t\tcolor: {\n\t\t\tvalue: \"#FFF\"\n\t\t},\n\t\tshape: {\n\t\t\ttype: ShapeType.CIRCLE,\n\t\t\tstroke: {\n\t\t\t\twidth: 0,\n\t\t\t\tcolor: \"#000000\"\n\t\t\t},\n\t\t\tpolygon: {\n\t\t\t\tnb_sides: 5\n\t\t\t},\n\t\t\timage: {\n\t\t\t\tsrc: \"\",\n\t\t\t\twidth: 100,\n\t\t\t\theight: 100\n\t\t\t},\n\t\t\timages: []\n\t\t},\n\t\topacity: {\n\t\t\tvalue: 0.5,\n\t\t\trandom: false,\n\t\t\tanim: {\n\t\t\t\tenable: true,\n\t\t\t\tspeed: 1,\n\t\t\t\topacity_min: 0.1,\n\t\t\t\tsync: false\n\t\t\t}\n\t\t},\n\t\tsize: {\n\t\t\tvalue: 1,\n\t\t\trandom: false,\n\t\t\tanim: {\n\t\t\t\tenable: false,\n\t\t\t\tspeed: 40,\n\t\t\t\tsize_min: 0,\n\t\t\t\tsync: false\n\t\t\t}\n\t\t},\n\t\tline_linked: {\n\t\t\tenable: true,\n\t\t\tdistance: 150,\n\t\t\tcolor: \"#FFF\",\n\t\t\topacity: 0.6,\n\t\t\twidth: 1,\n\t\t\tshadow: {\n\t\t\t\tenable: false,\n\t\t\t\tblur: 5,\n\t\t\t\tcolor: \"lime\"\n\t\t\t}\n\t\t},\n\t\tmove: {\n\t\t\tenable: true,\n\t\t\tspeed: 3,\n\t\t\tdirection: MoveDirection.NONE,\n\t\t\trandom: false,\n\t\t\tstraight: false,\n\t\t\tout_mode: MoveOutMode.BOUNCE,\n\t\t\tbounce: true,\n\t\t\tattract: {\n\t\t\t\tenable: false,\n\t\t\t\trotateX: 3000,\n\t\t\t\trotateY: 3000\n\t\t\t}\n\t\t},\n\t\tarray: []\n\t},\n\tinteractivity: {\n\t\tdetect_on: \"canvas\",\n\t\tevents: {\n\t\t\tonhover: {\n\t\t\t\tenable: false,\n\t\t\t\tmode: InteractivityMode.GRAB\n\t\t\t},\n\t\t\tonclick: {\n\t\t\t\tenable: false,\n\t\t\t\tmode: InteractivityMode.REPULSE\n\t\t\t},\n\t\t\tresize: true\n\t\t},\n\t\tmodes: {\n\t\t\tgrab: {\n\t\t\t\tdistance: 180,\n\t\t\t\tline_linked: {\n\t\t\t\t\topacity: 0.35\n\t\t\t\t}\n\t\t\t},\n\t\t\tbubble: {\n\t\t\t\tdistance: 200,\n\t\t\t\tsize: 80,\n\t\t\t\tduration: 0.4\n\t\t\t},\n\t\t\trepulse: {\n\t\t\t\tdistance: 100,\n\t\t\t\tduration: 5\n\t\t\t},\n\t\t\tpush: {\n\t\t\t\tparticles_nb: 4\n\t\t\t},\n\t\t\tremove: {\n\t\t\t\tparticles_nb: 2\n\t\t\t}\n\t\t}\n\t},\n\tretina_detect: true,\n\tfps_limit: 999,\n\tpolygon: {\n\t\tenable: false,\n\t\tscale: 1,\n\t\ttype: PolygonType.INLINE,\n\t\tinline: {\n\t\t\tarrangement: PolygonInlineArrangementType.ONE_PER_POINT\n\t\t},\n\t\tdraw: {\n\t\t\tenable: false,\n\t\t\tstroke: {\n\t\t\t\twidth: 0.5,\n\t\t\t\tcolor: \"rgba(255, 255, 255, .1)\"\n\t\t\t}\n\t\t},\n\t\tmove: {\n\t\t\tradius: 10,\n\t\t\ttype: PolygonMoveType.PATH\n\t\t},\n\t\turl: \"\"\n\t}\n};\n\nexport const getDefaultParams = () => deepAssign({}, defaultParams);\n","import Interactivity from './Interactivity';\nimport Modes from './Modes';\nimport Particle from './Particle';\nimport ParticleManager from './ParticleManager';\nimport ParticlesLibrary from './ParticlesLibrary';\nimport Vendors from './Vendors';\n\nexport * from './getDefaultParams';\nexport * from './IParams';\nexport * from './PolygonMask';\nexport * from './Utils';\n\nexport {\n\tInteractivity,\n\tModes,\n\tParticle,\n\tParticleManager,\n\tParticlesLibrary,\n\tVendors\n};","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;"],"sourceRoot":""}